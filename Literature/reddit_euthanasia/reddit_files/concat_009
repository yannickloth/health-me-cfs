SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");
SML.dm("B0lOMWG9-K",["Dw4vb8Yfbm"],(async t=>{const{svg:e}=t.a(),n=t.m(e`<path d="M2.1 6.5a.898.898 0 011.536-.636L10 12.227l6.364-6.363a.898.898 0 011.272 0 .898.898 0 010 1.272l-7 7a.898.898 0 01-1.272 0l-7-7A.897.897 0 012.1 6.5z"></path>`,"0 0 20 20","chevron-down");const r=(()=>{let t=0;return()=>(t+=1,`u${`0000${(Math.random()*36**4|0).toString(36)}`.slice(-4)}${t}`)})();function o(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}function i(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function a(t,e={}){return{width:e.width||function(t){const e=i(t,"border-left-width"),n=i(t,"border-right-width");return t.clientWidth+e+n}(t),height:e.height||function(t){const e=i(t,"border-top-width"),n=i(t,"border-bottom-width");return t.clientHeight+e+n}(t)}}const c=16384;function s(t){return new Promise(((e,n)=>{const r=new Image;r.decode=()=>e(r),r.onload=()=>e(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t}))}async function l(t,e,n){const r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),i=document.createElementNS(r,"foreignObject");return o.setAttribute("width",`${e}`),o.setAttribute("height",`${n}`),o.setAttribute("viewBox",`0 0 ${e} ${n}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),o.appendChild(i),i.appendChild(t),async function(t){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(t))).then(encodeURIComponent).then((t=>`data:image/svg+xml;charset=utf-8,${t}`))}(o)}const u=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return null!==n&&(n.constructor.name===e.name||u(n,e))};function h(t,e,n){const r=`.${t}:${e}`,i=n.cssText?function(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}(n):function(t){return o(t).map((e=>`${e}: ${t.getPropertyValue(e)}${t.getPropertyPriority(e)?" !important":""};`)).join(" ")}(n);return document.createTextNode(`${r}{${i}}`)}function d(t,e,n){const o=window.getComputedStyle(t,n),i=o.getPropertyValue("content");if(""===i||"none"===i)return;const a=r();try{e.className=`${e.className} ${a}`}catch(t){return}const c=document.createElement("style");c.appendChild(h(a,n,o)),e.appendChild(c)}const f="application/font-woff",g="image/jpeg",m={woff:f,woff2:f,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:g,jpeg:g,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function p(t){const e=function(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}(t).toLowerCase();return m[e]||""}function w(t){return-1!==t.search(/^(data:)/)}async function y(t,e,n){const r=await fetch(t,e);if(404===r.status)throw new Error(`Resource "${r.url}" not found`);const o=await r.blob();return new Promise(((t,e)=>{const i=new FileReader;i.onerror=e,i.onloadend=()=>{try{t(n({res:r,result:i.result}))}catch(t){e(t)}},i.readAsDataURL(o)}))}const b={};async function S(t,e,n){const r=function(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}(t,e,n.includeQueryParams);if(null!=b[r])return b[r];let o;n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());try{const r=await y(t,n.fetchRequestInit,(({res:t,result:n})=>(e||(e=t.headers.get("Content-Type")||""),function(t){return t.split(/,/)[1]}(n))));o=function(t,e){return`data:${e};base64,${t}`}(r,e)}catch(e){o=n.imagePlaceholder||"";let r=`Failed to fetch resource: ${t}`;e&&(r="string"==typeof e?e:e.message),r&&console.warn(r)}return b[r]=o,o}async function E(t,e){return u(t,HTMLCanvasElement)?async function(t){const e=t.toDataURL();return"data:,"===e?t.cloneNode(!1):s(e)}(t):u(t,HTMLVideoElement)?async function(t,e){if(t.currentSrc){const e=document.createElement("canvas"),n=e.getContext("2d");return e.width=t.clientWidth,e.height=t.clientHeight,null==n||n.drawImage(t,0,0,e.width,e.height),s(e.toDataURL())}const n=t.poster,r=p(n);return s(await S(n,r,e))}(t,e):u(t,HTMLIFrameElement)?async function(t){var e;try{if(null===(e=null==t?void 0:t.contentDocument)||void 0===e?void 0:e.body)return await $(t.contentDocument.body,{},!0)}catch(t){}return t.cloneNode(!1)}(t):t.cloneNode(!1)}const v=t=>null!=t.tagName&&"SLOT"===t.tagName.toUpperCase();function x(t,e){return u(e,Element)&&(function(t,e){const n=e.style;if(!n)return;const r=window.getComputedStyle(t);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):o(r).forEach((o=>{let i=r.getPropertyValue(o);if("font-size"===o&&i.endsWith("px")){const t=Math.floor(parseFloat(i.substring(0,i.length-2)))-.1;i=`${t}px`}u(t,HTMLIFrameElement)&&"display"===o&&"inline"===i&&(i="block"),"d"===o&&e.getAttribute("d")&&(i=`path(${e.getAttribute("d")})`),n.setProperty(o,i,r.getPropertyPriority(o))}))}(t,e),function(t,e){d(t,e,":before"),d(t,e,":after")}(t,e),function(t,e){u(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),u(t,HTMLInputElement)&&e.setAttribute("value",t.value)}(t,e),function(t,e){if(u(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find((e=>t.value===e.getAttribute("value")));r&&r.setAttribute("selected","")}}(t,e)),e}async function $(t,e,n){return n||!e.filter||e.filter(t)?Promise.resolve(t).then((t=>E(t,e))).then((n=>async function(t,e,n){var r,i;let a=[];return a=v(t)&&t.assignedNodes?o(t.assignedNodes()):u(t,HTMLIFrameElement)&&(null===(r=t.contentDocument)||void 0===r?void 0:r.body)?o(t.contentDocument.body.childNodes):o((null!==(i=t.shadowRoot)&&void 0!==i?i:t).childNodes),0===a.length||u(t,HTMLVideoElement)||await a.reduce(((t,r)=>t.then((()=>$(r,n))).then((t=>{t&&e.appendChild(t)}))),Promise.resolve()),e}(t,n,e))).then((e=>x(t,e))).then((t=>async function(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(0===n.length)return t;const r={};for(let o=0;o<n.length;o++){const i=n[o].getAttribute("xlink:href");if(i){const n=t.querySelector(i),o=document.querySelector(i);n||!o||r[i]||(r[i]=await $(o,e,!0))}}const o=Object.values(r);if(o.length){const e="http://www.w3.org/1999/xhtml",n=document.createElementNS(e,"svg");n.setAttribute("xmlns",e),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const r=document.createElementNS(e,"defs");n.appendChild(r);for(let t=0;t<o.length;t++)r.appendChild(o[t]);t.appendChild(n)}return t}(t,e))):null}const C=/url\((['"]?)([^'"]+?)\1\)/g,P=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,R=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function T(t,e,n,r,o){try{const i=n?function(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),e&&(r.href=e),o.href=t,o.href}(e,n):e,a=p(e);let c;return o||(c=await S(i,a,r)),t.replace(function(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}(e),`$1${c}$3`)}catch(t){}return t}function L(t){return-1!==t.search(C)}async function A(t,e,n){if(!L(t))return t;const r=function(t,{preferredFontFormat:e}){return e?t.replace(R,(t=>{for(;;){const[n,,r]=P.exec(t)||[];if(!r)return"";if(r===e)return`src: ${n};`}})):t}(t,n),o=function(t){const e=[];return t.replace(C,((t,n,r)=>(e.push(r),t))),e.filter((t=>!w(t)))}(r);return o.reduce(((t,r)=>t.then((t=>T(t,r,e,n)))),Promise.resolve(r))}async function N(t,e,n){var r;const o=null===(r=e.style)||void 0===r?void 0:r.getPropertyValue(t);if(o){const r=await A(o,null,n);return e.style.setProperty(t,r,e.style.getPropertyPriority(t)),!0}return!1}async function D(t,e){u(t,Element)&&(await async function(t,e){await N("background",t,e)||await N("background-image",t,e),await N("mask",t,e)||await N("mask-image",t,e)}(t,e),await async function(t,e){const n=u(t,HTMLImageElement);if((!n||w(t.src))&&(!u(t,SVGImageElement)||w(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,o=await S(r,p(r),e);await new Promise(((e,r)=>{t.onload=e,t.onerror=r;const i=t;i.decode&&(i.decode=e),"lazy"===i.loading&&(i.loading="eager"),n?(t.srcset="",t.src=o):t.href.baseVal=o}))}(t,e),await async function(t,e){const n=o(t.childNodes).map((t=>D(t,e)));await Promise.all(n).then((()=>t))}(t,e))}const I={};async function M(t){let e=I[t];if(null!=e)return e;const n=await fetch(t);return e={url:t,cssText:await n.text()},I[t]=e,e}async function k(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,o=(n.match(/url\([^)]+\)/g)||[]).map((async o=>{let i=o.replace(r,"$1");return i.startsWith("https://")||(i=new URL(i,t.url).href),y(i,e.fetchRequestInit,(({result:t})=>(n=n.replace(o,`url(${t})`),[o,t])))}));return Promise.all(o).then((()=>n))}function H(t){if(null==t)return[];const e=[];let n=t.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const t=r.exec(n);if(null===t)break;e.push(t[0])}n=n.replace(r,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let t=o.exec(n);if(null===t){if(t=i.exec(n),null===t)break;o.lastIndex=i.lastIndex}else i.lastIndex=o.lastIndex;e.push(t[0])}return e}async function O(t,e){if(null==t.ownerDocument)throw new Error("Provided element is not within a Document");const n=o(t.ownerDocument.styleSheets),r=await async function(t,e){const n=[],r=[];return t.forEach((n=>{if("cssRules"in n)try{o(n.cssRules||[]).forEach(((t,o)=>{if(t.type===CSSRule.IMPORT_RULE){let i=o+1;const a=M(t.href).then((t=>k(t,e))).then((t=>H(t).forEach((t=>{try{n.insertRule(t,t.startsWith("@import")?i+=1:n.cssRules.length)}catch(e){console.error("Error inserting rule from remote css",{rule:t,error:e})}})))).catch((t=>{console.error("Error loading remote css",t.toString())}));r.push(a)}}))}catch(o){const i=t.find((t=>null==t.href))||document.styleSheets[0];null!=n.href&&r.push(M(n.href).then((t=>k(t,e))).then((t=>H(t).forEach((t=>{i.insertRule(t,n.cssRules.length)})))).catch((t=>{console.error("Error loading remote stylesheet",t)}))),console.error("Error inlining remote css file",o)}})),Promise.all(r).then((()=>(t.forEach((t=>{if("cssRules"in t)try{o(t.cssRules||[]).forEach((t=>{n.push(t)}))}catch(e){console.error(`Error while reading CSS rules from ${t.href}`,e)}})),n)))}(n,e);return function(t){return t.filter((t=>t.type===CSSRule.FONT_FACE_RULE)).filter((t=>L(t.style.getPropertyValue("src"))))}(r)}async function V(t,e){const n=await O(t,e);return(await Promise.all(n.map((t=>{const n=t.parentStyleSheet?t.parentStyleSheet.href:null;return A(t.cssText,n,e)})))).join("\n")}async function j(t,e={}){const{width:n,height:r}=a(t,e),o=await $(t,e,!0);await async function(t,e){const n=null!=e.fontEmbedCSS?e.fontEmbedCSS:e.skipFonts?null:await V(t,e);if(n){const e=document.createElement("style"),r=document.createTextNode(n);e.appendChild(r),t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}}(o,e),await D(o,e),function(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;null!=r&&Object.keys(r).forEach((t=>{n[t]=r[t]}))}(o,e);return await l(o,n,r)}async function q(t,e={}){const{width:n,height:r}=a(t,e),o=await j(t,e),i=await s(o),l=document.createElement("canvas"),u=l.getContext("2d"),h=e.pixelRatio||function(){let t,e;try{e=process}catch(t){}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}(),d=e.canvasWidth||n,f=e.canvasHeight||r;return l.width=d*h,l.height=f*h,e.skipAutoScale||function(t){(t.width>c||t.height>c)&&(t.width>c&&t.height>c?t.width>t.height?(t.height*=c/t.width,t.width=c):(t.width*=c/t.height,t.height=c):t.width>c?(t.height*=c/t.width,t.width=c):(t.width*=c/t.height,t.height=c))}(l),l.style.width=`${d}`,l.style.height=`${f}`,e.backgroundColor&&(u.fillStyle=e.backgroundColor,u.fillRect(0,0,l.width,l.height)),u.drawImage(i,0,0,l.width,l.height),l}var F=Object.freeze({__proto__:null,getFontEmbedCSS:async function(t,e={}){return V(t,e)},toBlob:async function(t,e={}){const n=await q(t,e);return await function(t,e={}){return t.toBlob?new Promise((n=>{t.toBlob(n,e.type?e.type:"image/png",e.quality?e.quality:1)})):new Promise((n=>{const r=window.atob(t.toDataURL(e.type?e.type:void 0,e.quality?e.quality:void 0).split(",")[1]),o=r.length,i=new Uint8Array(o);for(let t=0;t<o;t+=1)i[t]=r.charCodeAt(t);n(new Blob([i],{type:e.type?e.type:"image/png"}))}))}(n)},toCanvas:q,toJpeg:async function(t,e={}){return(await q(t,e)).toDataURL("image/jpeg",e.quality||1)},toPixelData:async function(t,e={}){const{width:n,height:r}=a(t,e);return(await q(t,e)).getContext("2d").getImageData(0,0,n,r).data},toPng:async function(t,e={}){return(await q(t,e)).toDataURL()},toSvg:j});return{c:n,get i(){return F}}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");SML.di("./B-zFJtiar6.js",import.meta.url,"B-zFJtiar6");
SML.dm("B4qjvrw-PZ",["Dw4vb8Yfbm","B-zFJtiar6"],(async(e,a)=>{let s=e.Y;const{svg:t}=e.a(),i=e.m(t`<path d="M18 12v2.7a3.3 3.3 0 01-3.3 3.3H5.3A3.3 3.3 0 012 14.7V5.3A3.3 3.3 0 015.3 2H8v1.8H5.3c-.827 0-1.5.673-1.5 1.5v9.4c0 .827.673 1.5 1.5 1.5h9.4c.827 0 1.5-.673 1.5-1.5V12H18zm-.9-10h-4.992a.9.9 0 000 1.8h2.82l-6.664 6.664a.9.9 0 101.273 1.272l6.662-6.662v2.818a.9.9 0 001.8 0V2.9A.9.9 0 0017.1 2z"></path>`,"0 0 20 20","external",!0);return {S:class{constructor(t,i){this.submitMutation=a.D((async(e,a,t,i,n,r)=>{let o;try{if(o=await s({operation:a,variables:t}),o.errors.length>0||r?.(o))throw"Could not save setting";i?.(o)}catch(a){this.state={...this.state,...e},this.host.requestUpdate(),this.showErrorAlert(),n?.(o,a)}}),250,!0),this.showSuccessAlert=()=>{const a=e.c("faceplate-alert",{level:e.a5.success,message:"Changes saved"});this.host.dispatchEvent(a)},this.showErrorAlert=a=>{const s=e.c("faceplate-alert",{level:e.a5.error,cause:"uncategorized",message:a??"We had some issues saving your changes. Please try again."});this.host.dispatchEvent(s)},(this.host=t).addController(this),this.state=i}hostConnected(){this.host.removeAttribute("initialState")}async updateSetting(e,a,s,t,i,n,r){this.state={...this.state,...e},this.host.requestUpdate(),await this.submitMutation(a,s,t,i,n,r)}},e:i};}));
SML.dm("BNvs6GxKML",[],(async()=>{var e,t;!function(e){e.Body="body",e.OptionalBody="optionalBody",e.CrosspostSourceId="crosspostSourceId",e.DraftId="draftId",e.EventStartDate="eventStartDate",e.EventStartTime="eventStartTime",e.Flair="flair",e.FlairId="flairId",e.FlairText="flairText",e.IsSpoiler="isSpoiler",e.IsNsfw="isNsfw",e.IsCommercialCommunication="isCommercialCommunication",e.Image="image",e.Link="link",e.PrefixedName="prefixedName",e.RecaptchaToken="recaptchaToken",e.ScheduledPostId="scheduledPostId",e.StartTimeToggle="startTimeToggle",e.SubmitType="submitType",e.SubredditId="subredditId",e.SubredditName="subredditName",e.Title="title",e.Type="type",e.Video="video",e.Schedule="schedule",e.EventType="eventType",e.TargetLanguage="targetLanguage",e.AMAEventDuration="amaEventDuration"}(e||(e={})),function(e){e.Now="now",e.Later="later"}(t||(t={}));return{get P(){return e},S:"schedule-input-section",get a(){return t}}}));

SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");
SML.dm("BOIWl4apq6",["Dw4vb8Yfbm"],(async c=>{const{svg:s}=c.a();return{l:c.m(s`<path d="M4 2.45c-.86 0-1.55.69-1.55 1.55 0 .86.69 1.55 1.55 1.55.86 0 1.55-.69 1.55-1.55 0-.86-.69-1.55-1.55-1.55zM4 8.45c-.86 0-1.55.69-1.55 1.55 0 .86.69 1.55 1.55 1.55.86 0 1.55-.69 1.55-1.55 0-.86-.69-1.55-1.55-1.55zM4 14.45c-.86 0-1.55.69-1.55 1.55 0 .86.69 1.55 1.55 1.55.86 0 1.55-.69 1.55-1.55 0-.86-.69-1.55-1.55-1.55zM9 4.9h8c.5 0 .9-.4.9-.9s-.4-.9-.9-.9H9c-.5 0-.9.4-.9.9s.4.9.9.9zM17 15.1H9c-.5 0-.9.4-.9.9s.4.9.9.9h8c.5 0 .9-.4.9-.9s-.4-.9-.9-.9zM17 9.1H9c-.5 0-.9.4-.9.9s.4.9.9.9h8c.5 0 .9-.4.9-.9s-.4-.9-.9-.9z"></path>`,"0 0 20 20","list-bulleted",!0)}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");
SML.dm("BQXYVRGtud",["Dw4vb8Yfbm"],(async a=>{const{svg:c}=a.a(),t=a.m(c`<path d="M15.744 10.998c.524.654.79 1.47.797 2.446 0 .889-.224 1.68-.673 2.37-.449.69-1.076 1.228-1.882 1.611-.806.383-1.734.575-2.782.575H7.003a2.004 2.004 0 01-2.004-2.004V4.004C4.999 2.897 5.896 2 7.003 2H9.88c1.114 0 2.083.175 2.907.526.824.351 1.455.833 1.893 1.448.438.615.66 1.313.667 2.094a4.325 4.325 0 01-.494 1.958A4.405 4.405 0 0113.6 9.55c.904.311 1.618.794 2.142 1.448h.002zM8.102 4.701V8.66h2.061c.427 0 .805-.085 1.134-.255.329-.17.584-.407.765-.711.181-.304.271-.654.271-1.052 0-.607-.208-1.083-.624-1.426-.416-.343-1.003-.515-1.763-.515H8.102zm3.038 10.598c.477 0 .891-.089 1.242-.266.351-.177.618-.425.803-.743.185-.318.277-.683.277-1.096 0-.665-.235-1.179-.705-1.54s-1.081-.542-1.833-.542h-2.82v4.187h3.036z"></path>`,"0 0 20 20","bold"),{svg:h}=a.a();return{b:t,i:a.m(h`<path d="M12.35 4c0 .75-.6 1.35-1.35 1.35-.75 0-1.35-.6-1.35-1.35 0-.75.6-1.35 1.35-1.35.75 0 1.35.6 1.35 1.35zM9.9 16.01c-.15-.1-.22-.26-.22-.49 0-.09 0-.16.02-.21l1.43-7.13a.976.976 0 00-.96-1.17c-.47 0-.87.33-.96.78l-1.45 7.12c-.07.32-.1.64-.1.95 0 .62.18 1.12.54 1.5.22.23.54.42.94.56.1.03.19.05.29.05.4 0 .78-.26.92-.67.27-.71-.18-1.16-.45-1.29z"></path>`,"0 0 20 20","italic")}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");
SML.dm("B_mjuylxRt",["Dw4vb8Yfbm"],(async a=>{const{svg:h}=a.a(),c=a.m(h`<path d="M19.68 17.061c-.08.595-.695.991-1.254.771-.594-.233-.857-.517-.857-.517-.221-.207-.365-.424-.434-.65h-.025c-.266.368-.655.673-1.168.914-.512.24-1.074.36-1.686.36-.594 0-1.124-.117-1.588-.353a2.647 2.647 0 01-1.083-.977 2.613 2.613 0 01-.386-1.406c0-.555.15-1.043.454-1.465.303-.422.756-.75 1.359-.985.603-.234 1.346-.353 2.229-.353h1.546v-.407c0-.465-.126-.861-.378-1.189-.252-.328-.704-.492-1.355-.492-.42 0-.872.073-1.36.221-.193.059-.387.115-.571.173a.848.848 0 01-1.045-.505c-.166-.43.033-.928.463-1.093.247-.094.517-.181.812-.258a7.618 7.618 0 011.757-.25c1.122-.027 1.947.171 2.475.591.499.396.807.827.926 1.291.119.465.179.957.179 1.479v2.956c0 .368.04.646.119.832 0 0 .05.18.353.338a.962.962 0 01.518.974zm-4.07-.892a2.29 2.29 0 00.91-.629c.247-.28.37-.618.37-1.015v-.68h-1.648c-.634 0-1.146.104-1.537.314-.391.209-.586.538-.586.985 0 .379.139.679.417.9.277.221.625.331 1.044.331.329 0 .672-.069 1.032-.208l-.001.002zm-5.924 1.732a.916.916 0 01-.886-.66l-1.003-3.562H3.489l-.983 3.56a.915.915 0 01-.886.662c-.608 0-1.05-.568-.885-1.14L4.69 2.954a.991.991 0 01.956-.706c.444 0 .834.288.956.705L10.57 16.76c.165.573-.276 1.141-.885 1.141zm-4.01-12.2h-.06l-1.742 6.371h3.56L5.677 5.7z"></path>`,"0 0 20 20","format"),{svg:l}=a.a(),t=a.m(l`<path d="M18 5.301V14.7c0 1.82-1.48 3.301-3.3 3.301H5.301A3.304 3.304 0 012 14.7v-4.499c.429.262.913.4 1.4.4.12 0 .238-.018.357-.034.013.021.031.037.044.057V14.7c0 .827.673 1.5 1.5 1.5h9.4c.827 0 1.499-.673 1.499-1.5V5.301a1.5 1.5 0 00-1.223-1.472 2.656 2.656 0 00-.276-.337L13.21 2.001h1.491c1.819 0 3.3 1.48 3.3 3.301L18 5.301zM6.93 9.337l1.594-7.5a.899.899 0 10-1.759-.375l-1.594 7.5a.899.899 0 101.759.375zm-2.893-.801a.9.9 0 000-1.273L2.173 5.4l1.864-1.863a.9.9 0 10-1.273-1.273l-2.5 2.499a.9.9 0 000 1.273l2.5 2.5a.897.897 0 001.273 0zm9.392-2.5a.9.9 0 000-1.273l-2.5-2.5a.9.9 0 10-1.273 1.273l1.864 1.863-1.864 1.863a.9.9 0 101.274 1.273l2.499-2.499z"></path>`,"0 0 20 20","code-block"),{svg:z}=a.a(),m=a.m(z`<path d="M19 2.9a.9.9 0 01-.9.9h-4.251v13.3a.9.9 0 01-1.8 0V3.8H7.9a.9.9 0 010-1.8h10.2a.9.9 0 01.9.9zM9.1 8H2.9a.9.9 0 000 1.8h2.18v7.3a.9.9 0 001.8 0V9.8h2.221A.9.9 0 109.1 8z"></path>`,"0 0 20 20","text-size"),{svg:v}=a.a(),p=a.m(v`<path d="M18 5.3C18 3.48 16.52 2 14.7 2H5.3C3.48 2 2 3.48 2 5.3v9.4C2 16.52 3.48 18 5.3 18h9.4c1.82 0 3.3-1.48 3.3-3.3V5.3zm-3.3-1.5c.83 0 1.5.67 1.5 1.5v1.9H9V3.8h5.7zm-9.4 0h1.9v3.4H3.8V5.3c0-.83.67-1.5 1.5-1.5zM3.8 14.7V9h3.4v7.2H5.3c-.83 0-1.5-.67-1.5-1.5zm12.4 0c0 .83-.67 1.5-1.5 1.5H9V9h7.2v5.7z"></path>`,"0 0 20 20","table"),{svg:H}=a.a(),M=a.m(H`<path d="M17 5.9H3a.9.9 0 010-1.8h14a.9.9 0 010 1.8zm.9 9.1a.9.9 0 00-.9-.9H3a.9.9 0 100 1.8h14a.9.9 0 00.9-.9zm-3.5-5a.9.9 0 00-.9-.9h-7a.9.9 0 100 1.8h7a.9.9 0 00.9-.9z"></path>`,"0 0 20 20","align-center"),{svg:s}=a.a(),g=a.m(s`<path d="M17 5.9H3a.9.9 0 010-1.8h14a.9.9 0 010 1.8zM10.9 10a.9.9 0 00-.9-.9H3a.9.9 0 100 1.8h7a.9.9 0 00.9-.9zm7 5a.9.9 0 00-.9-.9H3a.9.9 0 100 1.8h14a.9.9 0 00.9-.9z"></path>`,"0 0 20 20","align-left"),{svg:d}=a.a(),e=a.m(d`<path d="M17 5.9H3a.9.9 0 010-1.8h14a.9.9 0 010 1.8zm.9 9.1a.9.9 0 00-.9-.9H3a.9.9 0 100 1.8h14a.9.9 0 00.9-.9zm0-5a.9.9 0 00-.9-.9h-7a.9.9 0 100 1.8h7a.9.9 0 00.9-.9z"></path>`,"0 0 20 20","align-right"),{svg:L}=a.a(),r=a.m(L`<path d="M8.1 4a.9.9 0 01.9-.9h7.999a.9.9 0 010 1.8h-8a.9.9 0 01-.9-.9zM17 15.1H9a.9.9 0 000 1.8h8a.9.9 0 000-1.8zm0-6H9a.9.9 0 000 1.8h8a.9.9 0 000-1.8zM3.18 4.12l.025-.012v3.026a.817.817 0 001.632 0v-4.58a.504.504 0 00-.712-.459l-1.537.702a.726.726 0 00-.094 1.266.723.723 0 00.688.055l-.001.001zm2.09 12.361l-.32.002a4.928 4.928 0 00-.937.091l-.024-.055a4.454 4.454 0 001.47-1.267l.039-.051a2.95 2.95 0 00.337-.622c.093-.232.14-.477.14-.726 0-.352-.09-.669-.267-.943a1.77 1.77 0 00-.723-.641 2.225 2.225 0 00-1.002-.221c-.432.013-.805.089-1.127.27-.32.181-.57.428-.736.727l-.03.056a.794.794 0 00.13.916c.247.259.615.319.963.156a.652.652 0 00.328-.365l.02-.048a.423.423 0 01.167-.179c.168-.101.436-.085.572.048a.383.383 0 01.114.296.644.644 0 01-.08.329c-.416.74-.962 1.252-1.445 1.705a8.287 8.287 0 00-.662.668.786.786 0 00-.107.843.815.815 0 00.744.481h2.434a.733.733 0 000-1.468l.002-.002z"></path>`,"0 0 20 20","list-numbered",!0),{svg:V}=a.a(),i=a.m(V`<path d="M5.83 7.435a4.11 4.11 0 01-.26-1.473 3.906 3.906 0 01.547-2.077A3.65 3.65 0 017.647 2.5a5.027 5.027 0 012.267-.489 4.888 4.888 0 012.837.8c.46.312.866.698 1.2 1.143a.79.79 0 01-.366 1.188 1.391 1.391 0 01-1.43-.457 3.435 3.435 0 00-.968-.674A3 3 0 008.7 4c-.37.171-.686.442-.912.782A2.132 2.132 0 007.441 6a2.299 2.299 0 00.454 1.441L5.83 7.435zM18 8.998H2a.9.9 0 100 1.799h8.4c.3.116.565.227.791.332.469.23.89.545 1.243.928a2.199 2.199 0 01.611 1.583c.005.478-.134.947-.4 1.345a2.74 2.74 0 01-1.068.938 3.243 3.243 0 01-2.9-.005 3.447 3.447 0 01-1.126-.928 4.062 4.062 0 01-.34-.5.951.951 0 10-1.632.975 5.666 5.666 0 002.344 2.043c.701.334 1.47.505 2.246.5a5.052 5.052 0 002.353-.562 4.48 4.48 0 001.743-1.578 4.136 4.136 0 00.653-2.288 3.628 3.628 0 00-.781-2.39 6.709 6.709 0 00-.351-.39h4.213a.902.902 0 000-1.802z"></path>`,"0 0 20 20","strikethrough"),{svg:n}=a.a();return{a:p,b:g,c:t,d:M,e,f:a.m(n`<path d="M8.215 9.992v.086l4.314 6.384a.958.958 0 01-1.247 1.377.955.955 0 01-.345-.318L6.992 11.5h-.086l-3.944 6.021a.955.955 0 01-1.755-.574.957.957 0 01.162-.485l4.314-6.384v-.086L1.388 3.549a.908.908 0 111.517-.997l4 6.174h.086l4-6.174a.909.909 0 111.517.997L8.215 9.992zm10.12-2.807h-1.109l-.54.022.68-.843c.27-.331.471-.593.62-.8.153-.218.28-.453.38-.7a2.11 2.11 0 00.155-.8 1.9 1.9 0 00-.29-1.042 1.965 1.965 0 00-.8-.7 2.4 2.4 0 00-1.14-.25 2.575 2.575 0 00-1.218.282c-.348.183-.637.46-.835.8a2.472 2.472 0 00-.238.712.693.693 0 00.15.578.8.8 0 00.616.281 1.08 1.08 0 00.943-.8.616.616 0 01.235-.253.687.687 0 01.342-.09.611.611 0 01.424.161.532.532 0 01.158.403.988.988 0 01-.1.43c-.079.169-.174.33-.284.48-.117.16-.274.365-.467.6-.119.148-.208.259-.265.334l-1.368 1.701A.622.622 0 0014.87 8.7h3.466a.758.758 0 000-1.515z"></path>`,"0 0 20 20","superscript"),g:c,l:r,s:i,t:m}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");SML.di("./B-zFJtiar6.js",import.meta.url,"B-zFJtiar6");
SML.dm("Bhqw9RZy0G",["Dw4vb8Yfbm","5r73EsgItq","B-zFJtiar6"],(async(n,t,e)=>{const i={plain:"plain",plainInverted:"plainInverted",error:"error",brand:"brand",caution:"caution",success:"success"};let a=class extends t.s{constructor(){super(...arguments),this.multiLine=!1,this.appearance="plain",this.shape="rounded",this.msg="",this.rafId=null,this.onTextContainerResize=(n,t)=>{this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame((()=>{if(!(this.actionButtons.length&&this.textContainer&&this.bannerText&&this.actionButtonContainer))return;const e=this.textContainer.getBoundingClientRect().width>this.bannerText.getBoundingClientRect().width+this.actionButtonContainer.getBoundingClientRect().width,i=2.5*t;for(const t of n){const n=t.contentRect.height>=i;this.multiLine&&e&&!n?this.multiLine=!1:!this.multiLine&&n&&(this.multiLine=!0)}}))}}static get styles(){return t.a`:host{display:block}.plain{background:var(--color-banner-plain);color:var(--color-banner-plain-text)}.plainInverted{background:var(--color-banner-plain-inverted);color:var(--color-banner-plain-inverted-text)}.error{background:var(--color-banner-error);color:var(--color-banner-error-text)}.success{background:var(--color-banner-success);color:var(--color-banner-success-text)}.brand{background:var(--color-banner-brand);color:var(--color-banner-brand-text)}.caution{background:var(--color-caution-background);color:var(--color-caution-onBackground)}.first-row{display:flex;justify-content:space-between;align-items:center;flex:1;height:var(--size-banner-height)}.first-row>.trailing-container{display:inline-flex;align-items:center}.first-row>.leading-container{display:inline-flex;align-items:center;flex:1}.icon-container,::slotted([slot=leadingIcon]),slot[name=leadingIcon]{display:inline-flex}.first-row .icon-container{padding-inline-end:var(--spacer-sm)}::slotted([slot=leadingIcon]),slot[name=leadingIcon]{align-items:center}#text-container{flex:1;max-height:${2.5};-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}#banner-text{padding-inline-end:var(--spacer-sm)}::slotted([slot=message]){display:inline}.banner{display:flex;padding-block:var(--spacer-2xs);padding-inline:var(--spacer-md) var(--spacer-xs);box-shadow:var(--elevation-xs)}.banner.multi-row{flex-direction:column;padding-top:var(--spacer-sm)}:host([shape=rounded]) .banner{border-radius:.75rem}.banner .second-row{margin:var(--spacer-sm) 0;justify-content:flex-end;display:flex}`}firstUpdated(){const n=parseFloat(getComputedStyle(document.documentElement).fontSize);this.resizeObserver=new ResizeObserver((t=>this.onTextContainerResize(t,n))),this.resizeObserver.observe(this.textContainer)}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver?.disconnect()}render(){return t.x`<div role="banner" class="${n.Z({banner:!0,"multi-row":this.multiLine,[i[this.appearance]]:this.appearance})}"> <span class="first-row"> <span class="leading-container"> <span class="icon-container"> <slot name="leadingIcon"></slot> </span> <span id="text-container"> <span id="banner-text"> <slot name="message">${this.msg}</slot> </span> </span> </span> <span class="trailing-container"> ${this.multiLine?"":t.x` <span id="action-button-container"> <slot name="actionButtons"></slot></span>`} <slot name="closeButton"></slot> </span> </span> ${this.multiLine?t.x` <div class="second-row"> <span id="action-button-container"> <slot name="actionButtons"></slot> </span> </div>`:void 0} </div>`}};return a.getCloseButton=e.bM,a.getActionButtons=e.bf,n._([n.h()],a.prototype,"multiLine",void 0),n._([n.n({type:String})],a.prototype,"appearance",void 0),n._([n.n({type:String})],a.prototype,"shape",void 0),n._([n.n({type:String})],a.prototype,"msg",void 0),n._([n.a2("#text-container")],a.prototype,"textContainer",void 0),n._([n.a2("#banner-text")],a.prototype,"bannerText",void 0),n._([n.a2("#action-button-container")],a.prototype,"actionButtonContainer",void 0),n._([n.l({slot:"actionButtons"})],a.prototype,"actionButtons",void 0),a=n._([n.e("faceplate-banner")],a),{get F(){return a}}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");
SML.dm("Bk33P4reb1",["Dw4vb8Yfbm"],(async a=>{const{svg:t}=a.a();return{d:a.m(t`<path d="M15.7 1H9.3A3.3 3.3 0 006 4.3V6H4.3A3.3 3.3 0 001 9.3v6.4A3.3 3.3 0 004.3 19h6.4a3.3 3.3 0 003.3-3.3V14h1.7a3.3 3.3 0 003.3-3.3V4.3A3.3 3.3 0 0015.7 1zm-3.5 14.7a1.5 1.5 0 01-1.5 1.5H4.3a1.5 1.5 0 01-1.5-1.5V9.3a1.5 1.5 0 011.5-1.5H6v2.9A3.3 3.3 0 009.3 14h2.9v1.7z"></path>`,"0 0 20 20","duplicate-fill")}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");
SML.dm("CEKPENoG25",["Dw4vb8Yfbm"],(async c=>{const{svg:l}=c.a();return{s:c.m(l`<path d="M18.1 9.1L4.54 1.6c-1.15-.63-2.48.44-2.1 1.7l1.44 4.77c.19.63.77 1.06 1.43 1.06H10v1.75H5.3c-.66 0-1.23.43-1.42 1.06l-1.45 4.77c-.38 1.25.95 2.33 2.1 1.7l13.57-7.48c.72-.4.72-1.43 0-1.83z"></path>`,"0 0 20 20","send-fill",!0)}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");SML.di("./CsrbxKoUKW.js",import.meta.url,"CsrbxKoUKW");SML.di("./tQR1yVDIYU.js",import.meta.url,"tQR1yVDIYU");SML.di("./CYyPrSfG5V.js",import.meta.url,"CYyPrSfG5V");SML.di("./BJ81pSwong.js",import.meta.url,"BJ81pSwong");SML.di("./7fhA7FmrLv.js",import.meta.url,"7fhA7FmrLv");SML.di("./Py4YQhl7Hl.js",import.meta.url,"Py4YQhl7Hl");SML.di("./DCfD6rLr03.js",import.meta.url,"DCfD6rLr03");SML.di("./Dm3xIDznQh.js",import.meta.url,"Dm3xIDznQh");SML.di("./CdmJSaSHd8.js",import.meta.url,"CdmJSaSHd8");SML.di("./TELHDd3mgM.js",import.meta.url,"TELHDd3mgM");SML.di("./BhZAdnVq89.js",import.meta.url,"BhZAdnVq89");SML.di("./DMGDObG7XA.js",import.meta.url,"DMGDObG7XA");SML.di("./BOhFIvFWxC.js",import.meta.url,"BOhFIvFWxC");SML.di("./DvtJ_U6Duj.js",import.meta.url,"DvtJ_U6Duj");SML.di("./CQMf561ZyA.js",import.meta.url,"CQMf561ZyA");SML.di("./B-zFJtiar6.js",import.meta.url,"B-zFJtiar6");SML.di("./jWC3N3n7Al.js",import.meta.url,"jWC3N3n7Al");SML.di("./CE5TLxi7Z3.js",import.meta.url,"CE5TLxi7Z3");
SML.dm("CP7i5b9l2n",["Dw4vb8Yfbm","5r73EsgItq","CsrbxKoUKW","tQR1yVDIYU","CYyPrSfG5V","BJ81pSwong","7fhA7FmrLv","Py4YQhl7Hl","DCfD6rLr03","Dm3xIDznQh","CdmJSaSHd8","TELHDd3mgM","B-zFJtiar6","jWC3N3n7Al","CE5TLxi7Z3","BhZAdnVq89","DMGDObG7XA","BOhFIvFWxC","DvtJ_U6Duj","CQMf561ZyA"],(async(e,t,a,i,n,o,s,r,l,u,d,m,p,h,c)=>{const{svg:g}=e.a(),v=e.m(g`<path d="M18.054 14c-1.474 2.961-4.522 5-8.053 5H.786a.784.784 0 01-.554-1.339l2.704-2.704A9.98 9.98 0 012.235 14H4.48l.889 1.069a36.981 36.981 0 01-2.328 2.087l.076.188a38.514 38.514 0 013.04-.144H10a7.2 7.2 0 005.983-3.2h2.07zM10 2.8A7.2 7.2 0 0115.983 6h2.07C16.58 3.039 13.533 1 10 1 6.468 1 3.42 3.039 1.947 6h2.07a7.198 7.198 0 015.984-3.2H10zm-5.852 9.044v.581h1.454v-4.85H4.148v.55h-.034a1.912 1.912 0 00-.676-.462 2.272 2.272 0 00-.87-.16 2.43 2.43 0 00-1.24.322 2.326 2.326 0 00-.875.895 2.6 2.6 0 00-.32 1.284c0 .471.105.898.315 1.278.21.38.499.677.867.892.368.215.776.322 1.225.322.32 0 .614-.056.879-.169.265-.113.493-.274.686-.485h.043v.002zm-.486-.835c-.202.175-.461.262-.775.262a1.34 1.34 0 01-.64-.155 1.195 1.195 0 01-.467-.442 1.251 1.251 0 01-.174-.66c0-.246.055-.467.164-.662.109-.196.26-.348.455-.458.194-.11.418-.164.662-.164.244 0 .46.055.647.164.187.11.333.262.435.455.102.193.154.412.154.656l.005 1.366h-.03l-.436-.362zm2.725-3.434v4.85h1.526V9.518c0-.267.07-.473.21-.617a.739.739 0 01.55-.216c.225 0 .397.071.516.214.119.143.178.346.178.611v2.916h1.507V9.51c0-.264.07-.468.209-.611a.746.746 0 01.556-.214c.218 0 .387.071.505.214.119.143.178.346.178.611v2.916h1.526V9.334c0-.31-.05-.601-.151-.874a1.453 1.453 0 00-.53-.683c-.251-.182-.588-.273-1.012-.273-.325 0-.625.057-.903.171-.278.114-.51.283-.696.505h-.024a1.302 1.302 0 00-.51-.505 1.553 1.553 0 00-.746-.171c-.594 0-1.065.23-1.415.689h-.024v-.617l-1.45-.001zm11.909 4.269v.581h1.454v-4.85h-1.454v.55h-.034a1.912 1.912 0 00-.676-.462 2.272 2.272 0 00-.87-.16 2.43 2.43 0 00-1.24.322 2.326 2.326 0 00-.875.895 2.6 2.6 0 00-.32 1.284c0 .471.105.898.315 1.278.21.38.499.677.867.892.368.215.776.322 1.225.322.32 0 .614-.056.879-.169.265-.113.493-.274.686-.485h.043v.002zm-.485-.835c-.202.175-.461.262-.775.262a1.34 1.34 0 01-.64-.155 1.188 1.188 0 01-.467-.442 1.251 1.251 0 01-.174-.66c0-.246.055-.467.164-.662.109-.196.26-.348.455-.458.194-.11.418-.164.662-.164.244 0 .46.055.647.164.187.11.333.262.435.455.102.193.154.412.154.656l.005 1.366h-.03l-.436-.362z"></path>`,"0 0 20 20","ama"),{svg:I}=e.a(),T=e.m(I`<path d="M15.1 9.1h-4.2V4.9c0-.5-.4-.9-.9-.9s-.9.4-.9.9v4.2H4.9c-.5 0-.9.4-.9.9s.4.9.9.9h4.2v4.2c0 .5.4.9.9.9s.9-.4.9-.9v-4.2h4.2c.5 0 .9-.4.9-.9s-.4-.9-.9-.9z"></path>`,"0 0 20 20","plus"),{svg:N}=e.a(),k=e.m(N`<path d="M10.46 6.9h7.08c.5 0 .9-.4.9-.9s-.4-.9-.9-.9h-7.08c-.5 0-.9.4-.9.9s.4.9.9.9zM17.54 13.1h-7.08c-.5 0-.9.4-.9.9s.4.9.9.9h7.08c.5 0 .9-.4.9-.9s-.4-.9-.9-.9zM5 10.85a3.15 3.15 0 100 6.3 3.15 3.15 0 000-6.3zm0 4.5c-.74 0-1.35-.61-1.35-1.35 0-.74.61-1.35 1.35-1.35.74 0 1.35.61 1.35 1.35 0 .74-.61 1.35-1.35 1.35zM5 2.85a3.15 3.15 0 100 6.3 3.15 3.15 0 000-6.3z"></path>`,"0 0 20 20","poll",!0),A="w-full font-sans border-none outline-none bg-neutral-background p-0 resize-none",R=["sticky flex flex-col","w-[360px] h-[700px]","border border-tone-4 border-solid rounded-8 bg-neutral-background","py-md my-0 mx-auto"].join(" ");class b extends t.s{constructor(){super(...arguments),this.subredditId="",this.supressValidation=!1,this.showPostTypes=!1,this.authorFlairId="",this.onOrAfterSubmit=!1,this.automationOutcomes=[],this.onFlairPickerChange=e=>{const{id:t="",source:a=""}=e?.detail??{};a===r.A.LIVE_PREVIEW&&(this.authorFlairId=t,this.validate())},this.eventsWithFlairUpdate=[r.a.CHANGE_FLAIR,r.a.SEND_FLAIR],this.validate=e.ao((async()=>{if(!this.supressValidation)try{this.automationOutcomes=await this.validateAutomationRules()}catch{const t=e.c("faceplate-alert",{level:e.a5.error,cause:"uncategorized",message:"Something went wrong with the live preview. Please try again later"});this.dispatchEvent(t)}}),150)}static get styles(){return[t.a`.live-preview-tooltip{font:var(--font-12-16-semibold);background-color:var(--color-tooltip-bg-inverted);color:var(--color-tooltip-text-inverted);border-radius:.25rem;box-shadow:var(--boxshadow-tooltip);padding:.5rem;max-width:170px;width:max-content}.live-preview-tooltip::after{display:block;content:'';width:8px;height:8px;position:absolute;background-color:var(--color-tooltip-bg-inverted);--max-arrow-x-travel-tooltip:calc(var(--tooltip-width, 2rem) - 1rem);--max-arrow-x-travel-target:calc(var(--target-width, 1rem) / 2);--max-arrow-x-distance:max(
            min(var(--max-arrow-x-travel-target), var(--max-arrow-x-travel-tooltip)),
            0.5rem
          );left:var(--max-arrow-x-distance);top:0;transform:translateY(-50%) rotate(45deg);box-shadow:-1px -1px 2px rgba(0,0,0,.05)}div.sticky{top:calc(var(--shreddit-header-height) + 24px)}@media only screen and (max-width:900px){div.sticky{position:unset;top:unset}}@media only screen and (max-width:420px){div.sticky{width:100%}}`,e.t]}connectedCallback(){super.connectedCallback(),this.eventsWithFlairUpdate.forEach((e=>{document.addEventListener(e,this.onFlairPickerChange)})),this.dispatchEvent(e.c(r.a.REQUEST_FLAIR,{detail:{source:r.A.LIVE_PREVIEW,id:this.authorFlairId}}))}disconnectedCallback(){super.disconnectedCallback(),this.eventsWithFlairUpdate.forEach((e=>{document.removeEventListener(e,this.onFlairPickerChange)}))}updated(e){super.updated(e),e.has("previewAutomationInput")&&this.validate()}get hasBlockingValidationResult(){return r.h(this.automationOutcomes)}getAutomationOutcomesByStringFeature(e){return this.automationOutcomes.reduce(((t,a)=>{const i=a.contentMessages?.filter((t=>t.stringFeature===e));return i?.length?[...t,{...a,contentMessages:[i[0]]}]:t}),[])}getAutomationOutcomesByFeature(e){return this.automationOutcomes.reduce(((t,a)=>{const i=a.contentMessages?.filter((t=>t.feature===e));return i?.length?[...t,{...a,contentMessages:[i[0]]}]:t}),[])}onSubmit(){this.validate(),this.onOrAfterSubmit=!0}render(){const a=this.getTitleText(),i=this.previewAutomationInput?{className:this.hasBlockingValidationResult?"":"disabled:bg-primary-background disabled:text-global-white",disabled:!0}:{onclick:this.onSubmit,disabled:this.hasBlockingValidationResult};return t.x`<div class="${R}"> <div class="flex flex-col px-md cursor-not-allowed"> <div class="flex items-center"> <div class="flex flex-1 items-center"> ${e.al({})}${a?t.x`<span data-testid="live-preview-title" class="block text-14 font-semibold ml-md">${a}<span></span></span>`:t.A} </div> ${e.o({appearance:"primary",children:this.getSubmitButtonText(),attributes:{"data-testid":"live-preview-submit-btn",...i}})} </div> ${this.renderHeader()} </div> <div class="flex-1 overflow-y-auto px-md"> <slot name="fake-flair-picker"></slot> ${this.renderInputFields()} </div> ${this.showPostTypes?this.renderTypeTabs():t.A} </div>`}}e._([e.n({type:String,attribute:"subreddit-id"})],b.prototype,"subredditId",void 0),e._([e.n({type:Object,attribute:"preview-automation-input"})],b.prototype,"previewAutomationInput",void 0),e._([e.n({type:Boolean,attribute:"suppress-validation"})],b.prototype,"supressValidation",void 0),e._([e.n({type:Boolean,attribute:"show-post-types"})],b.prototype,"showPostTypes",void 0),e._([e.h()],b.prototype,"authorFlairId",void 0),e._([e.h()],b.prototype,"onOrAfterSubmit",void 0),e._([e.h()],b.prototype,"automationOutcomes",void 0);const E=e=>t.x`<div class="relative mt-md"> <article class="live-preview-tooltip" appearance="inverted" position="bottom-start"> <span>${e}</span> </article> </div>`;let S=class extends t.s{constructor(){super(),this.automationOutcomes=[],this.hasFocus=!1,this.isPreview=!1,this.makeErrorsRed=!1,this.noMarginAfter=!1,this.isCommentComposer=!1,this.showAllRules=!1,this._toggleShowAllRules=()=>{this.showAllRules=!this.showAllRules},e.fl(this)}static get styles(){return[t.a`.postguidance-rule{border:1px solid var(--color-neutral-border-weak)}.postguidance-rule p{margin:0}.live-rule p{margin:0}`,e.t]}get visibleRuleIds(){const e=this.shadowRoot?.querySelectorAll("div[data-rule-id]");return e?Array.from(e).map((e=>e.dataset.ruleId??"")).filter(Boolean):[]}_getValidationMessageClass(e){const t=e&&this.makeErrorsRed?"text-alert-negative":"text-secondary-weak";return this.isPreview?"postguidance-rule text-neutral-content rounded-2 px-sm py-2xs mb-2xs":`live-rule text-12 pt-2xs ${t}`}_renderShowAllBtn(a){if(!(a>5))return t.A;const i=a-5,n="View less";return this.isPreview?e.o({size:e.q.Small,children:this.showAllRules?n:"View more",attributes:{className:"ml-auto",onclick:this._toggleShowAllRules}}):t.x`<faceplate-tracker source="${this.isCommentComposer?e.fm:e.fn}" action="click" noun="${this.showAllRules?"view_more_guidance":"view_less_guidance"}"> <button class="bg-transparent border-none px-0 cursor-pointer text-12 mb-2xs text-primary hover:underline" @click="${this._toggleShowAllRules}" aria-expanded="${this.showAllRules}"> ${this.showAllRules?n:`View ${i} more`} </button> </faceplate-tracker>`;}render(){const a=this.automationOutcomes.filter((e=>"AutomationBlockOutcome"===e.__typename));if(0===this.automationOutcomes.length||!this.hasFocus&&0===a.length)return t.A;const i=a.length>0,n=i?a:this.automationOutcomes,o=this.showAllRules?n:n.slice(0,5);return t.x`<div class="${this.noMarginAfter?"":"mb-sm"}"> ${o.map((a=>a.contentMessages?a.contentMessages.map((({message:n,rtjsonText:o})=>n?t.x` <div data-rule-id="${e.ad(a.automation?.id)}" class="${this._getValidationMessageClass(i)}"> ${c.c({richtext:JSON.parse(o||"")})} </div> `:t.A)):t.A))} ${this._renderShowAllBtn(n.length)} </div>`}};e._([e.n({type:Array,attribute:"automation-outcomes"})],S.prototype,"automationOutcomes",void 0),e._([e.n({type:Boolean,attribute:"has-focus"})],S.prototype,"hasFocus",void 0),e._([e.n({type:Boolean,attribute:"is-preview"})],S.prototype,"isPreview",void 0),e._([e.n({type:Boolean,attribute:"make-errors-red"})],S.prototype,"makeErrorsRed",void 0),e._([e.n({type:Boolean,attribute:"no-margin-after"})],S.prototype,"noMarginAfter",void 0),e._([e.n({type:Boolean,attribute:"is-comment-composer"})],S.prototype,"isCommentComposer",void 0),e._([e.h()],S.prototype,"showAllRules",void 0),S=e._([e.e("automation-rule-triggered-rules")],S);let f=class extends(h.T()){constructor(){super(...arguments),this.inputClassName="",this.placeholder="",this.automationOutcomes=[],this.singleLine=!1,this.clearable=!1,this.value="",this.inputRef=e.a3()}static get styles(){return[e.t]}onInput(e){const t=e.target;var a;this.value=t.value,!this.singleLine&&t instanceof HTMLTextAreaElement&&((a=t).style.height="0px",a.style.height=`${a.scrollHeight}px`),this.dispatchEvent(new Event("change"))}onClear(e){e.preventDefault(),e.stopPropagation(),this.value="",this.dispatchEvent(new Event("change")),this.inputRef.value?.focus()}render(){const a=this.singleLine?t.x`<input ${e.a4(this.inputRef)} type="text" class="${this.inputClassName}" placeholder="${this.placeholder}" .value="${this.value||""}" @input="${this.onInput}">`:t.x`<textarea ${e.a4(this.inputRef)} rows="1" class="${this.inputClassName}" placeholder="${this.placeholder}" .value="${this.value||""}" @input="${this.onInput}"></textarea>`;return t.x`<div class="flex items-center justify-between"> ${a} ${this.clearable?e.o({appearance:"secondary",leadingIcon:e.al({size:t.I.Small}),size:e.q.Small,attributes:{"aria-label":"Close",tabindex:"0",onclick:this.onClear}}):t.A} </div> ${this.automationOutcomes.length?t.x`<automation-rule-triggered-rules .automationOutcomes="${this.automationOutcomes}" has-focus is-preview></automation-rule-triggered-rules>`:t.A}`;}};e._([e.n({type:String,attribute:"input-class-name"})],f.prototype,"inputClassName",void 0),e._([e.n({type:String})],f.prototype,"placeholder",void 0),e._([e.n({type:Array,attribute:"automation-outcomes"})],f.prototype,"automationOutcomes",void 0),e._([e.n({type:Boolean,attribute:"single-line"})],f.prototype,"singleLine",void 0),e._([e.n({type:Boolean})],f.prototype,"clearable",void 0),e._([e.h()],f.prototype,"value",void 0),f=e._([e.e("live-preview-text-input")],f);let y=class extends b{constructor(){super(...arguments),this.subredditIcon="",this.subredditName="",this.postTypes=[e.dz.Text],this.selectedPostType=e.dz.Text,this.postTypeDetails={[e.dz.Text]:{label:()=>"Text",icon:()=>t.x`${d.t({size:t.I.Medium})}`,panel:()=>t.x``},[e.dz.Link]:{label:()=>"Link",icon:()=>t.x`${u.l({size:t.I.Medium})}`,panel:()=>t.x` <live-preview-text-input name="post-url-input" input-class-name="${A} text-16 mt-md mb-sm" placeholder="${"Enter link"}" automation-outcomes="${JSON.stringify(this.automationOutcomesForPostUrl)}" single-line @change="${this.onPostTitleOrBodyOrUrlChange}" clearable></live-preview-text-input> `},[e.dz.Image]:{label:()=>"Image",icon:()=>t.x`${l.i({size:t.I.Medium})}`,panel:()=>t.x`<div class="relative"> <img src="${`${CLIENT_CONFIG.STATIC_BASE_URL}assets/mod/tawny_frog_mouth_2x.jpg`}" alt="snoo thinking" class="w-full h-auto"> ${e.o({appearance:"media",leadingIcon:t.x`${e.al({size:t.I.Small})}`,attributes:{className:"absolute top-sm end-sm"},size:e.q.Small})} </div>`},[e.dz.Gallery]:{label:()=>"Gallery",icon:()=>t.x`${r.g({size:t.I.Medium})}`,panel:()=>t.x` <div class="relative"> <img src="${`${CLIENT_CONFIG.STATIC_BASE_URL}assets/mod/tawny_frog_mouth_2x.jpg`}" alt="snoo thinking" class="w-full h-auto"> ${e.o({appearance:"media",leadingIcon:t.x`${e.al({size:t.I.Small})}`,attributes:{className:"absolute top-sm end-sm"},size:e.q.Small})} <faceplate-pagination-indicator pages="3" page-index="0" appearance="media" class="absolute bottom-sm left-1/2 -translate-x-1/2"></faceplate-pagination-indicator> </div> `},[e.dz.Video]:{label:()=>"Video",icon:()=>t.x`${m.v({size:t.I.Medium})}`,panel:()=>t.x`<div class="relative rounded-lg overflow-hidden"> <img src="${`${CLIENT_CONFIG.STATIC_BASE_URL}assets/mod/tawny_frog_mouth_2x.jpg`}" alt="snoo thinking" class="w-full h-auto"> ${e.o({appearance:"media",leadingIcon:t.x`${e.al({size:t.I.Small})}`,attributes:{className:"absolute top-sm end-sm"},size:e.q.Small})} ${e.o({appearance:"media",leadingIcon:t.x`${n.p({size:t.I.Small})}`,attributes:{className:"absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2"},size:e.q.Small})} </div>`},[e.dz.Poll]:{label:()=>"Poll",icon:()=>t.x`${k({size:t.I.Medium})}`,panel:()=>t.x` <div class="relative border border-solid border-neutral-border rounded-md p-sm gap-sm flex flex-col items-start"> ${e.o({appearance:"secondary",size:e.q.Small,children:"Poll ends in 2 days",attributes:{disabled:!0},trailingIcon:t.x`${a.c({size:t.I.Small})}`})} <faceplate-text-input placeholder="${"Option 1"}" disabled="disabled" class="w-full"></faceplate-text-input> <faceplate-text-input placeholder="${"Option 2"}" disabled="disabled" class="w-full"></faceplate-text-input> ${e.o({appearance:"secondary",leadingIcon:t.x`${T({size:t.I.Small})}`,size:e.q.Small,children:"Add poll option",attributes:{disabled:!0}})} ${e.o({appearance:"secondary",leadingIcon:t.x`${e.al({size:t.I.Small})}`,attributes:{className:"absolute top-sm end-sm"},size:e.q.Small})} </div>`},[e.dz.Ama]:{label:()=>"AMA",icon:()=>t.x`${v({size:t.I.Medium})}`,panel:()=>t.x`<div class="relative border border-solid border-neutral-border rounded-[24px] p-sm gap-sm flex flex-col items-start"> <h3 class="text-16 font-bold m-0 my-sm"> ${"AMA"} </h3> ${a.d({children:t.x`<div class="flex flex-col items-start"> <span class="text-12 text-neutral-content-weak"> ${"Start date"} </span> <span class="text-16 mt-2xs"> ${"Start now"} </span> </div>`,attributes:{disabled:!0,id:"select",className:"w-full h-fit pt-[10px] pb-[6px] px-md justify-between rounded-md"}})} <div class="w-auto p-md h-[200px] bg-secondary-background rounded-md gap-sm flex flex-col items-center justify-center cursor-not-allowed"> ${l.i({size:t.I.Medium})} <h3 class="text-16 font-bold m-0"> ${"Add a selfie"} </h3> <p class="text-14 text-neutral-content-weak m-0 text-center"> ${"Most guests add a selfie with a note containing the community name, their name, date, and time"} </p> </div> ${e.o({appearance:"secondary",leadingIcon:t.x`${e.al({size:t.I.Small})}`,attributes:{className:"absolute top-sm end-sm"},size:e.q.Small})} </div>`},[e.dz.Crosspost]:{label:()=>"Crosspost",icon:()=>t.x`${s.c({size:t.I.Medium})}`,panel:()=>t.x`<div class="relative border border-solid border-neutral-border rounded-md p-sm"> <div class="flex gap-2xs mb-2xs"> ${o.c({size:t.I.Small})} <span class="text-12 text-neutral-content-weak"> ${"r/reddit · 4h · u/test-user"} </span> </div> <p class="text-14 m-0 font-semibold text-neutral-content-strong"> ${"Test out your automations in our live previewer!"} </p> </div>`}}}connectedCallback(){super.connectedCallback(),this.postTypes.length>0&&(this.selectedPostType=this.postTypes[0])}get postTitle(){return this.shadowRoot?.querySelector('live-preview-text-input[name="post-title-text-input"]')?.value??""}get postBody(){return this.shadowRoot?.querySelector('live-preview-text-input[name="post-body-text-input"]')?.value??""}get postUrl(){return this.shadowRoot?.querySelector('live-preview-text-input[name="post-url-input"]')?.value??""}get automationOutcomesForPostTitle(){return this.supressValidation?[]:[...this.getAutomationOutcomesByFeature(e.dD.Title),...this.getAutomationOutcomesByStringFeature(e.dA.UserFlairTemplateId)]}get automationOutcomesForPostBody(){return this.supressValidation?[]:this.getAutomationOutcomesByStringFeature(e.dA.PostBody)}get automationOutcomesForPostUrl(){return this.supressValidation?[]:this.getAutomationOutcomesByFeature(e.dD.Url)}getTitleText(){return""}getSubmitButtonText(){return "Next";}async validateAutomationRules(){if(this.previewAutomationInput){const t=await async function(t,a){const i={subredditId:t,input:a};try{const{errors:t,data:a}=await e.Y({operation:e.O.PreviewPostAutomation,variables:i});if(t.length>0||!a?.subredditInfoById||!("previewPostAutomation"in a.subredditInfoById))throw new Error;return a.subredditInfoById.previewPostAutomation}catch(e){throw new Error("Something went wrong with preview post automation. Please try again later")}}(this.subredditId,{postTitle:this.postTitle,postBody:this.postBody,postType:this.selectedPostType,...(this.postUrl ? {link:{url:this.postUrl}} : {}),...(this.authorFlairId ? {authorFlair:{templateId:this.authorFlairId}} : {}),previewAutomation:this.previewAutomationInput});if(!t?.ok)throw new Error("Failed to receive successful response from previewPostAutomation GQL query");return t.result?.outcomes??[]}{const t=await async function(t,a){const i={subredditId:t,input:a},{errors:n,data:o}=await e.Y({operation:e.O.ModeratorEvaluatePostAutomations,variables:i});if(n.length>0||!o.subredditInfoById||!("moderatorEvaluatePostAutomations"in o.subredditInfoById)||!o.subredditInfoById.moderatorEvaluatePostAutomations.ok)throw new Error("Received invalid data from moderatorEvaluatePostAutomations GQL query");return o.subredditInfoById.moderatorEvaluatePostAutomations}(this.subredditId,{postTitle:this.postTitle,postBody:this.postBody,...(this.authorFlairId ? {authorFlair:{templateId:this.authorFlairId}} : {}),postType:this.selectedPostType,...(this.postUrl ? {link:{url:this.postUrl}} : {}),onOrAfterSubmit:this.onOrAfterSubmit});if(!t?.ok)throw new Error("Failed to receive successful response from moderatorEvaluatePostAutomations GQL query");return t.result?.outcomes??[]}}onPostTitleOrBodyOrUrlChange(){this.requestUpdate(),this.validate()}renderHeader(){return t.x` <div class="flex items-center mt-lg mb-sm"> <div class="flex flex-1 items-center"> ${(e=this.subredditIcon, p.f({children:e?t.x`<img width="32" height="32" src="${e}" alt="subreddit icon">`:t.x`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="var(--color-primary)"> <path d="M16.5,2.924,11.264,15.551H9.91L15.461,2.139h.074a9.721,9.721,0,1,0,.967.785ZM8.475,8.435a1.635,1.635,0,0,0-.233.868v4.2H6.629V6.2H8.174v.93h.041a2.927,2.927,0,0,1,1.008-.745,3.384,3.384,0,0,1,1.453-.294,3.244,3.244,0,0,1,.7.068,1.931,1.931,0,0,1,.458.151l-.656,1.558a2.174,2.174,0,0,0-1.067-.246,2.159,2.159,0,0,0-.981.215A1.59,1.59,0,0,0,8.475,8.435Z"/> </svg>`,appearance:"icon",size:"sm"}))} <span class="px-xs text-14">r/${this.subredditName||""}</span> ${a.c({size:t.I.Small})} </div> <span class="text-12 text-neutral-content-weak">${"RULES"}</span> </div> ${t.x`<div class="w-100 border-b-[1px] border-tone-4 border-solid"></div>`} `;var e}renderTypeTabPanels(){return t.x` <faceplate-tabpanel id="post-type-tabs" class="text-14 mb-sm" pages="${Object.keys(this.postTypeDetails).length+1}" pageindex="1"> ${this.postTypes.map(((e,a)=>t.x`<div slot="page-${a+1}"> ${this.postTypeDetails[e]?.panel()} </div>`))} </faceplate-tabpanel> `}renderTypeTabs(){return this.postTypes.length<2?t.x``:t.x` <div class="px-md"> <faceplate-tabgroup for="post-type-tabs"> ${this.postTypes.map(((e,t)=>{const a=this.postTypeDetails[e],n=a?.icon();return i.t({size:i.T.Small,appearance:i.a.Pill,selected:e===this.selectedPostType,attributes:{type:"tab",slot:`page-${t+1}`,href:`#page-${t+1}`,onclick:()=>{this.selectedPostType=e,this.validate()}},leadingIcon:n})}))} </faceplate-tabgroup> </div> `}renderInputFields(){const e=0===this.postBody.length&&0===this.postTitle.length&&0===this.postUrl.length&&!this.onOrAfterSubmit,a="Test out your new rule by entering a title or body text.";return t.x` <live-preview-text-input name="post-title-text-input" input-class-name="${A} text-18 font-bold mt-md mb-sm" placeholder="${"Add title text"}" automation-outcomes="${JSON.stringify(this.automationOutcomesForPostTitle)}" @change="${this.onPostTitleOrBodyOrUrlChange}"></live-preview-text-input> ${this.showPostTypes?this.renderTypeTabPanels():t.A} <live-preview-text-input name="post-body-text-input" input-class-name="${A} text-14" placeholder="${"Add body text"}" automation-outcomes="${JSON.stringify(this.automationOutcomesForPostBody)}" @change="${this.onPostTitleOrBodyOrUrlChange}"></live-preview-text-input>${e?E(a):t.A}`;}};e._([e.n({type:String,attribute:"subreddit-icon"})],y.prototype,"subredditIcon",void 0),e._([e.n({type:String,attribute:"subreddit-name"})],y.prototype,"subredditName",void 0),e._([e.n({type:Array,attribute:"post-types"})],y.prototype,"postTypes",void 0),e._([e.h()],y.prototype,"selectedPostType",void 0),y=e._([e.e("post-live-preview")],y);let P=class extends b{get commentBody(){return this.shadowRoot?.querySelector('live-preview-text-input[name="comment-body-text-input"]')?.value??""}get automationOutcomesForComment(){return this.supressValidation?[]:[...this.getAutomationOutcomesByStringFeature(e.dA.CommentBody),...this.getAutomationOutcomesByStringFeature(e.dA.UserFlairTemplateId)]}getTitleText(){return "Add comment";}renderTypeTabs(){return""}getSubmitButtonText(){return "Add";}async validateAutomationRules(){const t=this.previewAutomationInput?await async function(t,a){const i={subredditId:t,input:a},{errors:n,data:o}=await e.Y({operation:e.O.PreviewCommentAutomation,variables:i});if(n.length>0||!o.subredditInfoById||!("previewCommentAutomation"in o.subredditInfoById)||!o.subredditInfoById.previewCommentAutomation.ok)throw new Error("Received invalid data from previewCommentAutomation GQL query");return o.subredditInfoById.previewCommentAutomation}(this.subredditId,{commentBody:this.commentBody,...(this.authorFlairId ? {authorFlair:{templateId:this.authorFlairId}} : {}),previewAutomation:this.previewAutomationInput}):await async function(t,a){const i={subredditId:t,input:a},{errors:n,data:o}=await e.Y({operation:e.O.ModeratorEvaluateCommentAutomations,variables:i});if(n.length>0||!o.subredditInfoById||!("moderatorEvaluateCommentAutomations"in o.subredditInfoById)||!o.subredditInfoById.moderatorEvaluateCommentAutomations.ok)throw new Error("Received invalid data from moderatorEvaluateCommentAutomations GQL query");return o.subredditInfoById.moderatorEvaluateCommentAutomations}(this.subredditId,{commentBody:this.commentBody,...(this.authorFlairId ? {authorFlair:{templateId:this.authorFlairId}} : {}),onOrAfterSubmit:this.onOrAfterSubmit});return t.result?.outcomes??[]}onCommentBodyChange(){this.requestUpdate(),this.validate()}renderHeader(){return t.x` <span class="text-12 py-lg">${"Some post that you're commenting on."}</span>`;}renderInputFields(){const e=0===this.commentBody.length&&!this.onOrAfterSubmit,a="Test out your new rule by entering a comment text.";return t.x`<live-preview-text-input name="comment-body-text-input" input-class-name="${A} text-14 mt-md" placeholder="${"Add comment text"}" automation-outcomes="${JSON.stringify(this.automationOutcomesForComment)}" @change="${this.onCommentBodyChange}"></live-preview-text-input>${e?E(a):t.A}`;}};P=e._([e.e("comment-live-preview")],P);let O=class extends t.s{constructor(){super(),this.subredditIcon="",this.subredditName="",this.subredditId="",this.flairPickerId="",this.automationTrigger=e.dy.Post,this.suppressValidation=!1,this.postTypes=[],this.showPostTypes=!1,this.livePreviewRef=e.a3(),e.fl(this)}static get styles(){return[e.t]}renderPreviewer(){switch(this.automationTrigger){case e.dy.Post:return t.x`<post-live-preview ${e.a4(this.livePreviewRef)} ?show-post-types="${this.showPostTypes}" post-types="${e.ad(this.postTypes.length>0?JSON.stringify(this.postTypes):void 0)}" subreddit-name="${this.subredditName}" subreddit-icon="${this.subredditIcon}" subreddit-id="${this.subredditId}" preview-automation-input="${JSON.stringify(this.previewAutomationInput)}" ?suppress-validation="${this.suppressValidation}"> </post-live-preview>`;case e.dy.Comment:return t.x`<comment-live-preview ${e.a4(this.livePreviewRef)} subreddit-id="${this.subredditId}" preview-automation-input="${JSON.stringify(this.previewAutomationInput)}" ?suppress-validation="${this.suppressValidation}"> </comment-live-preview>`}}render(){return t.x`<div class="mb-md"> <slot name="fake-flair-picker" slot="fake-flair-picker"></slot> </div> ${this.renderPreviewer()} `}};e._([e.n({type:String,attribute:"subreddit-icon"})],O.prototype,"subredditIcon",void 0),e._([e.n({type:String,attribute:"subreddit-name"})],O.prototype,"subredditName",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],O.prototype,"subredditId",void 0),e._([e.n({type:String,attribute:"flair-picker-id"})],O.prototype,"flairPickerId",void 0),e._([e.n({type:String,attribute:"automation-trigger"})],O.prototype,"automationTrigger",void 0),e._([e.n({type:Object,attribute:"preview-automation-input"})],O.prototype,"previewAutomationInput",void 0),e._([e.n({type:Boolean,attribute:"suppress-validation"})],O.prototype,"suppressValidation",void 0),e._([e.n({type:Array,attribute:"post-types"})],O.prototype,"postTypes",void 0),e._([e.n({type:Boolean,attribute:"show-post-types"})],O.prototype,"showPostTypes",void 0),O=e._([e.e("automation-rule-live-preview")],O)}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");
SML.dm("CYyPrSfG5V",["Dw4vb8Yfbm"],(async c=>{const{svg:a}=c.a();return{p:c.m(a`<path d="M6.35 3.3c.26 0 .51.08.74.22l8.32 5.3c.58.37.65.95.65 1.18 0 .23-.06.81-.65 1.18l-8.32 5.3c-.23.15-.48.22-.74.22-.67 0-1.4-.54-1.4-1.4V4.7c0-.87.73-1.4 1.4-1.4zm0-1.8c-1.66 0-3.2 1.32-3.2 3.2v10.6c0 1.87 1.54 3.2 3.2 3.2.57 0 1.16-.16 1.7-.5l8.32-5.3c1.97-1.25 1.97-4.13 0-5.39L8.05 2c-.54-.35-1.13-.5-1.7-.5z"></path>`,"0 0 20 20","play")}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");
SML.dm("CiWOfYD0Yp",["Dw4vb8Yfbm"],(async t=>{let e;const n=new Uint8Array(16);function r(){if(!e&&(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(n)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const a=[];for(let t=0;t<256;++t)a.push((t+256).toString(16).slice(1));function c(t,e=0){return(a[t[e+0]]+a[t[e+1]]+a[t[e+2]]+a[t[e+3]]+"-"+a[t[e+4]]+a[t[e+5]]+"-"+a[t[e+6]]+a[t[e+7]]+"-"+a[t[e+8]]+a[t[e+9]]+"-"+a[t[e+10]]+a[t[e+11]]+a[t[e+12]]+a[t[e+13]]+a[t[e+14]]+a[t[e+15]]).toLowerCase()}function s(t){if(!function(t){return"string"==typeof t&&o.test(t)}(t))throw TypeError("Invalid UUID");let e;const n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n}function l(t,e,n){function r(t,r,o,a){var l;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof r&&(r=s(r)),16!==(null===(l=r)||void 0===l?void 0:l.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let i=new Uint8Array(16+t.length);if(i.set(r),i.set(t,r.length),i=n(i),i[6]=15&i[6]|e,i[8]=63&i[8]|128,o){a=a||0;for(let t=0;t<16;++t)o[a+t]=i[t];return o}return c(i)}try{r.name=t}catch(t){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function i(t){return 14+(t+64>>>9<<4)+1}function u(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function f(t,e,n,r,o,a){return u((c=u(u(e,t),u(r,a)))<<(s=o)|c>>>32-s,n);var c,s}function d(t,e,n,r,o,a,c){return f(e&n|~e&r,t,e,o,a,c)}function g(t,e,n,r,o,a,c){return f(e&r|n&~r,t,e,o,a,c)}function p(t,e,n,r,o,a,c){return f(e^n^r,t,e,o,a,c)}function h(t,e,n,r,o,a,c){return f(n^(e|~r),t,e,o,a,c)}l("v3",48,(function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){const e=[],n=32*t.length,r="0123456789abcdef";for(let o=0;o<n;o+=8){const n=t[o>>5]>>>o%32&255,a=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);e.push(a)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[i(e)-1]=e;let n=1732584193,r=-271733879,o=-1732584194,a=271733878;for(let e=0;e<t.length;e+=16){const c=n,s=r,l=o,i=a;n=d(n,r,o,a,t[e],7,-680876936),a=d(a,n,r,o,t[e+1],12,-389564586),o=d(o,a,n,r,t[e+2],17,606105819),r=d(r,o,a,n,t[e+3],22,-1044525330),n=d(n,r,o,a,t[e+4],7,-176418897),a=d(a,n,r,o,t[e+5],12,1200080426),o=d(o,a,n,r,t[e+6],17,-1473231341),r=d(r,o,a,n,t[e+7],22,-45705983),n=d(n,r,o,a,t[e+8],7,1770035416),a=d(a,n,r,o,t[e+9],12,-1958414417),o=d(o,a,n,r,t[e+10],17,-42063),r=d(r,o,a,n,t[e+11],22,-1990404162),n=d(n,r,o,a,t[e+12],7,1804603682),a=d(a,n,r,o,t[e+13],12,-40341101),o=d(o,a,n,r,t[e+14],17,-1502002290),r=d(r,o,a,n,t[e+15],22,1236535329),n=g(n,r,o,a,t[e+1],5,-165796510),a=g(a,n,r,o,t[e+6],9,-1069501632),o=g(o,a,n,r,t[e+11],14,643717713),r=g(r,o,a,n,t[e],20,-373897302),n=g(n,r,o,a,t[e+5],5,-701558691),a=g(a,n,r,o,t[e+10],9,38016083),o=g(o,a,n,r,t[e+15],14,-660478335),r=g(r,o,a,n,t[e+4],20,-405537848),n=g(n,r,o,a,t[e+9],5,568446438),a=g(a,n,r,o,t[e+14],9,-1019803690),o=g(o,a,n,r,t[e+3],14,-187363961),r=g(r,o,a,n,t[e+8],20,1163531501),n=g(n,r,o,a,t[e+13],5,-1444681467),a=g(a,n,r,o,t[e+2],9,-51403784),o=g(o,a,n,r,t[e+7],14,1735328473),r=g(r,o,a,n,t[e+12],20,-1926607734),n=p(n,r,o,a,t[e+5],4,-378558),a=p(a,n,r,o,t[e+8],11,-2022574463),o=p(o,a,n,r,t[e+11],16,1839030562),r=p(r,o,a,n,t[e+14],23,-35309556),n=p(n,r,o,a,t[e+1],4,-1530992060),a=p(a,n,r,o,t[e+4],11,1272893353),o=p(o,a,n,r,t[e+7],16,-155497632),r=p(r,o,a,n,t[e+10],23,-1094730640),n=p(n,r,o,a,t[e+13],4,681279174),a=p(a,n,r,o,t[e],11,-358537222),o=p(o,a,n,r,t[e+3],16,-722521979),r=p(r,o,a,n,t[e+6],23,76029189),n=p(n,r,o,a,t[e+9],4,-640364487),a=p(a,n,r,o,t[e+12],11,-421815835),o=p(o,a,n,r,t[e+15],16,530742520),r=p(r,o,a,n,t[e+2],23,-995338651),n=h(n,r,o,a,t[e],6,-198630844),a=h(a,n,r,o,t[e+7],10,1126891415),o=h(o,a,n,r,t[e+14],15,-1416354905),r=h(r,o,a,n,t[e+5],21,-57434055),n=h(n,r,o,a,t[e+12],6,1700485571),a=h(a,n,r,o,t[e+3],10,-1894986606),o=h(o,a,n,r,t[e+10],15,-1051523),r=h(r,o,a,n,t[e+1],21,-2054922799),n=h(n,r,o,a,t[e+8],6,1873313359),a=h(a,n,r,o,t[e+15],10,-30611744),o=h(o,a,n,r,t[e+6],15,-1560198380),r=h(r,o,a,n,t[e+13],21,1309151649),n=h(n,r,o,a,t[e+4],6,-145523070),a=h(a,n,r,o,t[e+11],10,-1120210379),o=h(o,a,n,r,t[e+2],15,718787259),r=h(r,o,a,n,t[e+9],21,-343485551),n=u(n,c),r=u(r,s),o=u(o,l),a=u(a,i)}return[n,r,o,a]}(function(t){if(0===t.length)return[];const e=8*t.length,n=new Uint32Array(i(e));for(let r=0;r<e;r+=8)n[r>>5]|=(255&t[r/8])<<r%32;return n}(t),8*t.length))}));var y={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function m(t,e,n){if(y.randomUUID&&!t)return y.randomUUID();const o=(t=t||{}).random||(t.rng||r)();return o[6]=15&o[6]|64,o[8]=63&o[8]|128,c(o)}function I(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:case 3:return e^n^r;case 2:return e&n^e&r^n&r}}function S(t,e){return t<<e|t>>>32-e}l("v5",80,(function(t){const e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const r=t.length/4+2,o=Math.ceil(r/16),a=new Array(o);for(let e=0;e<o;++e){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=t[64*e+4*r]<<24|t[64*e+4*r+1]<<16|t[64*e+4*r+2]<<8|t[64*e+4*r+3];a[e]=n}a[o-1][14]=8*(t.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<o;++t){const r=new Uint32Array(80);for(let e=0;e<16;++e)r[e]=a[t][e];for(let t=16;t<80;++t)r[t]=S(r[t-3]^r[t-8]^r[t-14]^r[t-16],1);let o=n[0],c=n[1],s=n[2],l=n[3],i=n[4];for(let t=0;t<80;++t){const n=Math.floor(t/20),a=S(o,5)+I(n,c,s,l)+i+e[n]+r[t]>>>0;i=l,l=s,s=S(c,30)>>>0,c=o,o=a}n[0]=n[0]+o>>>0,n[1]=n[1]+c>>>0,n[2]=n[2]+s>>>0,n[3]=n[3]+l>>>0,n[4]=n[4]+i>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}));const U=(t,e)=>t.replace(e,"USER_ID"),w=(t,e,n)=>{window.Sentry?.withScope((r=>{r.setExtras({storageKey:U(t,n),valueSizeBytes:e.length}),((t,e)=>{try{const n=JSON.stringify(localStorage).length,r=Object.keys(localStorage),o=r.map((t=>({key:U(t,e),size:localStorage.getItem(t)?.length||0})));t.setExtras({"localStorageUsage.totalSize":n,"localStorageUsage.keyCount":r.length,"localStorageUsage.keySizes":o})}catch{}})(r,n),((t,e)=>{try{const n=b(e),r=n.map((t=>({size:JSON.stringify(t).length,contentLength:t.content?.length||0})));t.setExtras({"draftStorageInfo.draftCount":n.length,"draftStorageInfo.totalDraftSize":JSON.stringify(n).length,"draftStorageInfo.draftSizes":r})}catch{}})(r,n),window.Sentry?.captureMessage("localStorage quota exceeded while saving comment draft","warning")}))},A=({key:e,value:n,userId:r})=>{try{t.a8.setItem(e,n)}catch{w(e,n,r)}},v=e=>`${t.cT}${e}`,D=(t,e)=>t.filter((t=>!((t,e)=>Date.now()-t>864e5*e)(t.lastUpdatedTime,e))),b=e=>{const n=v(e);return(t=>{try{return JSON.parse(t||"")}catch{return null}})(t.a8.getItem(n))??[]};return{a:(t,e)=>b(t).find((t=>t.id===e))??null,b:(t,{postId:e,parentCommentId:n})=>b(t).find((t=>n?t.postId===e&&t.parentCommentId===n:t.postId===e&&!t.parentCommentId))??null,c:(t,e,n)=>{const r=m(),o=v(t);let a=b(t);20===a.length&&(a.sort(((t,e)=>e.lastUpdatedTime-t.lastUpdatedTime)),a.splice(-1),n?.());const c=D(a,14);return c.length<a.length&&(a=c,n?.()),a.push({...e,id:r,lastUpdatedTime:Date.now()}),A({key:o,value:JSON.stringify(a),userId:t}),r},d:(t,e)=>{const n=v(t),r=b(t).filter((t=>t.id!==e));A({key:n,value:JSON.stringify(r),userId:t})},g:b,h:t=>0!==b(t).length,u:(t,e,n)=>{const r=v(t),o=b(t).map((t=>t.id===e?{...t,...n,lastUpdatedTime:Date.now()}:t));A({key:r,value:JSON.stringify(o),userId:t})}}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");
SML.dm("Cm2L3DO-TZ",["Dw4vb8Yfbm"],(async r=>{const{svg:a}=r.a();return{e:r.m(a`<path d="M10 1c-4.962 0-9 4.037-9 9s4.038 9 9 9 9-4.037 9-9-4.038-9-9-9zm1 4.24l-.242 6H9.241l-.242-6H11zm-1 9.47a1.21 1.21 0 110-2.42 1.21 1.21 0 010 2.42z"></path>`,"0 0 20 20","error-fill")}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");
SML.dm("CsjEhRpT29",["Dw4vb8Yfbm"],(async a=>{const{svg:l}=a.a();return{u:a.m(l`<path d="M18.56 14.355L5.394 1.189a.898.898 0 00-1.272 0 .898.898 0 000 1.272L6.67 5.01c-.18.03-.362.053-.54.1a6.26 6.26 0 00-2.798 1.605.898.898 0 00-.002 1.275l3.724 3.723L2.1 16.668a.898.898 0 00.636 1.536c.23 0 .46-.088.636-.264l4.955-4.955 3.644 3.644a.897.897 0 001.273-.001 6.264 6.264 0 001.608-2.792c.048-.179.07-.362.102-.543l2.334 2.334a.897.897 0 001.272 0 .898.898 0 000-1.272zm-5.446-.984a4.445 4.445 0 01-.575 1.284l-7.232-7.23c.395-.258.83-.452 1.287-.574a4.46 4.46 0 011.825-.092l4.79 4.791a4.458 4.458 0 01-.095 1.821zM11.57 4.806l-1.273-1.273.49-.49a4.198 4.198 0 012.987-1.238c1.128 0 2.188.44 2.986 1.236l.167.167a4.194 4.194 0 011.237 2.986 4.197 4.197 0 01-1.236 2.986l-.492.491-1.273-1.273.492-.49a2.408 2.408 0 00.709-1.714c0-.647-.252-1.256-.71-1.714l-.167-.167c-.916-.915-2.512-.916-3.428 0l-.49.491v.002z"></path>`,"0 0 20 20","unpin")}}));
SML.dm("Csx3BNLuth",[],(async()=>{class e extends HTMLElement{connectedCallback(){this.videoId=this.getAttribute("videoid");let t=this.querySelector(".lty-playbtn");if(this.playLabel=t&&t.textContent.trim()||this.getAttribute("playlabel")||"Play",this.dataset.title=this.getAttribute("title")||"",this.style.backgroundImage||(this.style.backgroundImage=`url("https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg")`,this.upgradePosterImage()),t||(t=document.createElement("button"),t.type="button",t.classList.add("lty-playbtn"),this.append(t)),!t.textContent){const e=document.createElement("span");e.className="lyt-visually-hidden",e.textContent=this.playLabel,t.append(e)}this.addNoscriptIframe(),"A"===t.nodeName&&(t.removeAttribute("href"),t.setAttribute("tabindex","0"),t.setAttribute("role","button"),t.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.activate())}))),this.addEventListener("pointerover",e.warmConnections,{once:!0}),this.addEventListener("focusin",e.warmConnections,{once:!0}),this.addEventListener("click",this.activate),this.needsYTApi=this.hasAttribute("js-api")||navigator.vendor.includes("Apple")||navigator.userAgent.includes("Mobi")}static addPrefetch(e,t,a){const i=document.createElement("link");i.rel=e,i.href=t,a&&(i.as=a),document.head.append(i)}static warmConnections(){e.preconnected||(e.addPrefetch("preconnect","https://www.youtube-nocookie.com"),e.addPrefetch("preconnect","https://www.google.com"),e.addPrefetch("preconnect","https://googleads.g.doubleclick.net"),e.addPrefetch("preconnect","https://static.doubleclick.net"),e.preconnected=!0)}fetchYTPlayerApi(){window.YT||window.YT&&window.YT.Player||(this.ytApiPromise=new Promise(((e,t)=>{var a=document.createElement("script");a.src="https://www.youtube.com/iframe_api",a.async=!0,a.onload=t=>{YT.ready(e)},a.onerror=t,this.append(a)})))}async getYTPlayer(){return this.playerPromise||await this.activate(),this.playerPromise}async addYTPlayerIframe(){this.fetchYTPlayerApi(),await this.ytApiPromise;const e=document.createElement("div");this.append(e);const t=Object.fromEntries(this.getParams().entries());this.playerPromise=new Promise((a=>{let i=new YT.Player(e,{width:"100%",videoId:this.videoId,playerVars:t,events:{onReady:e=>{e.target.playVideo(),a(i)}}})}))}addNoscriptIframe(){const e=this.createBasicIframe(),t=document.createElement("noscript");t.innerHTML=e.outerHTML,this.append(t)}getParams(){const e=new URLSearchParams(this.getAttribute("params")||[]);return e.append("autoplay","1"),e.append("playsinline","1"),e}async activate(){if(this.classList.contains("lyt-activated"))return;if(this.classList.add("lyt-activated"),this.needsYTApi)return this.addYTPlayerIframe(this.getParams());const e=this.createBasicIframe();this.append(e),e.focus()}createBasicIframe(){const e=document.createElement("iframe");return e.width=560,e.height=315,e.title=this.playLabel,e.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",e.allowFullscreen=!0,e.src=`https://www.youtube-nocookie.com/embed/${encodeURIComponent(this.videoId)}?${this.getParams().toString()}`,e}upgradePosterImage(){setTimeout((()=>{const e=`https://i.ytimg.com/vi_webp/${this.videoId}/sddefault.webp`,t=new Image;t.fetchPriority="low",t.referrerpolicy="origin",t.src=e,t.onload=t=>{90==t.target.naturalHeight&&120==t.target.naturalWidth||(this.style.backgroundImage=`url("${e}")`)}}),100)}}customElements.define("lite-youtube",e)}));

SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");
SML.dm("DFGGNzQvr0",["Dw4vb8Yfbm","5r73EsgItq"],(async(r,t)=>{function e(r,e){const a=void 0===e?void 0:`${e}: `;if("object"==typeof r){if(r){if(Array.isArray(r))return t.x` <details class="array"> <summary>${a}Array (${r.length})</summary> <ul> ${r.map(((r,t)=>o(t.toString(),r)))} ${o("length",r.length)} </ul> </details> `;{const e=Object.keys(r);return t.x` <details class="array"> <summary>${a}Object {${e.length}}</summary> <ul> ${e.map((t=>o(t,r[t])))} </ul> </details> `}}return t.x` ${a}<span class="null">null</span> `}const n=typeof r;return t.x` ${a}<span class="${n}">${r}</span> `}function o(r,o){return t.x` <li>${e(o,r)}</li> `}let a=class extends t.s{constructor(){super(...arguments),this.value=null}static get styles(){return t.a`:host{display:block;font-size:var(--font-code);font-family:var(--font-mono);background:var(--color-tone-5);border:1px solid var(--color-tone-4);border-radius:4px;padding:1rem 1.4rem}ul{margin:0 0 0 1.5rem;padding:0;list-style-type:none}.string:after,.string:before{display:inline;content:'"'}.string{color:var(--color-alert-caution)}.boolean,.number{color:var(--color-primary-background-hover)}.null{color:var(--color-tone-2)}`}render(){if(this.value)return e(this.value)}};r._([r.n({type:Object,reflect:!0})],a.prototype,"value",void 0),a=r._([r.e("faceplate-json")],a)}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");SML.di("./B_mjuylxRt.js",import.meta.url,"B_mjuylxRt");SML.di("./jWC3N3n7Al.js",import.meta.url,"jWC3N3n7Al");SML.di("./CEs3hLX56z.js",import.meta.url,"CEs3hLX56z");SML.di("./DCbB57ubLb.js",import.meta.url,"DCbB57ubLb");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");SML.di("./BTnwE85rpZ.js",import.meta.url,"BTnwE85rpZ");SML.di("./DS9WepT8W8.js",import.meta.url,"DS9WepT8W8");SML.di("./B-zFJtiar6.js",import.meta.url,"B-zFJtiar6");SML.di("./lEw4CeTWZd.js",import.meta.url,"lEw4CeTWZd");SML.di("./Chd9fEZKZ6.js",import.meta.url,"Chd9fEZKZ6");SML.di("./CdmJSaSHd8.js",import.meta.url,"CdmJSaSHd8");SML.di("./tO6bKRQro7.js",import.meta.url,"tO6bKRQro7");SML.di("./_C4HT6j0ig.js",import.meta.url,"_C4HT6j0ig");SML.di("./av6qvYZJJ7.js",import.meta.url,"av6qvYZJJ7");SML.di("./jFB0DOsi41.js",import.meta.url,"jFB0DOsi41");SML.di("./DEkErsMrK1.js",import.meta.url,"DEkErsMrK1");SML.di("./DCfD6rLr03.js",import.meta.url,"DCfD6rLr03");SML.di("./Dw4K28bgT7.js",import.meta.url,"Dw4K28bgT7");SML.di("./TELHDd3mgM.js",import.meta.url,"TELHDd3mgM");SML.di("./CQMf561ZyA.js",import.meta.url,"CQMf561ZyA");SML.di("./BwcMg3lXAs.js",import.meta.url,"BwcMg3lXAs");SML.di("./BXUgRcxEAi.js",import.meta.url,"BXUgRcxEAi");SML.di("./w2XkRJ2mzc.js",import.meta.url,"w2XkRJ2mzc");SML.di("./Py9rIF7r2a.js",import.meta.url,"Py9rIF7r2a");SML.di("./BYzqEZ3uv3.js",import.meta.url,"BYzqEZ3uv3");SML.di("./CMwg6atOpj.js",import.meta.url,"CMwg6atOpj");SML.di("./BIzQFHISzm.js",import.meta.url,"BIzQFHISzm");SML.di("./Dh8G_lEIvS.js",import.meta.url,"Dh8G_lEIvS");SML.di("./DMVINMWPkT.js",import.meta.url,"DMVINMWPkT");SML.di("./B0pL5bhFHV.js",import.meta.url,"B0pL5bhFHV");SML.di("./KkXqW5RUm3.js",import.meta.url,"KkXqW5RUm3");SML.di("./DflF56Kkuz.js",import.meta.url,"DflF56Kkuz");SML.di("./CpZ44pmnxI.js",import.meta.url,"CpZ44pmnxI");SML.di("./DZO4dWmzHb.js",import.meta.url,"DZO4dWmzHb");SML.di("./Dm3xIDznQh.js",import.meta.url,"Dm3xIDznQh");SML.di("./BOIWl4apq6.js",import.meta.url,"BOIWl4apq6");SML.di("./BQXYVRGtud.js",import.meta.url,"BQXYVRGtud");
SML.dm("DGdjNHBjnV",["Dw4vb8Yfbm","B_mjuylxRt","jWC3N3n7Al","CEs3hLX56z","DCbB57ubLb","5r73EsgItq","BTnwE85rpZ","DS9WepT8W8","B-zFJtiar6","lEw4CeTWZd","Chd9fEZKZ6","CdmJSaSHd8","DEkErsMrK1","DCfD6rLr03","Dw4K28bgT7","TELHDd3mgM","CQMf561ZyA","BwcMg3lXAs","BXUgRcxEAi","w2XkRJ2mzc","Py9rIF7r2a","BIzQFHISzm","Dh8G_lEIvS","DMVINMWPkT","DZO4dWmzHb","Dm3xIDznQh","BOIWl4apq6","BQXYVRGtud","tO6bKRQro7","_C4HT6j0ig","av6qvYZJJ7","jFB0DOsi41","BYzqEZ3uv3","CMwg6atOpj","B0pL5bhFHV","KkXqW5RUm3","DflF56Kkuz","CpZ44pmnxI"],(async(e,t,i,o,r,n,s,a,l,d,c,h,u,p,g,m,b,f,E,v,C,y,T,w,_,I,S,x)=>{const R="subredditName",k=["r","x"],N=k.join("|"),L=({prefix:e=k[0],...t})=>{const i=l.e((({withAbout:e,aboutOptional:t}={})=>`/:prefix(${N})/:${R}/${e?":page(about/?)"+(t?"?":""):""}`)({withAbout:!0,aboutOptional:!0}))({...t,prefix:e});return t.omitLeadingSlash?i.substring(1):i},M="rte-open-link-dialog-event",D="rte-open-action-link-dialog-event";function O(e,t){return!t||s.i(e,t,r.o)}const P={onError:e=>{console.error(e)},nodes:s.S,editable:!1,theme:{text:{strikethrough:"line-through",underlineStrikethrough:"line-through"},paragraph:"first:mt-0 last:mb-0",blockCursor:"h-[20px] mb-md mt-[14px] first:mt-0 last:mb-0 cursor-text animate-blink border-transparent border-solid border-y-0 border-r-0"}},A={validChildren:["*"]};function B(e,t){return t.reduce(((e,{nodeType:t,nodeTypeConfig:i})=>$(e,t,i)),e)}function $(e,t,i=A){var o;const{lexical:r}=e;if(r.nodes||(r.nodes=[]),r.nodes.includes(t)||r.nodes.push(t),function(e){return void 0!==e.getType?.()}(t)){const r=t.getType();e.nodes??(e.nodes={}),(o=e.nodes)[r]??(o[r]={validChildren:["*"]}),i.validChildren&&(e.nodes[r].validChildren=i.validChildren.slice())}return e}function U(e){const t=r.d({...P,...e.lexical,namespace:"reddit-rte"+Math.random()});return function(e,t){e.registerCommand(r.M,(i=>{const o=r.E();if(!r.u(o))return!1;i.preventDefault();const n=navigator.userAgent.includes("Mac")?i?.metaKey:i?.ctrlKey;if("true"===t.plugins.composer?.noLinebreakOnMetaEnter&&n)return!0;const a=o.getNodes(),l=a[a.length-1];return l.getParents().some(r.K)&&!i?.shiftKey||r.p(l)||s.a(l)||l.getParents().some(s.a)||l.getParents().some(r.q)?(r.p(l)&&!l.getParents().some(r.r)&&l.remove(),e.dispatchCommand(r.h,void 0)):e.dispatchCommand(r.f,!1)}),r.s)}(t,e),t.registerDecoratorListener((e=>{Object.keys(e).forEach((i=>{const o=t.getElementByKey(i);null!==o&&n.B(e[i],o)}))})),t}function F(e){return t=>{if(function(e){const t=r.E();if(r.u(t)){const[i]=t.getNodes();if(r.w(i))return i.getTextContent()===e}return!1}(t)&&!function(e){const t=r.E();if(r.u(t)){const[i]=t.getNodes();return O(e,i.getParent())}return!1}(e))return null;const i=a.a.match(t);if(null==i||0===i.length)return null;const o=i[0].text.length,n=i[0].index;return{start:n,end:n+o}}}const H=new Map;function V(t,i){const o=new s.f(t.getEditor(),i,(async(i,o)=>{if(i.startsWith("u/")){const e=i.substring(2).toLowerCase();return t.redditorMetadata.filter((({name:t})=>t.toLowerCase().startsWith(e))).slice(0,10).map((({id:e,name:t})=>({id:e,text:`u/${t}`})))}const r=i.substring(2).toLowerCase(),n=await async function(t,i){const o=await e.Y({operation:e.O.SubredditTypeahead,variables:{query:t,productSurface:e.bd.Desktop,filters:[]},init:i});if(o.errors.length>0)throw new Error(o.errors.map((e=>e.message)).join(", "));if(!o.data.search?.typeaheadByType?.subreddits)throw new Error("Payload does not have any data for SubredditTypeahead query "+t);return o.data.search?.typeaheadByType?.subreddits.reduce(((e,t)=>{if(!t)return e;const{id:i,isNsfw:o,name:r}=t;return e.push({id:i,isNsfw:o,name:r}),e}),[])}(r,o);return n.slice(0,10).map((e=>({text:L({subredditName:e.name,omitLeadingSlash:!0}),id:e.id})))}));return o.classList.add("z-10"),o}function j(e){return $(e,s.b,{validChildren:[]})}function z(e){const t=e.getEditor();if(!t.hasNodes([s.b]))throw new Error("RedditMentionNode not registered on editor");r.t(...r.v(t,F(e),s.b,(e=>{const t=a.a.match(e.getTextContent());return s.g(t[0].text)})));const i=t._config.namespace,o=()=>H.has(i),n=()=>H.get(i),l=()=>{if(o()){const[t,o]=n();t.destroy(),e.removeChild(o),H.delete(i)}};t.registerCommand(r.X,(()=>(l(),!1)),r.s),t.registerUpdateListener((({editorState:a})=>{a.read((()=>{const a=r.E();if(!(r.u(a)&&s.c(a,s.d)))return void l();if(a.anchor.key!==a.focus.key||a.anchor.offset!==a.focus.offset)return void l();const d=a.getNodes().find((e=>s.d(e))),c=t.getElementByKey(d.getKey()),h=d.getTextContent();if(o()){const[,e]=n();return void e.setQuery(h)}const u=V(e,d);e.appendChild(u);const p=s.e(c,u,{placement:"auto-start",strategy:"fixed",modifiers:[{name:"flip",options:{allowedAutoPlacements:["bottom-start","top-start"]}},{name:"offset",options:{offset:[0,2]}}]});u.setQuery(h),((e,t)=>{H.set(i,[e,t])})(p,u)}))}))}function K(){return n.x`<rte-plugin .beforeCreateEditorCallback="${j}" .createEditorCallback="${z}"></rte-plugin>`}const q="min-h-[44px]",G="min-h-[7rem]",W="rte-show-table-menu-event";function Y(e){const t={};return e.forEach((e=>{const i=e.dataset.key;if(i){const o={...e.dataset};delete o.key,t[i]=o}})),t}function J(e,t){if(void 0===e)return t;const i=parseInt(e,10);return Number.isNaN(i)?t:i}const Z=[function(e){const t=a.b(e);return null===t?null:{index:t.index,length:t.text.length,text:t.text,url:t.url,attributes:{target:"_blank"}}}];function X(e,t){for(let i=0;i<t.length;i++){const o=t[i](e);if(o)return o}return null}const Q=/[,;\s]/;function ee(e){return Q.test(e)}function te(e){return ee(e[e.length-1])}function ie(e){return ee(e[0])}function oe(e){let t=e.getPreviousSibling();return r.g(t)&&(t=t.getLastDescendant()),null===t||r.p(t)||r.w(t)&&te(t.getTextContent())}function re(e){let t=e.getNextSibling();return r.g(t)&&(t=t.getFirstDescendant()),null===t||r.p(t)||r.w(t)&&ie(t.getTextContent())}function ne(e,t,i,o){return!!(e>0?ee(i[e-1]):oe(o))&&(t<i.length?ee(i[t]):re(o))}function se(e,t,i){const o=e.getChildren(),n=o.length;for(let t=0;t<n;t++){const n=o[t];if(!r.w(n)||!n.isSimpleText())return ae(e),void i(null,e.getURL())}const s=e.getTextContent(),a=X(s,t);if(null===a||a.text!==s)return ae(e),void i(null,e.getURL());if(!oe(e)||!re(e))return ae(e),void i(null,e.getURL());const l=e.getURL();l!==a.url&&(e.setURL(a.url),i(a.url,l))}function ae(e){const t=e.getChildren();for(let i=t.length-1;i>=0;i--)e.insertAfter(t[i]);return e.remove(),t.map((e=>e.getLatest()))}function le(e){return B(e,[{nodeType:s.h,nodeTypeConfig:{validChildren:[r.j.getType()]}},{nodeType:{replace:r.A,with:e=>new s.h(e.getURL(),{rel:e.getRel(),target:e.getTarget(),title:e.getTitle()}),withKlass:s.h}}])}function de(e,t){const i=e.getEditor();if(!i.hasNodes([s.h]))throw new Error("RedditAutoLinkNode: RedditAutoLinkNode is not registered for the editor");const o=(e,i)=>{t&&t(e,i)};r.t(i.registerNodeTransform(r.j,(t=>{const i=t.getParentOrThrow(),n=t.getPreviousSibling();i&&s.k(i)&&i.getIsUnlinked()||(s.k(i)?se(i,Z,o):O(e,i)&&(s.l(i)&&a.b(t.getTextContent())||!t.isSimpleText()||!ie(t.getTextContent())&&n&&s.k(n)||function(e,t,i){const o=e.getTextContent();let n,a=o,l=0,d=e;for(;(n=X(a,t))&&null!==n;){const t=n.index,c=n.length,h=t+c;if(ne(l+t,l+h,o,e)){let e;l+t===0?[e,d]=d.splitText(l+c):[,e,d]=d.splitText(l+t,l+t+c);const o=s.m(n.url,n.attributes??{}),a=r.Z(n.text);a.setFormat(e.getFormat()),a.setDetail(e.getDetail()),o.append(a),e.replace(o),i(n.url,null),l=0}else l+=h;a=a.substring(h)}}(t,Z,o),function(e,t,i){const o=e.getPreviousSibling(),r=e.getNextSibling(),n=e.getTextContent();n!==s.B&&(o&&s.k(o)&&!ie(n)&&(o.append(e),se(o,t,i),i(null,o.getURL())),r&&s.k(r)&&!te(n)&&(ae(r),se(r,t,i),i(null,r.getURL())))}(t,Z,o)))})),i.registerCommand(s.j,(e=>{if(!e.currentSelection)return!1;if(!r.u(e.currentSelection))return!1;const t=e.currentSelection.focus.getNode().getParent();if(!t||!s.k(t))return!1;const i=e.currentSelection.clone();return r.l(i),t.setIsUnlinked(!0),s.r(t.getKey()),!0}),r.R))}function ce(){return n.x`<rte-plugin .beforeCreateEditorCallback="${le}" .createEditorCallback="${de}"></rte-plugin>`}const he=new Set([r.y.getType(),r.C.getType(),r.$.getType()]);function ue(e){const t=e.getEditor();return t.registerCommand(r.D,(e=>{const i=r.E();if(!r.u(i))return!1;return!!i.getNodes().some((e=>r.G(e,(e=>he.has(e.getType())))))&&(e.preventDefault(),t.dispatchCommand(e.shiftKey?r.H:r.N,void 0))}),r.O)}function pe(){return n.x`<rte-plugin .createEditorCallback="${ue}"></rte-plugin>`}function ge(e,t,i=1e3){const o=e.getEditor();r.P(o,t||r.Q(),i)}function me(){return n.x`<rte-plugin .createEditorCallback="${ge}"></rte-plugin>`}const be="rte-toolbar-button-click";var fe;!function(e){e.Bold="bold",e.Italic="italic",e.Strikethrough="strikethrough",e.Superscript="superscript",e.BlockQuote="blockquote",e.CodeBlock="codeblock",e.CodeHighlight="code",e.Heading="heading",e.Link="link",e.BulletList="bulletlist",e.NumberList="numberlist",e.Spoiler="spoiler",e.Table="table",e.Gif="gif",e.Image="image",e.ImageFromURL="imageFromURL",e.Video="video",e.Embed="embed"}(fe||(fe={}));let Ee=class extends s.n{constructor(){super(...arguments),this.removeEditableListener=null,this.isMobile=!1,this.selected=!1,this.ignoreFocus=!1,this.isToggle=!1,this._disabled=!1}static get styles(){return[e.t,e.a0("rte-toolbar-button {\n  background: var(--button-color-background);\n  border-radius: 999px;\n  border: none;\n  border: var(--button-border-width, 0) solid var(--button-border-color, transparent);\n  box-shadow: var(--button-shadow);\n  box-sizing: border-box;\n  color: var(--button-color-text);\n  cursor: pointer;\n  display: inline-block;\n  font: var(--button-font);\n  height: var(--button-height);\n  line-height: calc(var(--button-height) - (2 * var(--button-border-width, 0px)));\n  overflow: hidden;\n  padding: 0 calc(var(--button-padding) - var(--button-border-width, 0px));\n  text-align: center;\n  text-decoration: none;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  outline-offset: 0;\n  --button-border-color: var(--button-border-color-default);\n  --button-border-width: var(--button-border-width-default);\n  --button-color-background: var(--button-color-background-default);\n  --button-color-text: var(--button-color-text-default);\n  /* Media query prevents sticky :hover states on mobile */\n  /* This is :active, AKA Pressed */\n  /* This is Selected */\n  --button-height: var(--size-button-sm-h);\n  --button-padding: var(--spacer-2xs);\n  --button-font: var(--font-button-sm);\n  --button-border-width-default: var(--line-button-sm-border);\n  --button-color-background-default: var(--color-primary-background);\n  --button-color-background-focus: var(--color-primary-background);\n  --button-color-background-hover: var(--color-button-primary-background-hover);\n  --button-color-background-active: linear-gradient(var(--color-button-primary-background-hover), var(--color-button-primary-background-hover));\n  --button-color-background-disabled: var(--color-button-primary-background-disabled);\n  --button-color-background-activated: var(--color-button-primary-background-activated);\n  --button-color-text-default: var(--color-global-white);\n  --button-color-text-disabled: var(--color-button-primary-text-disabled);\n  --button-color-text-activated: var(--color-button-primary-text-activated);\n  --button-border-color-default: transparent;\n}\nrte-toolbar-button.icon {\n  width: var(--button-height);\n}\nrte-toolbar-button .button-icon {\n  margin-inline-end: var(--spacer-xs);\n}\nrte-toolbar-button .dropdown-icon {\n  transform: rotate(0deg);\n  transition: transform 0.2s ease-in-out;\n}\nrte-toolbar-button:focus {\n  --button-color-overlay: var(--color-button-overlay-focus);\n}\nrte-toolbar-button.hover {\n  --button-color-overlay: var(--color-button-overlay-focus);\n  --button-border-color: var(--button-border-color-hover);\n  --button-color-background: var(--button-color-background-hover);\n  --button-color-text: var(--button-color-text-hover, var(--button-color-text-default));\n}\n@media (hover: hover) {\n  rte-toolbar-button:hover {\n    --button-color-overlay: var(--color-button-overlay-focus);\n    --button-border-color: var(--button-border-color-hover);\n    --button-color-background: var(--button-color-background-hover);\n    --button-color-text: var(--button-color-text-hover, var(--button-color-text-default));\n  }\n}\nrte-toolbar-button:active,\nrte-toolbar-button.active {\n  --button-color-overlay: var(--color-button-overlay-active);\n  --button-color-background: linear-gradient(var(--color-interactive-pressed), var(--color-interactive-pressed)), var(--button-color-background-active);\n}\nrte-toolbar-button:disabled,\nrte-toolbar-button.anchor-disabled {\n  --button-border-color-hover: var(--button-border-color-default);\n  --button-color-background: var(--button-color-background-disabled);\n  --button-color-text: var(--button-color-text-disabled);\n  cursor: not-allowed;\n  pointer-events: none;\n}\nrte-toolbar-button.disabled.pointer-all {\n  --button-border-color-hover: var(--button-border-color-default);\n  --button-color-background: var(--button-color-background-disabled);\n  --button-color-text: var(--button-color-text-disabled);\n  cursor: not-allowed;\n  pointer-events: all;\n}\nrte-toolbar-button.button-activated {\n  --button-border-color: var(--button-border-color-activated);\n  --button-color-background: var(--button-color-background-activated);\n  --button-color-text: var(--button-color-text-activated);\n}\n.button:disabled,\n.button[aria-disabled='true'] {\n  color: var(--button-color-text-disabled);\n}\n.button[aria-disabled='true'] {\n  --button-border-color-hover: var(--button-border-color-default);\n  --button-color-background: var(--button-color-background-disabled);\n  --button-color-text: var(--button-color-text-disabled);\n}\nfaceplate-screen-reader-content {\n  border-width: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n}\n")]}shouldDisable(){return!!this._editor?.getEditorState().read((()=>this.$shouldDisable()))}$shouldDisable(){return!1}get disabled(){return this._disabled||!this._editor?.isEditable()||this.shouldDisable()}set disabled(e){const t=this.disabled;this._disabled=e,this.requestUpdate("disabled",t)}focusOnEditor(){this._editor?.dispatchCommand(d.R,{})}focus(){this.button?.focus()}createEditor(e){super.createEditor(e),this.requestUpdate();const t=this._editor;this.isMobile="true"===s.o(t,"plugins.composer.isMobile"),this.removeEditableListener=t.registerEditableListener((()=>{this.requestUpdate()})),t.registerCommand(r.Y,(()=>(`${this.disabled}`!==this.button?.ariaDisabled&&this.requestUpdate(),!1)),r.R)}updated(e){0===this.shadowRoot?.children.length?this.classList.add("disallowed-button"):this.classList.remove("disallowed-button")}disconnectedCallback(){this.removeEditableListener?.(),super.disconnectedCallback()}onClick(t){this.disabled?t.stopImmediatePropagation():this.name&&(this.dispatchEvent(e.c(be,{name:this.name},!0)),t.preventDefault(),this.focusOnEditor(),this.handleClick())}handleClick(){throw new Error("Not implemented")}setTooltip(e){const t=this.tooltip?.querySelector("button");if(!t)return;this.shadowRoot?.removeChild(this.tooltip);const i=document.createElement(e);i.appendChild(t),t.setAttribute("slot","trigger"),this.shadowRoot?.appendChild(i)}render(){const{disabled:t,screenReaderContent:i,selected:o}=this,r=this._editor&&!this.isMobile,a={...{appearance:"plain",attributes:{className:"min-w-[2rem] text-secondary-weak","aria-disabled":`${t}`,onclick:this.onClick,tabindex:this.ignoreFocus?"-1":"0",type:"button"},shape:"pill",size:e.q.Small,screenReaderContent:i,selected:o}};return this.isToggle&&a.attributes&&(a.attributes["aria-pressed"]=this.selected?"true":"false"),void 0!==this.text&&(a.screenReaderContent??(a.screenReaderContent=this.text)),this.leadingIcon&&(a.leadingIcon=this.leadingIcon({size:n.I.Small})),r?n.x`<rpl-tooltip class="flex" content="${a.screenReaderContent??""}">${s.p(a)}</rpl-tooltip>`:s.p(a)}};e._([e.n({type:Boolean})],Ee.prototype,"selected",void 0),e._([e.n({type:Boolean,attribute:"ignore-focus"})],Ee.prototype,"ignoreFocus",void 0),e._([e.n({type:String})],Ee.prototype,"name",void 0),e._([e.n({type:String})],Ee.prototype,"text",void 0),e._([e.n({type:String})],Ee.prototype,"screenReaderContent",void 0),e._([e.n()],Ee.prototype,"leadingIcon",void 0),e._([e.n({type:Boolean})],Ee.prototype,"isToggle",void 0),e._([e.a2("button")],Ee.prototype,"button",void 0),e._([e.a2("rpl-tooltip")],Ee.prototype,"tooltip",void 0),e._([e.h()],Ee.prototype,"_disabled",void 0),Ee=e._([e.e("rte-toolbar-button")],Ee);class ve{constructor(e,t){(this.host=e).addController(this),this.disabled=e.disabled,this.selected=e.selected,this.toolbar=t}hostUpdate(){this.disabled===this.host.disabled&&this.selected===this.host.selected||(this.disabled=this.host.disabled,this.selected=this.host.selected,this.toolbar.requestUpdate())}}let Ce=class extends n.s{static get styles(){return[e.t]}constructor(){super(),this.overflowItems=[]}handleKeyDown(e){"ArrowLeft"===e.key?(e.preventDefault(),this.moveFocus({isBackward:!0})):"ArrowRight"===e.key&&(e.preventDefault(),this.moveFocus({isBackward:!1}))}getNextChild(e,t,i=!1){let o=i?t-1:t+1;o<0?o=e.length-1:o>e.length-1&&(o=0);const r=e[o];return r instanceof Ee||r instanceof HTMLButtonElement?r:this.getNextChild(e,o,i)}getSlottedFixedChildren(){return this.shadowRoot.querySelector('slot[name="fixed"]')?.assignedElements({flatten:!0})||[]}blockFocusOnSlottedChildren(){for(const e of this.getSlottedFixedChildren())e.setAttribute("tabindex","-1"),e.setAttribute("slotted","true")}moveFocus({isBackward:e=!1}={}){this.overflowMenu?.hide();const t=[...(this.visibleChildren ?? []),...(this.overflowItems.length&&this.overflowMenuButton ? [this.overflowMenuButton] : []),...this.getSlottedFixedChildren()],i=this.focusedChild&&t?.findIndex((e=>e===this.focusedChild))||0,o=this.getNextChild(t,i??0,e);this.setFocusedChild({element:o,focusElementImmediately:!0})}setFocusedChild({element:e,focusElementImmediately:t=!1}){this.focusedChild?.getAttribute("slotted")?this.focusedChild.setAttribute("tabindex","-1"):this.focusedChild?.setAttribute("ignore-focus",""),e.getAttribute("slotted")?e.setAttribute("tabindex","0"):e.removeAttribute("ignore-focus"),this.focusedChild=e,t&&e.focus()}firstUpdated(e){super.firstUpdated(e);const t=this.visibleChildren?.[0];t&&"toolbar"===this.getAttribute("role")&&([...(this.visibleChildren ?? []),...(this.hiddenChildren ?? [])].forEach((e=>{e.setAttribute("ignore-focus","")})),this.blockFocusOnSlottedChildren(),this.setFocusedChild({element:t}),this.addEventListener("keydown",this.handleKeyDown))}updated(e){this.focusedChild&&this.overflowMenuButton&&this.hiddenChildren?.includes(this.focusedChild)&&this.setFocusedChild({element:this.overflowMenuButton}),super.updated(e)}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver((()=>{this.requestUpdate()})),this.resizeObserver.observe(this)}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver?.disconnect(),this.removeEventListener("keydown",this.handleKeyDown),this.hasUpdated=!1}focus(){this.focusedChild?.focus()}render(){const{overflowItems:t}=this;return n.x` <div class="px-xs py-2xs"> <div class="flex toolbar w-full max-w-full"> <div class="rte-toolbar-fixed ms-auto gap-2xs flex flex-nowrap flex-row-reverse grow-0 order-2"> <slot name="fixed"></slot> </div> <div class="rte-toolbar-responsive gap-2xs flex flex-row grow flex-nowrap order-1"> <slot name="responsive"></slot> <rpl-dropdown placement="bottom" style="--rpl-z-index-dropdown:10"> ${s.p({attributes:{className:"min-w-[2rem] text-secondary-weak ms-auto",tabindex:this.focusedChild&&this.hiddenChildren?.includes(this.focusedChild)||this.focusedChild instanceof HTMLButtonElement?"0":"-1","aria-label":"More options"},appearance:"plain",shape:"pill",size:e.q.Small,leadingIcon:c.o({size:n.I.Small})})} ${t.length>0?n.x`<rpl-menu slot="content" hidden class="max-h-[300px]">${t.map((e=>e.html))}</rpl-menu>`:n.x``} </rpl-dropdown> </div> </div> </div> `;}async getUpdateComplete(){const e=await super.getUpdateComplete(),t=(await (this.overflowMenu?.updateComplete))??!1;return e&&t}rteToolbarButtonToListItem(e){const{screenReaderContent:t,text:i,leadingIcon:o,disabled:r,selected:s}=e,a=new ve(e,this);return{button:e,disabled:r,controller:a,html:n.x`<rpl-menu-item appearance="default" ?disabled="${r}" ?selected="${s}" @click="${t=>{t.preventDefault(),e.shadowRoot?.querySelector("button")?.click()}}"> ${t||i||""} ${o?o({size:n.I.Small,attributes:{slot:"leading-icon"}}):n.x``} </rpl-menu-item>`}}htmlButtonToListItem(e){const{disabled:t,textContent:i}=e;return{button:e,disabled:t,html:n.x`<rpl-menu-item appearance="default" ?disabled="${t}" @click="${()=>e.click()}"> ${i||""} ${h.t({size:n.I.Small,attributes:{slot:"leading-icon"}})} </rpl-menu-item>`}}willUpdate(){if(!(this.toolbarContainer&&this.fixedButtonsContainer&&this.responsiveButtonsContainer&&this.overflowMenu&&this.hiddenChildren&&this.visibleChildren))return;const{width:e}=this.toolbarContainer.getBoundingClientRect(),{width:t}=this.fixedButtonsContainer.getBoundingClientRect();for(const e of this.hiddenChildren??[])e.classList.remove("hidden");for(const{button:e,controller:t}of this.overflowItems)e instanceof Ee&&t&&e.removeController(t);this.overflowMenu.classList.add("hidden");const{width:i,x:o}=this.responsiveButtonsContainer.getBoundingClientRect();this.overflowMenu.classList.remove("hidden");const r=this.responsiveButtonsContainer.getBoundingClientRect().width-i,n=e-t;if(i<=n)this.overflowMenu.classList.add("hidden"),this.overflowItems.length>0&&(this.overflowItems=[]),this.focusedChild===this.overflowMenuButton&&this.setFocusedChild({element:this.visibleChildren[0]});else{const{visibleChildren:e}=this,t=n-r,i=e.findIndex((e=>{const{x:i,width:r}=e.getBoundingClientRect();return(e instanceof Ee||e instanceof HTMLButtonElement)&&i-o+r>t}));if(i>0){const t=e[i-1];t instanceof HTMLHRElement&&t.classList.add("hidden")}const s=[];e.slice(i).forEach((e=>{e.classList.add("hidden"),e instanceof Ee?s.push(this.rteToolbarButtonToListItem(e)):e instanceof HTMLButtonElement&&s.push(this.htmlButtonToListItem(e))})),this.overflowItems=s}}};e._([e.a2(".toolbar")],Ce.prototype,"toolbarContainer",void 0),e._([e.a2(".toolbar .rte-toolbar-responsive")],Ce.prototype,"responsiveButtonsContainer",void 0),e._([e.a2(".toolbar .rte-toolbar-fixed")],Ce.prototype,"fixedButtonsContainer",void 0),e._([e.a2("rpl-dropdown")],Ce.prototype,"overflowMenu",void 0),e._([e.a2("rpl-dropdown > button")],Ce.prototype,"overflowMenuButton",void 0),e._([e.l({slot:"responsive",flatten:!0,selector:".hidden:not(.disallowed-button)"})],Ce.prototype,"hiddenChildren",void 0),e._([e.l({slot:"responsive",flatten:!0,selector:":not(.hidden)"})],Ce.prototype,"visibleChildren",void 0),e._([e.h()],Ce.prototype,"overflowItems",void 0),e._([e.h()],Ce.prototype,"focusedChild",void 0),Ce=e._([e.e("rte-toolbar")],Ce);const{svg:ye}=e.a(),Te=e.m(ye`<path d="M16.045 16.93a2.888 2.888 0 002.885-2.884v-2.091a2.888 2.888 0 00-2.885-2.884h-2.09c-.109 0-.213.019-.318.032a1.68 1.68 0 00-.81.376l-.076-.068.394-1.079c.722-2.288 2.69-3.354 2.792-3.407a.9.9 0 00-.82-1.602c-.165.084-4.044 2.114-4.044 6.731v3.993a2.888 2.888 0 002.884 2.884l2.088-.001zm-3.175-4.975c0-.598.486-1.084 1.084-1.084h2.09c.598 0 1.085.486 1.085 1.084v2.091c0 .598-.487 1.084-1.085 1.084h-2.09a1.085 1.085 0 01-1.084-1.084v-2.091zM6.045 16.93a2.888 2.888 0 002.885-2.884v-2.091a2.888 2.888 0 00-2.885-2.884h-2.09c-.109 0-.213.019-.318.032a1.68 1.68 0 00-.81.376l-.076-.068.394-1.079c.722-2.288 2.69-3.354 2.792-3.407a.9.9 0 00-.82-1.602c-.165.084-4.044 2.114-4.044 6.731v3.993a2.888 2.888 0 002.884 2.884l2.088-.001zM2.87 11.955c0-.598.486-1.084 1.084-1.084h2.09c.598 0 1.085.486 1.085 1.084v2.091c0 .598-.487 1.084-1.085 1.084h-2.09a1.085 1.085 0 01-1.084-1.084v-2.091z"></path>`,"0 0 20 20","quote-start"),we=Symbol("mixins/with-should-disable-block-node");function _e(e){if(we in e)return e;class t extends e{$shouldDisable(){const e=r.E();return!(!e||this.selected)&&!(r.u(e)&&!s.c(e,(e=>s.q(e,r.y))))}}return t[we]=!0,t}const Ie=Symbol("mixins/with-should-disable-inline-formatting");function Se(e){if(Ie in e)return e;class t extends e{$shouldDisable(){const e=r.E();return!(!e||this.selected)&&!!(!r.u(e)&&!r._(e)||r.u(e)&&s.c(e,(e=>s.q(e,r.$,s.b,r.a0))))}}return t[Ie]=!0,t}const xe={},Re={};function ke(){const e=r.E();return!!r.u(e)&&(r.a5(e,r.a7),!0)}function Ne(){const e=r.E();return!!r.u(e)&&(r.a5(e,r.I),!0)}let Le=class extends(_e(Ee)){constructor(){super(),this.isBlockQuote=!1,this.leadingIcon=Te,this.text="Quote Block",this.name=fe.BlockQuote,this.isToggle=!0}handleClick(){this._editor?.dispatchCommand(this.isBlockQuote?Re:xe,void 0)}beforeCreateEditor(e){e=super.beforeCreateEditor(e);const t=[r.j,r.a1,r.o,s.s,r.A,s.h,s.b,s.t,r.a2].map((e=>e.getType()));return $(e,r.a3,{validChildren:t})}createEditor(e){super.createEditor(e);const t=this._editor;if(!t.hasNodes([r.a3]))throw new Error("RTEToolbarButtonBlockQuote: QuoteNode not registered on editor");r.t(t.registerCommand(xe,ke,r.R),t.registerCommand(Re,Ne,r.R),t.registerCommand(r.a4,s.u(e,r.a3,{shouldMergeSameNodeType:!0}),r.R),t.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=r.E();this.isBlockQuote=r.u(e)&&s.c(e,r.a6),this.selected=this.isBlockQuote}))})))}};e._([e.h()],Le.prototype,"isBlockQuote",void 0),Le=e._([e.e("rte-toolbar-button-block-quote")],Le);const Me=/^\d+$/;const De=/\[['"]?([^'"\]]+)['"]?]/gm,Oe=/^\./gm;function Pe(e,t,i){const o=function(e){return"string"==typeof e&&(e=(e=(e=e.replace(De,".$1")).replace(Oe,"")).split(".")),e.slice()}(t),r=o.slice(-1)[0],n=function(e,t){let i=e;for(let e=0;e<t.length-1;e++){const o=t[e];if(!(o in i)){const r=t[e+1];"number"==typeof r||Me.test(r)?i[o]=[]:i[o]={}}i=i[o]}return i}(e,o);return n[r]=i,e}const Ae=["bold","underline","strikethrough","italic","highlight","subscript","superscript","code"];function Be(e,t){if(r.w(e))for(const i of t)e.hasFormat(i)&&e.toggleFormat(i)}const $e=e=>Be(e,Ae),Ue="code",Fe=Ae.filter((e=>e!==Ue));function He(e,t){const i=r.E();if(r.u(i))if(i.isCollapsed()){const e=new r.j("");if(i.insertNodes([e]),e.select(),t===Ue)for(const e of Fe)i.hasFormat(e)&&i.toggleFormat(e);else i.hasFormat(Ue)&&i.toggleFormat(Ue)}else((e,t)=>{e.extract().forEach((e=>Be(e,t)))})(i,t===Ue?Fe:[Ue]);return!1}let Ve=class extends(Se(Ee)){constructor(){super(),this.leadingIcon=u.c,this.text="Code",this.name=fe.CodeHighlight,this.isToggle=!0}handleClick(){this._editor?.dispatchCommand(r.i,Ue)}beforeCreateEditor(e){return Pe((e=super.beforeCreateEditor(e)).lexical,"theme.text.code","code"),$(e,r.a2,{validChildren:[r.j.getType()]})}createEditor(e){super.createEditor(e);const t=this._editor;if(!t.hasNodes([r.a2]))throw new Error("CodePlugin: CodeHighlightNode not registered on editor");t.registerCommand(r.i,He.bind(null,t),r.R),t.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=r.E();this.selected=r.u(e)&&e.hasFormat(Ue)}))})),s.v(t,(()=>!this.shouldDisable()),Ue)}};Ve=e._([e.e("rte-toolbar-button-code")],Ve);const je={},ze={};function Ke(e,t){return t.update((()=>{let e=r.E();if(r.u(e)||r._(e)){let t;if(e.isCollapsed()){const[i]=e.getNodes();t=i.getParentOrThrow().getChildren(),r.a5(e,(()=>r.a8()))}else{const i=e.getTextContent(),o=r.a8();e.insertNodes([o]),e=r.E(),r.u(e)&&e.insertRawText(i),t=o.getChildren()}t.forEach($e)}})),!0}function qe(e,t){return t.update((()=>{const e=r.E();r.u(e)&&r.a5(e,(()=>r.I()))})),!0}function Ge(e){const t=r.E()?.getNodes()[0];return!(!r.r(t)&&!r.r(t?.getParent()))&&(e.preventDefault(),r.E()?.insertRawText("  "),!0)}let We=class extends(_e(Ee)){constructor(){super(),this.isCodeBlock=!1,this.leadingIcon=t.c,this.text="Code Block",this.name=fe.CodeBlock,this.isToggle=!0}handleClick(){this._editor?.dispatchCommand(this.isCodeBlock?ze:je,void 0)}beforeCreateEditor(e){Pe((e=super.beforeCreateEditor(e)).lexical,"theme.code","block p-xs mt-xs rounded-none");const t=[r.a1,r.j].map((e=>e.getType()));return $(e,r.$,{validChildren:t})}createEditor(e){super.createEditor(e);const t=this._editor;if(!t.hasNodes([r.$]))throw new Error("CodeNodePlugin: CodeNode not registered on editor");r.t(t.registerCommand(je,Ke,r.R),t.registerCommand(ze,qe,r.R),t.registerCommand(r.D,Ge,r.s),t.registerCommand(r.a4,s.u(e,r.$),r.R),t.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=r.E();this.isCodeBlock=r.u(e)&&s.c(e,r.r),this.selected=this.isCodeBlock}))})),s.w(r.$,e))}};function Ye(e,t){return Math.min(e,Math.max(t,20))}function Je({mediaWidth:e,mediaHeight:t,maxDimension:i}){if(e<=0||t<=0)return{width:0,height:0};let o=e,r=t;if(e<t&&t>i){o=e*(i/t)}else if(e>t&&e>i){r=t*(i/e)}return{width:Ye(i,o),height:Ye(i,r)}}function Ze(e){e.stopPropagation()}function Xe(t,i){const o=e.c("faceplate-alert",{level:e.a5.error,cause:"uncategorized",message:i});t.getRootElement().dispatchEvent(o)}e._([e.h()],We.prototype,"isCodeBlock",void 0),We=e._([e.e("rte-toolbar-button-code-block")],We);class Qe extends(_e(Ee)){constructor({leadingIcon:e,mediaType:t,nodeType:i,toolbarButtonName:o,tooltipText:r}){super(),this.isOverMediaLimit=!1,this.maxCurrentMediaTypeCount=Number.POSITIVE_INFINITY,this.currentMediaNodeCount=0,this.handleCustomConfigValidationResults=()=>{},this.leadingIcon=e,this.text=r,this._mediaType=t,this._nodeType=i,this.name=o}handleClick(){this.dispatchEvent(e.c(this.openTooltipEvent,void 0,!0)),this.fileInput?.click()}connectedCallback(){super.connectedCallback(),this.registerCommands()}disconnectedCallback(){this.unsubscribeFn?.(),super.disconnectedCallback()}willExceedMediaLimit(e){const t=Math.min(this.maxCurrentMediaTypeCount,this.pluginConfig.maxMediaCount);return this.currentMediaNodeCount+e>t}constructDragDropPasteCommands(e){if(!this.pluginConfig.allowMediaDragDrop&&!this.pluginConfig.allowMediaPaste)return[];const t=s.u(e,this._nodeType,{isValidPlacement:e=>this.willExceedMediaLimit(e.length)?(this.fireOverMediaLimitAlertEvent(),!1):!this.disabled||(this.fireInvalidPlacementAlertEvent(),!1),handleFiles:(t,i)=>{const o=i.filter((({type:e})=>e.includes(`${this._mediaType}/`)));if(o.length>0)if(this.pluginConfig.allowCreation){const e=t?.target instanceof Element?t.target.getAttribute("key"):null,i=e?this._editor?.getEditorState().read((()=>r.S(e))):null;this.startUpload(t instanceof DragEvent?"drag_and_drop":"clipboard",o,i??void 0)}else Xe(e.getEditor(),this.mediaNotAllowedErrorMessage)}});return[[r.z,this.pluginConfig.allowMediaDragDrop],[r.a4,this.pluginConfig.allowMediaPaste]].reduce(((e,[i,o])=>o?[...e,this._editor.registerCommand(i,t,r.R)]:e),[])}handleInputCancel(){this._isMediaPlaceholderInsertion=!1}insertMedia(e){const t=this.createMediaNode(e);s.x([t],this._rte)}async triggeNodesUpload(t){const i=t.map((e=>e.getKey()));if(t.length>0&&this._rte){const o=this._rte.getEditor();o.update((()=>{t.forEach((e=>{e.getWritable().uploadStatus="validating"}))}));const n=await Promise.allSettled(Array.from(t).filter((e=>!!e.blob)).map((async e=>this.parseAndValidateMediaFile(e.blob,this.pluginConfig))));for(let t=0;t<n.length;t++){const a=n[t],l=i[t];if("fulfilled"===a.status){const e=a.value;o.update((()=>{const t=r.S(l);if(t&&t instanceof this._nodeType){const i=t;this.updateNodeWithValidatedMetadata(i,e)}}),{tag:s.H})}else{const{message:t,reason:i}=a.reason,n=i||"ERROR";o.update((()=>{const e=r.S(l);e&&e.remove()}),{tag:s.H}),Xe(o,t);const d=this.errorEvent;o.getRootElement()?.dispatchEvent(e.c(d,{reason:n}))}}}}async triggerUpload(e,t,i){if(t?.length&&this._rte){const o=this._rte.getEditor(),r=i instanceof s.M?i.caption:void 0,n=[];o.update((()=>{i instanceof s.M&&i.remove(),Array.from(t).forEach((t=>{const i=this.createDefaultPayload(t,e,r),o=this.createMediaNode(i);s.x([o],this._rte),n.push(o)}))}),{onUpdate:()=>{this.triggeNodesUpload(n).then((()=>{this._isMediaPlaceholderInsertion=!1}))}})}}$shouldDisable(){return super.$shouldDisable()&&!this._isMediaPlaceholderInsertion||this.isOverMediaLimit}onSelect(e){const t=this._editor?.getEditorState().read((()=>r.E()?.getNodes()?.[0]));this.startUpload("fileselector",e.target?.files,t),this.fileInput&&(this.fileInput.value="")}fireOverMediaLimitAlertEvent(){if(this._editor){let e="";e=this.pluginConfig.maxMediaCount<=this.maxCurrentMediaTypeCount?s.y.overAttachmentLimitErrorMessage(this.pluginConfig.maxMediaCount):this.overMediaLimitErrorMessage(),Xe(this._editor,e)}}fireInvalidPlacementAlertEvent(){if(this._editor){const e=this._editor.getEditorState().read((()=>{const e=r.E();return r.u(e)&&s.c(e,r.a9)?this.invalidNodePlacementWithinTableErrorMessage:this.invalidNodePlacementGenericErrorMessage}));Xe(this._editor,e)}}startUpload(e,t,i){if(this._rte&&t&&t.length>0){if(this.willExceedMediaLimit(t.length))return void this.fireOverMediaLimitAlertEvent();this.disabled||(this.focusOnEditor(),this.triggerUpload(e,t,i))}}beforeCreateEditor(e){e=super.beforeCreateEditor(e);const t=this.validateConfig(e.plugins);return void 0!==t&&("EXCEEDED_MAX_MEDIA_COUNT"===t?window.Sentry?.captureMessage?.(`RTE Media Plugin: Max ${this._mediaType} count exceeds the configured maximum media count. Media count: ${e.plugins.media?.maxMediaCount} - Image Count: ${e.plugins.images?.maxImageCount} - Video Count: ${e.plugins.videos?.maxVideoCount}`):"MISSING_REQUIRED_CONFIG_VALUES"===t?window.Sentry?.captureMessage?.(`RTE Media Plugin: Missing required configuration values. Plugin Config: ${JSON.stringify(e.plugins)}`):this.handleCustomConfigValidationResults(t,e.plugins)),this.pluginConfig=this.parseConfig(e.plugins),this.maxCurrentMediaTypeCount=this.getMaxCurrentMediaTypeCount(this.pluginConfig),Pe(e.lexical,`theme.${this._mediaType}`,"whitespace-normal"),Pe(e.lexical,`theme.${s.M.getType()}`,"whitespace-normal"),$(e,this._nodeType,{validChildren:[]})}createEditor(e){super.createEditor(e);if(!this._editor.hasNodes([this._nodeType]))throw new Error(`MediaPlugin: Node with media type "${this._mediaType}" is not registered on editor`);this.registerCommands()}registerCommands(){const t=this._editor,i=this._rte;if(!t||!i)return;const o=this.constructDragDropPasteCommands(i);this.unsubscribeFn=r.t(...o,t.registerCommand(this.INSERT_MEDIA_COMMAND,(e=>(this.insertMedia(e),!1)),r.R),t.registerCommand(s.z,(e=>(e.type!==this._mediaType||this.isOverMediaLimit||(this._isMediaPlaceholderInsertion=!0,this.fileInput?.click()),!1)),r.R),t.registerCommand(d.N,(e=>{const{decoratorNodeRegistry:t}=e,i=t.countOf(this._mediaType),o=s.A.reduce(((e,i)=>i!==this._mediaType?e+t.countOf(i):e),0);return this.currentMediaNodeCount=i,this.isOverMediaLimit=i>=this.maxCurrentMediaTypeCount||i+o>=this.pluginConfig.maxMediaCount,!1}),r.R),t.registerNodeTransform(this._nodeType,(e=>{try{let o=e.getParent();o&&r.K(o)&&(o.replace(e),o=e.getParent()),o&&!s.i(i,o,e)&&(e.remove(),this.fireInvalidPlacementAlertEvent()),e&&s.C(e.src)&&!e.uploadStatus&&t.update((()=>{const t=s.D(e.src),i=e.getWritable();i.blob=t,i.mimetype=t.type}),{tag:s.H,onUpdate:()=>this.triggeNodesUpload([e])})}catch(e){window.Sentry?.captureMessage?.(`Error validating ${this._mediaType} node location at transform time: ${e?.message}`)}})),t.registerMutationListener(this._nodeType,(i=>{const o=t.getEditorState().read((()=>Array.from(i).reduce(((e,[t,i])=>{if("updated"===i){const i=r.S(t);i&&"validated"===i.uploadStatus&&e.push(i)}return e}),[])));o?.forEach((i=>{try{i.upload(t)}catch(i){Xe(t,this.uploadErrorMessage),t.getRootElement()?.dispatchEvent(e.c(this.errorEvent,{reason:"ERROR"}))}}))})))}render(){return this.pluginConfig.allowCreation?n.x`<input type="file" accept="${this.allowedMimetypes(this.pluginConfig).join(", ")}" class="hidden" @cancel="${this.handleInputCancel}" @click="${Ze}" @change="${this.onSelect}" data-media-type="${this._mediaType}" ?multiple="${Math.min(this.maxCurrentMediaTypeCount,this.pluginConfig.maxMediaCount)>1}"> ${super.render()} `:n.x``}}function et(e){const{media:t}=e;return {...(t?.bearerToken ? {bearerToken:t.bearerToken} : {}),allowCaptions:"true"===t?.allowCaptions,allowMediaDragDrop:"false"!==t?.allowMediaDragDrop,allowMediaPaste:"false"!==t?.allowMediaPaste,maxMediaCount:J(t?.maxMediaCount,Number.POSITIVE_INFINITY)};}function tt(e){if(!(e.images&&e.images.allowStaticImages&&e.images.allowAnimatedImages))return"MISSING_REQUIRED_CONFIG_VALUES";const t=J(e.media?.maxMediaCount,Number.POSITIVE_INFINITY),i=J(e.images?.maxImageCount,Number.POSITIVE_INFINITY);return void 0!==e.images?.maxImageCount&&i>t?"EXCEEDED_MAX_MEDIA_COUNT":void 0}function it(e){const{images:t}=e;return{...et(e),allowCreation:"true"===t?.allowCreation,minImageDimension:J(t?.minImageDimension,0),allowStaticImages:"true"===t?.allowStaticImages,allowAnimatedImages:"true"===t?.allowAnimatedImages,maxImageCount:J(t?.maxImageCount,Number.POSITIVE_INFINITY),maxImageDisplayDimension:J(t?.maxImageDisplayDimension,Number.POSITIVE_INFINITY)}}e._([e.h()],Qe.prototype,"isOverMediaLimit",void 0),e._([e.a2("input[type=file]")],Qe.prototype,"fileInput",void 0);const ot={};SML.di("./CBbxnHsw2W.js",import.meta.url,"CBbxnHsw2W").then((function(e){return e.f}));let rt=class extends Qe{constructor(){super({leadingIcon:p.i,mediaType:s.I.getType(),nodeType:s.I,toolbarButtonName:fe.Image,tooltipText:s.y.addImageButton()}),this.pluginConfig={allowAnimatedImages:!1,allowCreation:!1,allowMediaDragDrop:!0,allowMediaPaste:!0,allowStaticImages:!1,allowCaptions:!1,maxImageDisplayDimension:Number.POSITIVE_INFINITY,minImageDimension:0,maxImageCount:Number.POSITIVE_INFINITY,maxMediaCount:Number.POSITIVE_INFINITY},this.allowedMimetypes=e=>g.a(e),this.createMediaNode=s.F,this.errorEvent=s.G,this.INSERT_MEDIA_COMMAND=ot,this.getMaxCurrentMediaTypeCount=e=>e.maxImageCount,this.openTooltipEvent=s.O,this.parseConfig=it,this.validateConfig=tt,this.invalidNodePlacementWithinTableErrorMessage=s.y.invalidNodePlacementWithinTableErrorMessage(),this.invalidNodePlacementGenericErrorMessage=s.y.invalidNodePlacementGenericErrorMessage(),this.uploadErrorMessage=s.y.uploadErrorMessage(),this.mediaNotAllowedErrorMessage=s.y.mediaNotAllowedErrorMessage(),this.overMediaLimitErrorMessage=()=>s.y.overMediaLimitErrorMessageImage(this.maxCurrentMediaTypeCount),this.text=s.y.addImageButton()}constructPayload({bearerToken:e,src:t,width:i,height:o,caption:r},n,s){return{src:t,width:i,height:o,blob:n,mediaId:"",mimetype:n.type,uploadMethod:s,bearerToken:e,caption:r}}createDefaultPayload(e,t,i){return this.constructPayload({src:URL.createObjectURL(e),width:640,height:480,bearerToken:this.pluginConfig.bearerToken,caption:i},e,t)}async parseAndValidateMediaFile(e,t){let i=null;try{i=await g.g(e)}catch(e){throw new Error(s.y.unableToReadImageError())}const o=g.v(i,t);if(!o.valid&&o.error)throw new s.V(o.error,o.reason);const r=Je({mediaWidth:i.width||0,mediaHeight:i.height||0,maxDimension:t.maxImageDisplayDimension});return{src:i.src,...r}}updateNodeWithValidatedMetadata(e,t){const i=e.getWritable();i.src=t.src,i.width=t.width,i.height=t.height,i.uploadStatus="validated"}};rt=e._([e.e("rte-toolbar-button-image")],rt);function nt(t){const i=document.createElement("video"),o=function(){const t=window.navigator?.userAgent.toLowerCase()||"";return e.k1(t)}();return new Promise(((e,r)=>{const n=()=>{r(new Error(`Error creating video with src ${t}`))};i.addEventListener("error",n);const s=o?["progress"]:["loadedmetadata","loadeddata","suspend"],a=()=>{(function({video:e,isIos:t}){if(t&&1===e.readyState)e.load();else if(e.readyState>=2)return!0;return!1})({video:i,isIos:o})&&(s.forEach((e=>i.removeEventListener(e,a))),i.removeEventListener("error",n),e(i))};s.forEach((e=>i.addEventListener(e,a))),i.src=t,a()}))}async function st(t,{count:i}){if(i<1)throw new Error("Number of thumbnails must be at least 1.");const o=[];if(function(){const t=window.navigator?.userAgent.toLowerCase()||"";return e.k0(t)}()&&1===i){const e=await at(t);return e&&o.push(e),o}const r=t.duration,n=r/i;for(let e=0;e<i;e++){const i=n*e;if(i>=r)break;const s=await lt(t,i);s&&o.push(s)}return o}async function at(e){return new Promise((t=>{const i=document.createElement("canvas");i.width=e.videoWidth,i.height=e.videoHeight;const o=i.getContext("2d");o?.drawImage(e,0,0),i.toBlob((e=>{t(e)}))}))}function lt(e,t){return new Promise((i=>{const o=()=>{at(e).then((t=>{e.removeEventListener("seeked",o),i(t)}))};e.addEventListener("seeked",o),e.currentTime=t}))}async function dt(e){const t=URL.createObjectURL(e),i=await nt(t);return{src:t,duration:i.duration,getPosterBlob:async function(){return(await st(i,{count:1}))[0]??null},width:i.videoWidth,height:i.videoHeight,type:e.type,size:e.size}}const ct=1073741824,ht=["video/mp4","video/quicktime"];function ut(e,t){const{type:i,size:o,duration:r,width:n,height:s}=e,{minVideoDimension:a,skipVideoSizeAndDimensionValidation:l,allowExtendedVideoDuration:d,composerContext:c}=t;if(!ht.includes(i))return{valid:!1,error:g.u.videoMimetypeError(),reason:"INVALID_VIDEO_TYPE_ERROR"};if(!l&&o>ct)return{valid:!1,error:g.u.videoMaxSizeError(Math.floor(1)),reason:"VIDEO_SIZE_LIMIT_EXCEEDED_ERROR"};if(!l){let e=900;if(d&&(e=1800),"comment"===c&&(e=180),r>e)return{valid:!1,error:g.u.videoIsTooLongError(Math.floor(e/60)),reason:"VIDEO_MAX_DURATION_ERROR"}}if(r<2)return{valid:!1,error:g.u.videoIsTooShortError(2),reason:"VIDEO_MIN_DURATION_ERROR"};if(0===n||0===s)return{valid:!1,error:g.u.videoCodecError(),reason:"VIDEO_CODEC_ERROR"};const h=a??50,u=a??50;return n<h||s<u?{valid:!1,error:g.u.videoMinDimensionError(h,u),reason:"VIDEO_MIN_DIMENSION_ERROR"}:o/r<1024?{valid:!1,error:g.u.videoMinRateError(Math.floor(1)),reason:"VIDEO_MIN_BITRATE_ERROR"}:{valid:!0,error:null}}function pt(e){const{maxMediaCount:t,maxVideoCount:i,playerUi:o}=gt(e);return void 0!==e.videos?.maxVideoCount&&i>t?"EXCEEDED_MAX_MEDIA_COUNT":["mobile","desktop"].includes(o)?void 0:"INVALID_PLAYER_UI_TYPE"}function gt(e){const{videos:t}=e;return{...et(e),allowCreation:"true"===t?.allowCreation,minVideoDimension:J(t?.minVideoDimension,0),maxVideoDisplayDimension:J(t?.maxVideoDisplayDimension,Number.POSITIVE_INFINITY),maxVideoCount:J(t?.maxVideoCount,Number.POSITIVE_INFINITY),playerUi:t?.playerUi??"desktop",skipVideoSizeAndDimensionValidation:"true"===t?.skipVideoSizeAndDimensionValidation,allowExtendedVideoDuration:"true"===t?.allowExtendedVideoDuration,composerContext:t?.composerContext}}const mt={};SML.di("./CBbxnHsw2W.js",import.meta.url,"CBbxnHsw2W").then((function(e){return e.f}));class bt extends s.V{}let ft=class extends Qe{constructor(){super({leadingIcon:m.v,mediaType:s.J.getType(),nodeType:s.J,toolbarButtonName:fe.Video,tooltipText:s.y.video()}),this.pluginConfig={allowCreation:!1,allowCaptions:!1,allowMediaDragDrop:!0,allowMediaPaste:!0,maxVideoDisplayDimension:Number.POSITIVE_INFINITY,minVideoDimension:0,maxMediaCount:Number.POSITIVE_INFINITY,maxVideoCount:Number.POSITIVE_INFINITY,playerUi:"desktop"},this.allowedMimetypes=()=>ht,this.createMediaNode=s.K,this.errorEvent=s.L,this.handleCustomConfigValidationResults=(e,t)=>{"INVALID_PLAYER_UI_TYPE"===e&&window.Sentry?.captureMessage?.(`RTE Video Plugin: Invalid video player UI type specified. Plugin Config: ${JSON.stringify(t)}`)},this.INSERT_MEDIA_COMMAND=mt,this.getMaxCurrentMediaTypeCount=e=>e.maxVideoCount,this.openTooltipEvent=s.N,this.parseConfig=gt,this.validateConfig=pt,this.invalidNodePlacementWithinTableErrorMessage=s.y.invalidNodePlacementWithinTableErrorMessageVideo(),this.invalidNodePlacementGenericErrorMessage=s.y.invalidNodePlacementGenericErrorMessageVideo(),this.uploadErrorMessage=s.y.uploadErrorMessageVideo(),this.mediaNotAllowedErrorMessage=s.y.mediaNotAllowedErrorMessageVideo(),this.overMediaLimitErrorMessage=()=>s.y.overMediaLimitErrorMessageVideo(this.maxCurrentMediaTypeCount)}constructPayload({bearerToken:e,caption:t,src:i,width:o,height:r,getPosterBlob:n},s,a){return{src:i,width:o,height:r,blob:s,mediaId:"",mimetype:s.type,playerUi:this.pluginConfig.playerUi,uploadMethod:a,bearerToken:e,caption:t,getPosterBlob:n}}createDefaultPayload(e,t,i){return this.constructPayload({src:URL.createObjectURL(e),width:640,height:480,playerUi:this.pluginConfig.playerUi,bearerToken:this.pluginConfig.bearerToken,caption:i},e,t)}async parseAndValidateMediaFile(e,t){let i=null;try{i=await dt(e)}catch(e){throw new Error(s.y.unableToReadVideoError())}const o=ut(i,t);if(!o.valid&&o.error)throw new bt(o.error,o.reason);const r=Je({mediaWidth:i.width,mediaHeight:i.height,maxDimension:t.maxVideoDisplayDimension});return{src:i.src,getPosterBlob:i.getPosterBlob,...r}}updateNodeWithValidatedMetadata(e,t){const i=e.getWritable();i.src=t.src,i.width=t.width,i.height=t.height,i.uploadStatus="validated",t.getPosterBlob&&(i.getPosterBlob=t.getPosterBlob)}};ft=e._([e.e("rte-toolbar-button-video")],ft);const Et="k2kwyMA6VeyHM6ZRT96OXDGaersnx73Z";async function vt(e,t){const i=await fetch(e,t),o=await i.json();if(200!==o.meta.status)throw new Error(`${o.meta.status} ${o.meta.msg}`);return o}const Ct={};let yt=class extends(_e(Ee)){static get styles(){return[...Ee.styles,n.a`@media (prefers-color-scheme:dark){#powered-by-giphy{filter:invert(1)}}`]}constructor(){super(),this.pluginConfig={allowCreation:!1,maxMediaCount:Number.POSITIVE_INFINITY},this.shouldShowGiphyBanner=!0,this.isOverMediaLimit=!1,this.hasVideos=!1,this.failedToFetchTheResults=!1,this.search=async e=>{this.failedToFetchTheResults=!1,this.searchOperationAbortController?.abort(),this.searchOperationAbortController=new AbortController;try{const t=""!==e?await async function({query:e,offset:t,rating:i,limit:o},r){const n=new URL("https://api.giphy.com/v1/gifs/search");return n.searchParams.set("api_key",Et),n.searchParams.set("q",e),n.searchParams.set("offset",(t||0).toString()),n.searchParams.set("limit",(o||25).toString()),n.searchParams.set("rating",(i||"pg").toString()),vt(n,r)}({query:e},this.searchOperationAbortController):await async function({offset:e,rating:t,limit:i},o){const r=new URL("https://api.giphy.com/v1/gifs/trending");return r.searchParams.set("api_key",Et),r.searchParams.set("offset",(e||0).toString()),r.searchParams.set("limit",(i||25).toString()),r.searchParams.set("rating",(t||"pg").toString()),vt(r,o)}({},this.searchOperationAbortController);this.searchOperationAbortController=void 0,this.searchResults=t.data.map((e=>{const t=e.images.fixed_width,i=e.images.downsized.url?e.images.downsized:t;return{mediaId:`giphy|${e.id}`,title:e.title,media:{preview:{width:Number.parseInt(i.width),height:Number.parseInt(i.height),src:i.url},original:{width:Number.parseInt(t.width),height:Number.parseInt(t.height),src:t.url}}}}))}catch(e){"AbortError"!==e.name&&(this.searchResults=void 0,this.failedToFetchTheResults=!0)}},this.debouncedSearch=e.ao(this.search,500),this.handleSearchInput=()=>{const e=this.searchInput?.value||"";this.shouldShowGiphyBanner=0===e.length,this.debouncedSearch(e)},this.handleMenuClose=()=>{this.searchInput&&(this.searchInput.value=""),this.searchOperationAbortController?.abort(),this.searchOperationAbortController=void 0,this.searchResults=[],this._editor?.focus()},this.handleSearchInputClear=()=>{this.searchInput&&(this.searchInput.value=""),this.search("")},this.handleImageClick=e=>{this.dropdownMenu?.close();const t=e.currentTarget,i=t.dataset.mediaId,o=t.dataset.src,r=Number.parseInt(t.dataset.width),n=Number.parseInt(t.dataset.height);this.focusOnEditor(),this._editor?.dispatchCommand(Ct,{mediaId:i,src:o,width:r,height:n}),this.dispatchEvent(new CustomEvent("select-giphy-image",{bubbles:!0,composed:!0}))},this.handleReloadButtonClick=()=>{const e=this.searchInput?.value||"";this.search(e)},this.stopPropagation=e=>{e.stopPropagation()},this.searchInputCopy=s.y.searchGiphy(),this.leadingIcon=E.g,this.text=s.y.gif(),this.name=fe.Gif}$shouldDisable(){return super.$shouldDisable()||this.isOverMediaLimit||this.hasVideos}disconnectedCallback(){this.searchOperationAbortController?.abort()}beforeCreateEditor(e){return e=super.beforeCreateEditor(e),this.pluginConfig=function(e){return{allowCreation:"true"===e.plugins.giphy?.allowCreation,maxMediaCount:J(e.plugins.media?.maxMediaCount,Number.POSITIVE_INFINITY)}}(e),$(e,s.I,{validChildren:[]})}createEditor(e){super.createEditor(e);const t=this._editor;r.t(t.registerCommand(Ct,(e=>{const i={...e,mimetype:"image/gif",uploadMethod:"giphy"};return t.dispatchCommand(ot,i),!0}),r.R),t.registerCommand(d.N,(e=>{const{decoratorNodeRegistry:t}=e,i=t.countOf(s.J.getType());if(this.hasVideos=i>0,void 0!==this.pluginConfig.maxMediaCount){const e=t.countOf(s.I.getType());this.isOverMediaLimit=e>=this.pluginConfig.maxMediaCount}return!1}),r.R))}updated(e){super.updated(e),e.has("searchResults")&&this.dropdownMenuContainer&&(this.dropdownMenuContainer.scrollTop=0)}handleClick(){this.search(""),setTimeout((()=>this.searchInput?.focus()),100),this.dispatchEvent(new CustomEvent("open-giphy-tooltip",{bubbles:!0,composed:!0}))}renderReloadButton(){return this.failedToFetchTheResults?n.x`${s.p({appearance:"plain",leadingIcon:v.r({size:n.I.Small}),children:s.y.reload(),attributes:{className:"mx-auto mt-4xl",onclick:this.handleReloadButtonClick,"data-testid":"btn-reload"}})}`:n.x``}renderGiphyImage(e){const t=`${e.media.preview.width}/${e.media.preview.height};`;return n.x` <button @click="${this.handleImageClick}" class="block bg-transparent border-0 m-0 p-0 cursor-pointer rounded-4 overflow-hidden" data-media-id="${e.mediaId}" data-src="${e.media.original.src}" data-width="${e.media.original.width}" data-height="${e.media.original.height}"> <img src="${e.media.preview.src}" alt="${e.title}" class="block w-full" style="aspect-ratio:${t}" loading="lazy"> </button> `}renderGiphyResults(){if(!this.searchResults)return n.x``;if(0===this.searchResults.length)return n.x` <p class="mt-4xl text-center text-neutral-content-weak">${s.y.noResults()}</p> `;const[t,i]=function(e){const t={height:0,images:[]},i={height:0,images:[]};for(const o of e){const e=t.height<=i.height?t:i;e.images.push(o);const r=o.media.preview.height/o.media.preview.width;e.height+=r}return[t.images,i.images]}(this.searchResults);return n.x` <div class="flex flex-row gap-xs" data-testid="giphy-images"> <div class="flex flex-col gap-xs flex-1 shrink-0 p-0 m-0" data-testid="first-column"> ${e.c2(t,(e=>e.mediaId),(e=>this.renderGiphyImage(e)))} </div> <div class="flex flex-col gap-xs flex-1 shrink-0 p-0 m-0" data-testid="second-column"> ${e.c2(i,(e=>e.mediaId),(e=>this.renderGiphyImage(e)))} </div> </div> `}renderGiphyForm(){return n.x` <div id="dropdown-menu-container" class="w-[375px] h-[300px] overflow-auto bg-ui-modalbackground py-xs px-md" slot="menu" @click="${this.stopPropagation}" @keyup="${this.stopPropagation}"> <div class="w-full sticky top-0"> <faceplate-search-input appearance="${b.T.SECONDARY}" @input="${this.handleSearchInput}" placeholder="${this.searchInputCopy}" ariaControls="${this.searchInputCopy}" class="w-full m-0 mb-xs"> ${C.s({attributes:{slot:"leadingIcon"},size:n.I.Medium})} ${s.p({size:e.q.Small,appearance:"plain",attributes:{slot:"clearIcon",onclick:this.handleSearchInputClear,"data-testid":"btn-clear"},leadingIcon:f.c({size:n.I.Small}),screenReaderContent:s.y.clearInput()})} </faceplate-search-input> ${y.n(this.shouldShowGiphyBanner,(()=>n.x` <img src="${window?.CLIENT_CONFIG?.STATIC_BASE_URL?`${window.CLIENT_CONFIG.STATIC_BASE_URL}assets/powered-by-giphy.png`:"/components/giphy/powered-by-giphy.png"}" alt="${s.y.poweredByGiphy()}" id="powered-by-giphy" class="absolute end-sm top-md"> `))} </div> ${this.renderGiphyResults()} ${this.renderReloadButton()} </div> `}render(){return this.pluginConfig.allowCreation?n.x` <faceplate-dropdown-menu position="bottom-start" .onclose="${this.handleMenuClose}" ?disabled="${this.disabled}"> ${super.render()} ${this.renderGiphyForm()} </faceplate-dropdown-menu> `:n.x``}};e._([e.h()],yt.prototype,"shouldShowGiphyBanner",void 0),e._([e.h()],yt.prototype,"isOverMediaLimit",void 0),e._([e.h()],yt.prototype,"hasVideos",void 0),e._([e.a2("faceplate-search-input",!0)],yt.prototype,"searchInput",void 0),e._([e.a2("#dropdown-menu-container",!0)],yt.prototype,"dropdownMenuContainer",void 0),e._([e.a2("faceplate-dropdown-menu",!0)],yt.prototype,"dropdownMenu",void 0),e._([e.h()],yt.prototype,"searchResults",void 0),e._([e.h()],yt.prototype,"failedToFetchTheResults",void 0),yt=e._([e.e("rte-toolbar-button-giphy")],yt);const Tt={},wt={};function _t(e){const t=r.E();if(!r.u(t))return!1;const i=t.getNodes();return[...i[0].getPreviousSiblings(),...i,...i[i.length-1].getNextSiblings()].forEach($e),r.a5(t,(()=>r.aa(e))),!0}function It(){const e=r.E();return!!r.u(e)&&(r.a5(e,r.I),!0)}function St(){return{h1:s.y.headingLevel(1),h2:s.y.headingLevel(2),h3:s.y.headingLevel(3),h4:s.y.headingLevel(4),h5:s.y.headingLevel(5),h6:s.y.headingLevel(6)}}let xt=class extends(_e(Ee)){constructor(){super(),this.isHeading=!1,this.selectedHeadingTagType=null,this.allowHeadingLevelSelection=!1,this.toggleHeadingLevel=()=>{this.isHeading?this._editor?.dispatchCommand(wt,void 0):this._editor?.dispatchCommand(Tt,"h1")},this.handleNormalTextSelection=()=>{this.focusOnEditor(),this._editor?.dispatchCommand(wt,void 0)},this.handleHeadingLevelSelection=e=>{this.focusOnEditor(),this._editor?.dispatchCommand(Tt,e)},this.leadingIcon=t.t,this.text="Heading",this.name=fe.Heading}connectedCallback(){super.connectedCallback(),this.isToggle=!this.allowHeadingLevelSelection}handleClick(){this.allowHeadingLevelSelection||this.toggleHeadingLevel()}beforeCreateEditor(e){e=super.beforeCreateEditor(e);for(const[t,i]of Object.entries({h1:"text-24 leading-7",h2:"text-20 leading-6",h3:"text-16 leading-5",h4:"text-14 leading-4",h5:"text-12 leading-3",h6:"text-10 leading-2"}))Pe(e.lexical,`theme.heading.${t}`,`${i} mt-large mb-x6`);const t=[r.j,r.o,s.s,r.A,s.h,s.b].map((e=>e.getType()));return $(e,r.a0,{validChildren:t})}createEditor(e){super.createEditor(e);const t=this._editor;if(!t.hasNodes([r.a0]))throw new Error("RTEToolbarButtonHeading: HeadingNode not registered on editor");this.allowHeadingLevelSelection="true"===s.o(t,"plugins.headings.allowHeadingLevelSelection"),r.t(t.registerCommand(Tt,_t,r.R),t.registerCommand(wt,It,r.R),t.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=r.E(),t=r.u(e);this.isHeading=t&&s.c(e,r.ab),this.selected=this.isHeading,this.selectedHeadingTagType=this.allowHeadingLevelSelection&&t?function(e){for(const t in St()){function i(e){return r.ab(e)&&e.getTag()===t}if(e.getNodes().every((e=>i(e)||e.getParents().some(i))))return t}return null}(e):null}))})),s.w(r.a0,e,{nodeHandlers:{[r.a1.getType()]:({parent:e})=>{s.P(e,(()=>r.aa(e.getTag())))}}}),...(this.allowHeadingLevelSelection ? [] : [t.registerMutationListener(r.a0,(e=>{t.update((()=>{for(const[t,i]of e)if("created"===i){const e=r.S(t);e&&"h1"!==e.getTag()&&e.replace(r.aa("h1"),!0)}}))}),{skipInitialization:!1})]))}renderHeadingLevelDropdown(){return n.x` <rpl-menu slot="content"> <rpl-menu-item ?selected="${!this.selectedHeadingTagType}" type="button" data-heading-style="normal-text" @click="${this.handleNormalTextSelection}" @keydown="${e=>{l.aI(e.code)&&this.handleNormalTextSelection()}}"> <span class="text-14"> ${s.y.headingLevelNormalText()} </span> </rpl-menu-item> ${Object.entries(St()).map((([e,t])=>{const i=e;return n.x` <rpl-menu-item ?selected="${this.selectedHeadingTagType===i}" type="button" data-heading-style="${i}" @click="${()=>this.handleHeadingLevelSelection(i)}" @keydown="${e=>{l.aI(e.code)&&this.handleHeadingLevelSelection(i)}}"> <span class="${{h1:"text-24 leading-7",h2:"text-20 leading-6",h3:"text-16 leading-5",h4:"text-14 leading-4",h5:"text-12 leading-3",h6:"text-10 leading-2"}[i]}"> ${t} </span> </rpl-menu-item> `}))} </rpl-menu> `}render(){return this.allowHeadingLevelSelection?n.x` <rpl-dropdown placement="bottom-start" ?disabled="${this.disabled}"> ${super.render()} ${this.renderHeadingLevelDropdown()} </rpl-dropdown> `:super.render()}};e._([e.h()],xt.prototype,"isHeading",void 0),e._([e.h()],xt.prototype,"selectedHeadingTagType",void 0),e._([e.h()],xt.prototype,"allowHeadingLevelSelection",void 0),xt=e._([e.e("rte-toolbar-button-heading")],xt);const Rt={},kt={};function Nt(e){const t=e.getChildren();for(let i=0;i<t.length;i++)e.insertBefore(t[i]);e.remove()}function Lt(e,t,i){const o=Array.isArray(e)?e:[e],r=o[0].getParent(),n=o[0].getIndexWithinParent();return t.append(...o),i?i.insertAfter(t):r&&r?.splice(n,0,[t]),t}function Mt(){const e=r.E();if(!r.u(e))return!1;const t=e.getNodes().filter((e=>s.a(e)));if(t.length>0)return t.forEach((e=>{Nt(e)})),!0;const i=e.focus.getNode(),o=r.af(i,s.t);if(o){const t=o.getTextContent();if(o.getTextContent()===s.B||""===t.trim())o.remove();else if(e.isCollapsed()&&r.ag(e.focus)){const e=r.Z(s.B);o.insertAfter(e),e.select(1,1)}else Nt(o);return!0}return!1}function Dt(){const e=r.E();if(!r.u(e))return!1;const t=e.getNodes(),i=e.focus.getNode();if(t.length>1)return function(e){const t=e.extract().filter(r.w).reduce(((e,t)=>{const i=e[e.length-1],o=function(e){const t=e.getParents();return t.find((e=>r.ah(e)||s.d(e)))??e}(t);return 0===i.length||i[i.length-1].is(o.getPreviousSibling())?i.push(o):e.push([o]),e}),[[]]),i=t.map((e=>Lt(e,s.Q(),e[0].getPreviousSibling())));i[i.length-1]?.select()}(e),!0;if(function(e){if(r.K(e)){const t=s.Q();return e.append(t),t.selectEnd(),!0}return!1}(i))return!0;if(r.w(i)){const t=s.Q(),o=i.getParent();if(o?.isInline())Lt(o,t);else if(s.d(i))Lt(i,t);else if(0===e.getTextContent().length)s.T(e,i,t),t.selectEnd();else{const o=e.extract();o.length>0&&(o[0].is(i)?Lt(i,t):(t.append(o[0]),i.insertAfter(t)))}return!0}return!1}function Ot(e,{isBackwards:t}){const{shouldMoveSelectionToSibling:i,sibling:o,focusSpoilerNode:n}=e.getEditorState().read((()=>{let e=!1,i=null,o=null,n=null;const a=r.E();if(r.u(a)&&(o=a.focus.getNode(),i=r.w(o)?r.af(o,s.t):o,r.w(o))){const r=o.getTextContent(),l=t?r.charAt(a.focus.offset-1):r.charAt(a.focus.offset);n=t?i?.getPreviousSibling():i?.getNextSibling();const d=function(e,t){if(!e)return t.offset;let i=0,o=t.getNode();for(;o&&!o.is(e);)i+=o.is(t.getNode())?t.offset:o.getTextContentSize(),o=o.getPreviousSibling()||(o.getParent()?.is(e)?null:o.getParent()?.getPreviousSibling());return i}(i,a.focus);e=!!i&&(l===s.B||t&&0===d||!t&&d===i.getTextContentSize())}return{shouldMoveSelectionToSibling:e,focusNode:o,focusSpoilerNode:i,sibling:n}}));return!(!i||o)&&(e.update((()=>{if(n){const e=r.Z(s.B);t?n.insertBefore(e):n.insertAfter(e),e.select(1,1)}})),!0)}let Pt=class extends Ee{constructor(){super(),this.isSpoiler=!1,this.leadingIcon=T.c,this.text="Spoiler",this.name=fe.Spoiler,this.isToggle=!0}handleClick(){this._editor?.dispatchCommand(this.isSpoiler?kt:Rt,void 0)}beforeCreateEditor(e){return Pe((e=super.beforeCreateEditor(e)).lexical,"theme.spoiler","bg-tone-4 rounded-1 py-2xs px-2xs empty:pr-0 mx-2xs first:ml-0"),$(e,s.t,{validChildren:[r.j.getType(),r.o.getType(),s.s.getType()]})}createEditor(e){super.createEditor(e);const t=this._editor;if(!t.hasNodes([s.t]))throw new Error("SpoilerPlugin: SpoilerNode not registered on editor");r.t(t.registerCommand(Rt,Dt,r.R),t.registerCommand(kt,Mt,r.R),t.registerCommand(r.ae,(()=>{const e=r.E();if(r.u(e)){let i=e.focus.getNode();if(r.w(i)&&(i=i.getParent()),i&&s.a(i)&&(""===i.getTextContent().trim()||i.getTextContent()===s.B))return t.update((()=>{i.remove()}),{skipTransforms:!0}),!0}return!1}),r.R),t.registerCommand(r.ad,(e=>!e.shiftKey&&Ot(t,{isBackwards:!1})),r.O),t.registerCommand(r.ac,(e=>!e.shiftKey&&Ot(t,{isBackwards:!0})),r.O),t.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=r.E();this.isSpoiler=r.u(e)&&s.c(e,s.a),this.selected=this.isSpoiler}))})),t.registerNodeTransform(r.j,(e=>{const t=r.E();e.getTextContent()!==s.B&&(e.getTextContent().startsWith(s.B)&&(e.setTextContent(e.getTextContent().replace(new RegExp(`^${s.B}`),"")),r.u(t)&&t.isCollapsed()&&t.focus.getNode().is(e)&&e.select(t?.anchor.offset-1,t.focus.offset-1)),e.getTextContent().endsWith(s.B)&&e.setTextContent(e.getTextContent().replace(new RegExp(`${s.B}$`),"")))})),t.registerNodeTransform(s.t,(e=>{const t=e.getFirstChild(),i=r.E();if(!t||!r.w(t)){const i=r.Z(s.B);t?.insertBefore(i)||e.append(i)}if(r.u(i)&&i.isCollapsed()){const t=i.focus.getNode();(t.is(e)||r.w(t)&&t.getParent()?.is(e))&&0===i.focus.offset&&e.getFirstChild()?.select(1,1)}})))}$shouldDisable(){const e=r.E();return!(!e||this.selected)&&(!r.u(e)||s.c(e,(e=>s.q(e,r.$,r.a0))))}};e._([e.h()],Pt.prototype,"isSpoiler",void 0),Pt=e._([e.e("rte-toolbar-button-spoiler")],Pt);let At=class extends Ee{constructor(){super(),this.isTable=!1,this.leadingIcon=t.a,this.text=s.y.table(),this.name=fe.Table}handleClick(){this._editor?.dispatchCommand(r.ai,{columns:"3",rows:"3",includeHeaders:{columns:!1,rows:!0}})}beforeCreateEditor(e){Pe((e=super.beforeCreateEditor(e)).lexical,"theme.tableCell","px-sm py-xs leading-5 border border-solid border-neutral-border relative"),Pe(e.lexical,"theme.table","relative table-fixed");const t=[r.F,r.j,r.a2,s.t,r.o,s.s,r.A,s.h,s.b].map((e=>e.getType()));return B(e,[{nodeType:r.y,nodeTypeConfig:{validChildren:[r.aj.getType()]}},{nodeType:r.aj,nodeTypeConfig:{validChildren:[r.ak.getType()]}},{nodeType:r.ak,nodeTypeConfig:{validChildren:t}}])}createEditor(t){super.createEditor(t);const i=this._editor;if(!i.hasNodes([r.y,r.ak,r.aj]))throw new Error("TablePlugin: TableNode, TableRowNode, and TableCellNode are not registered.");const o=new Map;r.t(i.registerMutationListener(r.y,function(e,t){return i=>{for(const[o,n]of i)if("created"===n)e.getEditorState().read((()=>{const i=r.S(o);r.a9(i)&&Bt(e,t,i)}));else if("destroyed"===n){const e=t.get(o);void 0!==e&&(e.removeListeners(),t.delete(o))}}}(i,o)),i.registerCommand(r.ai,(({columns:e,rows:t,includeHeaders:i})=>(function(e,t,i){const o=r.as(e,t,i);r.at(o);const n=o.getFirstDescendant();r.w(n)&&n.select()}(Number.parseInt(t),Number.parseInt(e),i),!0)),r.s),i.registerCommand(r.M,(e=>{const t=r.E();if(!r.u(t))return!1;e.preventDefault();const i=t.getNodes(),o=i[i.length-1],n=r.am(o);if(n){const t=r.an(n),i=r.ao(n),o=r.ap(n),s=e?.shiftKey?o.getPreviousSibling():o.getNextSibling();if(s){const e=s.getChildren()[i];r.aq(e)&&e.select()}else e?.shiftKey?t.selectPrevious():t.selectNext();return!0}return!1}),r.ar),i.registerUpdateListener(function(t){let i=!1;return()=>{t.getEditorState().read((()=>{n(t)}))};function o(t,o){(o.show||i)&&(t.getRootElement()?.dispatchEvent(e.c(W,o)),i=o.show)}function n(e){const t=r.E(),i=window.getSelection(),n=document.activeElement,s=e.getRootElement();if(r.u(t)&&null!=s&&null!=i&&s.contains(i.anchorNode)){const i=r.am(t.anchor.getNode());if(null==i)return void o(e,{show:!1});const n=e.getElementByKey(i.getKey());if(null==n)return void o(e,{show:!1});o(e,{cell:n,show:!0,editor:e})}else n||o(e,{show:!1})}}(i)),i.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=r.E();this.selected=r.u(e)&&s.c(e,r.a9)||r._(e),this.isTable=this.selected}))})),i.registerCommand(r.a4,s.u(t,r.y),r.R),s.w(r.ak,t,{collapseBlock:!0,fixUpNode:e=>{if(!r.K(e.getFirstChild())){const t=r.I();t.append(...e.getChildren()),e.append(t)}}}),i.registerNodeTransform(r.y,(e=>{if(e.getChildrenSize()>0){const t=e.getChildAtIndex(0);if(t&&t.getChildrenSize()>0){const e=t.getFirstChild();e&&!e.hasHeader()&&e.setHeaderStyles(r.al.ROW)}}})))}$shouldDisable(){const e=r.E();return this.selected||null!=e&&!r.u(e)}};function Bt(e,t,i){const o=i.getKey(),n=e.getElementByKey(o);if(n&&!t.has(o)){const s=r.au(i,n,e);t.set(o,s)}}e._([e.h()],At.prototype,"isTable",void 0),At=e._([e.e("rte-toolbar-button-table")],At);var $t=function(e,t,i){var o=null,r=null,n=i&&i.leading,s=i&&i.trailing;null==n&&(n=!0);null==s&&(s=!n);1==n&&(s=!1);var a=function(){o&&(clearTimeout(o),o=null)},l=function(){var i=n&&!o,a=this,l=arguments;if(r=function(){return e.apply(a,l)},o||(o=setTimeout((function(){if(o=null,s)return r()}),t)),i)return i=!1,r()};return l.cancel=a,l.flush=function(){var e=r;a(),e&&e()},l};let Ut=class extends n.s{constructor(){super(...arguments),this.shown=!1,this.translateTop="-10000px",this.translateLeft="-10000px",this.isHeaderRow=!1,this.useBottomSheet=!1,this.onResize=$t(this.updatePosition.bind(this),50),this.close=()=>{this.shadowRoot?.querySelector("rpl-bottom-sheet")?.hide()}}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.onResize)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this.onResize)}async updatePosition(){this.cell&&this.editor&&(await this.toggle({cell:this.cell,editor:this.editor,show:this.shown}))}setIsHeaderRow(){this.cellNode&&(this.isHeaderRow=(this.cellNode.__headerState&r.al.ROW)===r.al.ROW)}async toggle(e){const{cell:t,editor:i,show:o}=e??{};if(e&&(this.cell=t,this.editor=i,this.useBottomSheet=!!this.editor&&"true"===s.o(this.editor,"plugins.composer.isMobile")),i&&o&&t){i.update((()=>{this.cellNode=r.av(this.cell),this.setIsHeaderRow()}));const e=this.offsetParent.getBoundingClientRect(),o=t.getBoundingClientRect();this.translateLeft=o.right-e.left+window.scrollX-38+"px",this.translateTop=o.top-e.top+4+"px"}else this.translateTop="-10000px",this.translateLeft="-10000px";this.shown=o??this.shown,this.requestUpdate()}insertRow(e=!0){return t=>{if(t.preventDefault(),this.editor){let t,i,o;this.editor.update((()=>{this.cellNode&&(t=r.an(this.cellNode),i=r.aw(this.cellNode),o=r.ax(e),i=e?i:i+1)}),{onUpdate:()=>{this.editor&&this.editor.update((()=>{const e=t.getChildAtIndex(i);if(o&&e){const t=e.getChildren();o.getChildren().forEach(((e,i)=>{const o=t[i].getFirstChild().getFormatType();e.getFirstChild().setFormat(o)}))}}))}})}}}deleteRow(){return e=>{e.preventDefault(),this.editor&&(this.editor.dispatchCommand(d.R,{}),this.editor.update((()=>{r.ay()})))}}insertColumn(e=!0){return t=>{t.preventDefault(),this.editor&&this.editor.update((()=>{r.az(e)}))}}deleteColumn(){return e=>{e.preventDefault(),this.editor&&(this.editor.dispatchCommand(d.R,{}),this.editor.update((()=>{r.aA()})))}}deleteTable(){return e=>{e.preventDefault(),this.editor&&(this.editor.dispatchCommand(d.R,{}),this.editor.update((()=>{const e=r.E();if(r.u(e)){const t=r.G(e.getNodes()[0],(e=>r.a9(e)));t?.remove(!1)}})))}}alignColumn(e){return t=>{t.preventDefault(),this.editor.update((()=>{const t=r.an(this.cellNode),i=r.ao(this.cellNode);t.getChildren().forEach((t=>{t.getChildren()[i].getFirstChild().setFormat(e)}))}))}}renderButton(t){const i=s.y.tableActionsMenu();return n.x`<rpl-tooltip> ${s.p({attributes:{className:"opacity-90",onclick:t},leadingIcon:c.o({size:n.I.Small}),size:e.q.Small,shape:"pill",screenReaderContent:i})} <span slot="content">${i}</span> </rpl-tooltip>`}renderDropdown(e){return n.x` <rpl-dropdown placement="right-start" trigger="click"> <span> ${this.renderButton()} </span> <rpl-menu slot="content" hidden> ${e.map((e=>n.x` <rpl-menu-item @click="${e.onClick}"> <span slot="leading-icon">${e.leadingIcon}</span> ${e.label} </rpl-menu-item> ${e.addDividerBelow?n.x`<hr>`:n.x``} `))} </rpl-menu> </rpl-dropdown>`}renderBottomSheet(t){const i=n.x`<rpl-modal-card> <div slot="title">${s.y.tableActionsMenu()}</div> <div slot="close-button"> ${s.p({appearance:"secondary",leadingIcon:e.al({size:n.I.Small}),size:e.q.Small,attributes:{onclick:this.close},screenReaderContent:s.y.closeTableActionsMenu()})} </div> <rpl-menu> ${t.map((e=>n.x` <rpl-menu-item @click="${t=>{e.onClick(t),this.close()}}"> <span slot="leading-icon">${e.leadingIcon}</span> ${e.label} </rpl-menu-item> ${e.addDividerBelow?n.x`<hr>`:n.x``} `))} </rpl-menu></rpl-modal-card>`;return n.x` <rpl-bottom-sheet dialog-id="rte-table-menu-bottom-sheet" .litTemplateChildren="${i}"> </rpl-bottom-sheet> ${this.renderButton((()=>{this.shadowRoot?.querySelector("rpl-bottom-sheet")?.showModal()}))}`}render(){const e=[...(this.isHeaderRow ? [] : [{label:s.y.insertRowAbove(),leadingIcon:w.a(),onClick:this.insertRow(!1),addDividerBelow:!1}]),{label:s.y.insertRowBelow(),leadingIcon:w.a(),onClick:this.insertRow(!0),addDividerBelow:!1},{label:s.y.deleteRow(),leadingIcon:g.d(),onClick:this.deleteRow(),addDividerBelow:!0},{label:s.y.insertColumnBefore(),leadingIcon:w.a(),onClick:this.insertColumn(!1),addDividerBelow:!1},{label:s.y.insertColumnAfter(),leadingIcon:w.a(),onClick:this.insertColumn(!0),addDividerBelow:!1},{label:s.y.deleteColumn(),leadingIcon:g.d(),onClick:this.deleteColumn(),addDividerBelow:!0},{label:s.y.alignLeft(),leadingIcon:t.b(),onClick:this.alignColumn("left"),addDividerBelow:!1},{label:s.y.alignCenter(),leadingIcon:t.d(),onClick:this.alignColumn("center"),addDividerBelow:!1},{label:s.y.alignRight(),leadingIcon:t.e(),onClick:this.alignColumn("right"),addDividerBelow:!0},{label:s.y.deleteTable(),leadingIcon:g.d(),onClick:this.deleteTable(),addDividerBelow:!1}];return n.x`<div id="rte-table-menu-container" style="transform:translate(${this.translateLeft},${this.translateTop})" class="z-10 absolute start-0 top-0 ${this.shown?"":"hidden"}"> ${this.useBottomSheet?this.renderBottomSheet(e):this.renderDropdown(e)} </div>`}};Ut.styles=[e.t],e._([e.h()],Ut.prototype,"shown",void 0),e._([e.h()],Ut.prototype,"translateTop",void 0),e._([e.h()],Ut.prototype,"translateLeft",void 0),e._([e.h()],Ut.prototype,"isHeaderRow",void 0),Ut=e._([e.e("rte-table-menu")],Ut);const Ft="rte-link-modal";let Ht=class extends n.s{constructor(){super(...arguments),this.disableSubmit=!0,this.submitFormOnReturnKey=e=>{"Enter"===e.key&&(e.preventDefault(),this.form?.submit())},this.stopFocusPropagation=e=>{e.stopPropagation()},this.initFormFields=()=>{this.form=this.modal?.portalContainer.querySelector("#rte-link-modal faceplate-form")??void 0,this.textField=this.modal?.portalContainer.querySelector("#rte-link-modal faceplate-text-input[name=text]")??void 0,this.urlField=this.modal?.portalContainer.querySelector("#rte-link-modal faceplate-text-input[name=url]")??void 0,this.submitButton=this.modal?.portalContainer.querySelector('#rte-link-modal [data-testid="btn-save-link"]')??void 0,this.textField?.addEventListener("keydown",this.submitFormOnReturnKey),this.urlField?.addEventListener("keydown",this.submitFormOnReturnKey),requestAnimationFrame((()=>{this.disableSubmit=!this.isValid()}))},this.close=()=>{this.disableSubmit=!0,this.form?.reset(),this.modal?.hide(),this.textField?.removeEventListener("keydown",this.submitFormOnReturnKey),this.urlField?.removeEventListener("keydown",this.submitFormOnReturnKey)},this.onCancel=e=>{e.stopPropagation(),this.close()},this.onSubmit=e=>{if(e.preventDefault(),e.stopPropagation(),this.isValid()){const e={url:this.getNormalizedUrlValue(),text:this.textField?.value||this.urlField?.value,nodeKey:this.link?.nodeKey,currentSelection:this.link?.currentSelection};this.link?.nodeKey?this.editor?.dispatchCommand(s.U,e):this.editor?.dispatchCommand(s.W,e),this.close()}},this.onRemove=e=>{e.preventDefault();const t={currentSelection:this.link?.currentSelection};this.editor?.dispatchCommand(s.j,t),this.close()},this.updateValidityFields=()=>{const e=this.isValidText(),t=this.isValidUrl(),i=e&&t;this.submitButton&&(this.disableSubmit=!i),""===this.getUrlValue()||t||this.form?.invalidateFieldWithMessage(this.urlField?.name,s.y.invalidUrl())},this.handleFormFocusout=()=>{this.updateValidityFields()},this.handleFormInput=e=>{this.updateValidityFields(),this.textField?.dispatchEvent(new Event("focusout",{bubbles:!0})),e.target===this.urlField&&this.urlField?.dispatchEvent(new Event("focusout",{bubbles:!0}))}}static get styles(){return[e.t]}async open(e,t){this.editor=e,this.link=t,await(this.modal?.showModal())}disconnectedCallback(){this.textField?.removeEventListener("keydown",this.submitFormOnReturnKey),this.urlField?.removeEventListener("keydown",this.submitFormOnReturnKey),super.disconnectedCallback()}getUrlValue(){return this.urlField?.value||""}getNormalizedUrlValue(){const e=this.getUrlValue(),t=a.b(e);return t?t.url:null}isValid(){return this.isValidText()&&this.isValidUrl()}isValidText(){return this.textField?.checkValidity()??!1}isValidUrl(){return null!==this.getNormalizedUrlValue()}renderLinkModal(){return n.x` <rpl-modal-card @focusin="${this.stopFocusPropagation}"> <div slot="title" class="text-center"> ${this.link?.nodeKey?s.y.editLink():s.y.addLink()} </div> <div slot="close-button"> ${s.p({appearance:"secondary",leadingIcon:e.al({size:n.I.Small}),size:e.q.Small,attributes:{onclick:this.close},screenReaderContent:s.y.closeLinkModal()})} </div> <faceplate-form @faceplate-submit="${this.onSubmit}" @input="${this.handleFormInput}" @focusout="${this.handleFormFocusout}" class="mb-0 mt-xl min-w-[350px]"> <div> <faceplate-text-input name="text" value="${this.link?.text}" class="w-100" faceplate-focusable> <span slot="label"> ${s.y.text()} </span> </faceplate-text-input> </div> <div class="mt-md"> <faceplate-text-input name="url" required inputmode="url" value="${this.link?.url}" class="w-100" faceplate-focusable helper-text-placeholder=" "> <span slot="label"> ${s.y.link()} </span> </faceplate-text-input> </div> <div class="mt-lg flex gap-md"> ${s.p({size:e.q.Medium,appearance:"secondary",children:s.y.cancel(),attributes:{"data-testid":"btn-cancel-link",className:"w-1/2",onclick:this.onCancel}})} ${s.p({size:e.q.Medium,appearance:"primary",children:s.y.save(),attributes:{className:"w-1/2","data-testid":"btn-save-link",onclick:this.onSubmit,disabled:this.disableSubmit}})} </div> </faceplate-form> </rpl-modal-card> `}focusTextField(){requestAnimationFrame((()=>{this.textField?.focus()}))}render(){return n.x`<rpl-dialog-sheet .overlayBlur="${!1}" id="${Ft}" dialog-id="${Ft}" label="${s.y.richTextEditorLinkDialog()}" class="min-h-[auto]" .litTemplateChildren="${this.renderLinkModal()}" @rpl-dialog-sheet:after-hide="${()=>this.close()}" @rpl-dialog-sheet:show="${()=>this.initFormFields()}" @rpl-dialog-sheet:initial-focus="${()=>this.focusTextField()}"> </rpl-dialog-sheet>`}};e._([e.h()],Ht.prototype,"link",void 0),e._([e.a2("rpl-dialog-sheet",!0)],Ht.prototype,"modal",void 0),e._([e.h()],Ht.prototype,"disableSubmit",void 0),Ht=e._([e.e("rte-link-modal")],Ht);const Vt="rte-link-action-modal";let jt=class extends n.s{constructor(){super(...arguments),this.close=()=>{this.modal?.hide()},this.onEdit=e=>{e.preventDefault(),this.editor?.dispatchCommand(s.X,this.link),this.modal?.hide()},this.onRemove=e=>{if(e.preventDefault(),this.editor){const e={currentSelection:this.link?.currentSelection};this.editor.dispatchCommand(s.j,e)}this.modal?.hide()}}static get styles(){return[e.t]}async open(e,t){this.editor=e,this.link=t,await(this.modal?.showModal())}renderActions(){return n.x` <rpl-modal-card> <div slot="title" class="text-center">${s.y.linkOptions()}</div> <div slot="close-button"> ${s.p({appearance:"secondary",leadingIcon:e.al({size:n.I.Small}),size:e.q.Small,screenReaderContent:s.y.closeLinkModal(),attributes:{onclick:this.close}})} </div> <div> <a href="${this.link?.url}" style="max-width:302px" target="_blank" class="truncate inline-block me-sm"> ${this.link?.url} </a> </div> <div class="me-sm -ms-sm"> ${s.p({attributes:{onclick:this.onEdit},shape:"pill",appearance:"plain",size:e.q.Small,leadingIcon:_.e({size:n.I.Small}),children:s.y.editLink()})} </div> <div class="me-sm -ms-sm"> ${s.p({attributes:{onclick:this.onRemove,className:"text-danger-content"},shape:"pill",appearance:"plain",size:e.q.Small,leadingIcon:g.d({size:n.I.Small}),children:s.y.removeLink()})} </div> </rpl-modal-card> `}render(){return n.x`<rpl-dialog-sheet .overlayBlur="${!1}" id="${Vt}" dialog-id="${Vt}" label="${s.y.richTextEditorLinkActionsDialog()}" class="min-h-[auto]" .litTemplateChildren="${this.renderActions()}"> </rpl-dialog-sheet>`}};function zt(t,i){t.getRootElement()?.dispatchEvent(e.c(M,i))}function Kt(e,t){const i=r.E();return!!r.u(i)&&(zt(t,{text:i.getTextContent().length>0?i.getTextContent():"",url:"",currentSelection:i}),!0)}function qt(t,i){const o=r.E();return!!r.u(o)&&(function(t,i){t.getRootElement()?.dispatchEvent(e.c(D,i))}(i,{text:t.text,url:t.url,nodeKey:t.nodeKey,currentSelection:o}),!0)}function Gt(e){if(!e.url||!e.currentSelection)return!1;const t=e.currentSelection.clone();r.l(t);const i=e.text||e.url;if(t.getTextContent().length>0){r.aD(e.url,{target:"_blank"});const o=t.focus.getNode().getParent();if(o&&s.l(o)){const e=o.getChildren();if(e.length>0){const[t,...o]=e;t.setTextContent(i),t.setFormat(0),o.forEach((e=>e.remove()))}o.selectEnd()}}else{const o=s.a1(e.url,{target:"_blank"}),n=r.Z(i);o.append(n);const a=t.focus.getNode();r.w(a)?s.T(t,a,o):t.insertNodes([o]),o.selectEnd()}return!0}function Wt(e){const t=e.nodeKey?r.S(e.nodeKey):null;if(t&&s.k(t)){const i=t.getFirstChild();if(i){if(i.getTextContent()===e.text||e.url===e.text)t?.setURL(e.url),i.setTextContent(e.text),t.selectEnd();else{const i=s.a1(e.url,{target:"_blank"}),o=r.Z(e.text);i.append(o),t.replace(i),i.select(),i.selectEnd()}return!0}}if(t&&s.l(t)){const i=t.getFirstChild();if(i){const o=e.text||e.url;return i.setTextContent(o),t.setURL(e.url),t.selectEnd(),!0}}return!1}function Yt(e,t){if(e)return zt(t,e),!0;const i=t.getEditorState().read((()=>r.E()));if(!r.u(i))return!1;const o=i.focus.getNode(),n=r.af(o,r.o);return!(!n||!o)&&(zt(t,{text:o.getTextContent(),url:n.getURL(),nodeKey:n.getKey(),currentSelection:i}),!0)}e._([e.h()],jt.prototype,"link",void 0),e._([e.a2("rpl-dialog-sheet",!0)],jt.prototype,"modal",void 0),jt=e._([e.e("rte-link-action-modal")],jt),[r.a1,r.aB,r.C,r.F,r.a3,r.aC,r.ak,r.y,r.aj,r.j].map((e=>e.getType()));let Jt=class extends Ee{constructor(){super(),this.isLink=!1,this.leadingIcon=I.l,this.text=s.y.addLinkButton(),this.name=fe.Link}handleClick(){this._editor?.dispatchCommand(this.isLink?s.X:s.Y,void 0)}beforeCreateEditor(e){return B(e=super.beforeCreateEditor(e),[{nodeType:s.s,nodeTypeConfig:{validChildren:[r.j.getType()]}},{nodeType:{replace:r.o,with:e=>new s.s(e.getURL(),{rel:e.getRel(),target:e.getTarget(),title:e.getTitle()}),withKlass:s.s}}])}showTooltip(e,t){const i=r.E();r.u(i)&&e.show({text:t.getTextContent(),nodeKey:t.getKey(),url:t.getURL(),currentSelection:i.clone()})}closeTooltip(e){e.hide()}tooltipFactory(e){return new s.Z(e)}createEditor(e){super.createEditor(e);const t=this._editor;if(!t.hasNodes([r.o]))throw new Error("LinkPlugin: LinkNode not registered on editor");r.t(t.registerCommand(s.Y,Kt,r.R),t.registerCommand(s.a0,qt,r.R),t.registerCommand(s.W,Gt,r.R),t.registerCommand(s.U,Wt,r.R),t.registerCommand(s.j,(e=>{if(!e.currentSelection)return!1;if(!r.u(e.currentSelection))return!1;const t=e.currentSelection.focus.getNode().getParent();return!(t&&!s.l(t))&&function(e){if(!e.currentSelection)return!1;const t=e.currentSelection.clone();return r.l(t),r.aD(null),!0}(e)}),r.R),t.registerCommand(s.X,Yt,r.R),t.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=r.E();r.u(e)?this.isLink=s.c(e,(e=>s.l(e)||s.k(e))):this.isLink=!1,this.selected=this.isLink,this.disabled=this.$shouldDisable()}))})),s._(s.s,e))}$shouldDisable(){const e=r.E();if(!e||this.isLink)return!1;if(!r.u(e)||!this._rte)return!0;const t=e,i=t.getNodes(),o=i.map((e=>e.getParent()));if(t.isCollapsed()){const[e]=i,[t]=o;return!s.i(this._rte,s.q(e,r.j,r.a1)?t:e,r.o)}{const[e]=o;return!(i.every(((t,i)=>s.q(t,r.j)&&e===o[i]))&&s.i(this._rte,e,r.o))}}};e._([e.h()],Jt.prototype,"isLink",void 0),Jt=e._([e.e("rte-toolbar-button-link")],Jt);const Zt=[r.j,r.o,s.s,r.A,s.h,s.b,r.a2,s.t,r.C].map((e=>e.getType()));function Xt(e){return e instanceof r.C&&"bullet"===e.getListType()}let Qt=class extends(_e(Ee)){constructor(){super(),this.isBulletedList=!1,this.leadingIcon=S.l,this.text=s.y.bulletList(),this.name=fe.BulletList,this.isToggle=!0}handleClick(){this._editor?.dispatchCommand(this.isBulletedList?r.aE:r.aF,void 0)}beforeCreateEditor(e){return Pe((e=super.beforeCreateEditor(e)).lexical,"theme.list.nested.listitem","list-none"),B(e,[{nodeType:r.C,nodeTypeConfig:{validChildren:[r.aB.getType()]}},{nodeType:r.aB,nodeTypeConfig:{validChildren:Zt}}])}createEditor(e){super.createEditor(e);const t=this._editor;if(!t.hasNodes([r.C,r.aB]))throw new Error("RTEToolbarButtonBulletedList: ListNode or ListItemNode not registered on editor");r.t(t.registerCommand(r.aF,(()=>(t.update((()=>{r.aI("bullet")})),!0)),r.s),t.registerCommand(r.aE,(()=>!!this.isBulletedList&&(t.update((()=>{r.aH()})),!0)),r.s),t.registerCommand(r.h,(()=>!!this.isBulletedList&&r.aG()),r.s),t.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=r.E();this.isBulletedList=r.u(e)&&s.c(e,Xt),this.selected=this.isBulletedList}))})),s.w(r.aB,e,{collapseBlock:!1}))}};function ei(e){return e instanceof r.C&&"number"===e.getListType()}e._([e.h()],Qt.prototype,"isBulletedList",void 0),Qt=e._([e.e("rte-toolbar-button-bulleted-list")],Qt);let ti=class extends(_e(Ee)){constructor(){super(),this.isNumberedList=!1,this.leadingIcon=t.l,this.text=s.y.numberList(),this.name=fe.NumberList,this.isToggle=!0}handleClick(){this._editor?.dispatchCommand(this.isNumberedList?r.aE:r.aJ,void 0)}beforeCreateEditor(e){return Pe((e=super.beforeCreateEditor(e)).lexical,"list.nested.listitem","list-none"),B(e,[{nodeType:r.C,nodeTypeConfig:{validChildren:[r.aB.getType()]}},{nodeType:r.aB,nodeTypeConfig:{validChildren:Zt}}])}createEditor(e){super.createEditor(e);const t=this._editor;if(!t.hasNodes([r.C,r.aB]))throw new Error("RTEToolbarButtonNumberedList: ListNode or ListItemNode not registered on editor");r.t(t.registerCommand(r.aJ,(()=>(r.aL(t,"number"),!0)),r.s),t.registerCommand(r.aE,(()=>!!this.isNumberedList&&(r.aK(t),!0)),r.s),t.registerCommand(r.h,(()=>!!this.isNumberedList&&r.aG()),r.s),t.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=r.E();this.isNumberedList=r.u(e)&&s.c(e,ei),this.selected=this.isNumberedList}))})),s.w(r.aB,e,{collapseBlock:!1}))}};function ii(e){const t=e.registerUpdateListener((()=>{t(),e.update((()=>{const e=r.E();if(r.u(e)){const t=e.anchor.getNode(),i=e.focus.getNode();if(!e.isCollapsed()&&!t.is(i)){let o=t,n=e.anchor.offset,s=i,a=e.focus.offset;if(e.isBackward()&&i.getTextContentSize()===e.focus.offset?(s=i.getNextSibling(),a=0):e.isBackward()||t.getTextContentSize()!==e.anchor.offset||(o=t.getNextSibling(),n=0),o=oi(o),s=oi(s),o&&s){const t=e.clone();t.setTextNodeRange(o,n,s,a),r.l(t)}}}}))}))}e._([e.h()],ti.prototype,"isNumberedList",void 0),ti=e._([e.e("rte-toolbar-button-numbered-list")],ti);const oi=e=>r.g(e)?e.getAllTextNodes()[0]:e,ri="bold";let ni=class extends(Se(Ee)){constructor(){super(),this.isBold=!1,this.leadingIcon=x.b,this.text=s.y.bold(),this.name=fe.Bold,this.isToggle=!0}handleClick(){this._editor?.dispatchCommand(r.i,ri)}createEditor(e){super.createEditor(e);const t=this._editor;r.e(t),t.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=r.E();this.isBold=r.u(e)&&e.hasFormat(ri),this.selected=this.isBold}))})),s.v(t,(()=>!this.shouldDisable()),ri),t.registerCommand(r.i,(e=>(e!==ri||this.disabled||ii(t),e===ri&&this.disabled)),r.J)}$shouldDisable(){const e=super.$shouldDisable();if(!e){const e=r.E();if(e&&(r.u(e)||r._(e))&&e.getNodes().some((e=>e.getParents().some((e=>r.aq(e)&&e.hasHeaderState(r.al.ROW))))))return!0}return e}};e._([e.h()],ni.prototype,"isBold",void 0),ni=e._([e.e("rte-toolbar-button-bold")],ni);const si="italic";let ai=class extends(Se(Ee)){constructor(){super(),this.isItalic=!1,this.leadingIcon=x.i,this.text=s.y.italic(),this.name=fe.Italic,this.isToggle=!0}handleClick(){this._editor?.dispatchCommand(r.i,si)}beforeCreateEditor(e){return Pe((e=super.beforeCreateEditor(e)).lexical,"theme.text.italic",si),e}createEditor(e){super.createEditor(e);const t=this._editor;r.e(t),t.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=r.E();this.isItalic=r.u(e)&&e.hasFormat(si),this.selected=this.isItalic}))})),s.v(t,(()=>!this.shouldDisable()),si),t.registerCommand(r.i,(e=>(e!==si||this.disabled||ii(t),e===si&&this.disabled)),r.J)}};e._([e.h()],ai.prototype,"isItalic",void 0),ai=e._([e.e("rte-toolbar-button-italic")],ai);const li="strikethrough";let di=class extends(Se(Ee)){constructor(){super(),this.isStrikethrough=!1,this.leadingIcon=t.s,this.text=s.y.strikethrough(),this.name=fe.Strikethrough,this.isToggle=!0}handleClick(){this._editor?.dispatchCommand(r.i,li)}beforeCreateEditor(e){return Pe((e=super.beforeCreateEditor(e)).lexical,"theme.text.strikethrough","line-through"),e}createEditor(e){super.createEditor(e);const t=this._editor;r.e(t),t.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=r.E();this.isStrikethrough=r.u(e)&&e.hasFormat(li),this.selected=this.isStrikethrough}))})),s.v(t,(()=>!this.shouldDisable()),li),t.registerCommand(r.i,(e=>(e!==li||this.disabled||ii(t),e===li&&this.disabled)),r.J)}};e._([e.h()],di.prototype,"isStrikethrough",void 0),di=e._([e.e("rte-toolbar-button-strikethrough")],di);const ci="superscript";let hi=class extends(Se(Ee)){constructor(){super(),this.isSuperscript=!1,this.leadingIcon=t.f,this.text=s.y.superscript(),this.name=fe.Superscript,this.isToggle=!0}handleClick(){this._editor?.dispatchCommand(r.i,ci)}createEditor(e){super.createEditor(e);const t=this._editor;r.e(t),t.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=r.E();this.isSuperscript=r.u(e)&&e.hasFormat(ci),this.selected=this.isSuperscript}))})),s.v(t,(()=>!this.shouldDisable()),ci),t.registerCommand(r.i,(e=>(e!==ci||this.disabled||ii(t),e===ci&&this.disabled)),r.J)}};var ui;e._([e.h()],hi.prototype,"isSuperscript",void 0),hi=e._([e.e("rte-toolbar-button-superscript")],hi);let pi=ui=class extends(i.T()){static get styles(){return[e.t,super.styles,n.a`:host{width:100%;display:block}:host([readonly]) ::slotted(div[contenteditable]){background-color:var(--color-interactive-background-disabled)}`]}static renderDefaultPlugins(){return n.x` ${ce()} ${K()} ${pe()} ${me()} `}removeAutoLink(e){this._removedAutoLinkKeySet.add(e)}hasAutoLinkRemoved(e){return this._removedAutoLinkKeySet.has(e)}get editorRoot(){if(!this._editorRoot){const{rootElements:e=[]}=this,[t,...i]=e;if(!t||i.length>0)throw new Error("A single child div should be passed into RedditRTE. e.g: <reddit-rte><div></div></reddit-rte>");this._editorRoot=t}return this._editorRoot}get buttons(){const{toolbarTopResponsivePlugins:e=[],actionBarPlugins:t=[],internalButtons:i=[]}=this;return[...e,...t,...i]}get plugins(){const{nonToolbarPlugins:e=[],buttons:t}=this;return[...e,...t]}get mediaMetadata(){return this._mediaMetadataMap||(this._mediaMetadataMap=function(e){const t=Y(e),i={};for(const[e,o]of Object.entries(t)){const t=e,{src:r,width:n,height:s,mimetype:a,poster:l}=o;t&&r&&(i[t]={width:parseInt(n??"",10)||void 0,height:parseInt(s??"",10)||void 0,mimetype:a,src:r,poster:l})}return i}(this.mediaElements??[])),this._mediaMetadataMap}get redditorMetadata(){return(this.redditorElements??[]).map((e=>({id:e.dataset.id,name:e.dataset.name,isAuthor:"true"===e.dataset.isAuthor})))}get isDirty(){return this._isDirty}set isDirty(e){this._isDirty=e}set canShowPlaceholder(e){this._canShowPlaceholder=e}getEditor(){if(!this._editor){const{plugins:e}=this,t=Y(this.configElements??[]),i=e.reduce(((e,t)=>{try{return t.beforeCreateEditor?.(e)||e}catch(t){return console.error(t),e}}),{lexical:P,plugins:t,nodes:{[r.aC.getType()]:{validChildren:[r.F,r.C,r.a0,s.I,r.a3,r.$,r.y,s.J,s.M].map((e=>e.getType()))},[r.F.getType()]:{validChildren:[r.j,r.a1,r.o,s.s,r.A,s.h,s.b,s.t,r.a2].map((e=>e.getType()))},[r.a1.getType()]:{validChildren:[]},[r.j.getType()]:{validChildren:[]}}});this._editor=this.editorFactory(i),s.a2(this._editor,i);const o=s.o(this._editor,"plugins.actionBar.showLeftActionBar"),n=s.o(this._editor,"plugins.actionBar.showRightActionBar"),a=s.o(this._editor,"plugins.formattingBar.showFormattingBar");void 0!==o&&(this.leftActionBarVisible="true"===o),void 0!==n&&(this.rightActionBarVisible="true"===n),void 0!==a&&(this.formattingBarVisible="true"===a),e.forEach((e=>{try{e.createEditor?.(this)}catch(e){console.error(e)}}))}return this._editor}getRTJSON(){if(!this._editor)return null;const e=this._editor.getEditorState();return s.a3(e.toJSON())}setRTJSON(e,t){if(!this._editor)throw new Error("editor uninitialized");return this.clear(),new Promise((i=>{this._editor?.update((()=>{s.R(e,t??this.mediaMetadata),r.b().selectEnd(),i()}),{skipTransforms:!0})}))}getPlainText(){return this.getEditor().getEditorState().read((()=>r.b().getTextContent()))}getRichTextMedia(){return this.getEditor().getEditorState().read((()=>[...r.U(s.I),...r.U(s.J)].map((e=>({id:e.mediaId,url:e.src,...(s.a4(e) ? {poster:e.poster,posterUploadedUrl:e.posterUploadedUrl,videoUploadedUrl:e.uploadedUrl} : {}),uploadedUrl:e.uploadedUrl,width:e.width,height:e.height,mimetype:e.mimetype,size:e.blob?.size,type:s.a4(e)?o.M.Video:o.M.Image})))));}async init(){const{editorRoot:t}=this;!function(t,{placeholder:i,readonly:o,size:r}){t.setAttribute("name","body"),t.setAttribute("contenteditable",o?"false":"true"),t.setAttribute("role","textbox"),["px-md","py-sm","outline-none","relative","resize-y","overflow-y-auto",r===e.ic.Small?q:G,"leading-5","box-border","[&_*:first-child:not(li)]:mt-0","[&_*:last-child]:mb-0"].forEach((e=>t.classList.add(e))),t.setAttribute("tabindex","1"),t.setAttribute("aria-placeholder",i)}(t,{placeholder:this.placeholder||"",readonly:this.readonly,size:this.size});const i=this.getEditor();if(i.setRootElement(t),i.setEditable(!this.readonly),i.registerCommand(r.aM,(()=>(this.dispatchEvent(e.c(e.bS,{},!0)),!1)),r.s),i.registerCommand(r.i,(e=>"underline"===e),r.J),this.initNodeRegistry(),this.initPersistedSelection(),function(e){e.getEditor().registerUpdateListener((({editorState:t})=>{e.canShowPlaceholder=t.read((()=>r.V(e.getEditor().isComposing())))}))}(this),this.initialValue?await this.setRTJSON(JSON.parse(this.initialValue)):this.addEmptyParagraphToRoot(!1),function(e){e.getEditor().registerUpdateListener((({dirtyElements:t,dirtyLeaves:i,prevEditorState:o,tags:r})=>{(i.size>0||t.size>0)&&(!o.isEmpty()&&!r.has("history-merge")||i.size>0)&&(e.isDirty=!0,e.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0})))}))}(this),function(e){e.getEditor().registerUpdateListener((({editorState:t})=>{t.read((()=>0===r.b().getChildrenSize()))&&e.addEmptyParagraphToRoot()}))}(this),function(e){e.getEditor().registerMutationListener(r.F,(t=>{for(const[i,o]of t)"created"===o&&e.getEditor().update((()=>{const e=r.S(i);""!==e?.getFormatType()&&e?.setFormat("")}),{tag:"history-merge"})}))}(this),this._initialized=!0,this.readyState=d.a.Ready,this.onAfterInitCallback){const e=this.onAfterInitCallback;this.onAfterInitCallback=null,void 0!==window.requestIdleCallback?window.requestIdleCallback(e,{timeout:1e3}):window.requestAnimationFrame(e)}t.addEventListener("focus",(e=>{e.preventDefault(),i.focus()}))}addEmptyParagraphToRoot(e=!0){this.getEditor().update((()=>{const t=r.I();r.b().append(t),e&&t.selectEnd()}),{tag:"history-merge"})}clear(){this.getEditor().update((()=>{r.b().clear()}),{discrete:!0,onUpdate:()=>this.clearNodeRegistry()}),this.getEditor().dispatchCommand(r.aN,void 0)}reset(){this.clear(),this.initialValue&&this.getEditor().update((()=>{this.setRTJSON(JSON.parse(this.initialValue))})),this.getEditor().dispatchCommand(r.aN,void 0)}initNodeRegistry(){const e=function(e,t){const i=Array.from(e._nodes.values()).map((e=>e.klass)),o=[];for(const r of i){const i=e.registerMutationListener(r,((...e)=>{t(r,...e)}));o.push(i)}return()=>o.forEach((e=>e()))}(this.getEditor(),((e,t)=>{const i=e.prototype instanceof r.aP?this.decoratorNodeRegistry:this.elementNodeRegistry;let o=!1;for(const[r,n]of t)"created"===n?o=i.add(e.getType(),r)||o:"destroyed"===n&&(o=i.delete(e.getType(),r)||o);o&&this.getEditor().dispatchCommand(d.N,{decoratorNodeRegistry:this.decoratorNodeRegistry,elementNodeRegistry:this.elementNodeRegistry})}));this.unsubscribeFnList.push(e)}clearNodeRegistry(){this.decoratorNodeRegistry=new s.a5,this.elementNodeRegistry=new s.a5,this.getEditor().dispatchCommand(d.N,{decoratorNodeRegistry:this.decoratorNodeRegistry,elementNodeRegistry:this.elementNodeRegistry})}initPersistedSelection(){const e=this.getEditor().registerCommand(r.X,(()=>(this._isDirty?this.dispatchEvent(new Event("change",{bubbles:!0})):this.dispatchEvent(new Event("blur",{bubbles:!0})),this.selection=r.E()?.clone()??null,!1)),r.s),t=this.getEditor().registerCommand(d.R,(()=>(s.a6()===this._editor?.getRootElement()||(this.selection&&r.l(this.selection),this._editor?.focus((()=>{const e=this._editor?.getRootElement();s.a6()!==e&&e.focus({preventScroll:!0})}),{defaultSelection:"rootStart"})),!0)),r.ar);this.unsubscribeFnList.push(e,t)}firstUpdated(){this._initialized||this.init()}connectedCallback(){super.connectedCallback(),this.classList.add("flex"),this.classList.add("flex-col"),this._initialized&&(this.initNodeRegistry(),this.initPersistedSelection())}disconnectedCallback(){this.unsubscribeFnList.forEach((e=>e())),super.disconnectedCallback()}async getUpdateComplete(){const e=await super.getUpdateComplete(),t=await Promise.all([this.formattingBar?.updateComplete,this.actionBar?.updateComplete]);return e&&t.every((e=>e))}updated(t){t.has("readyState")&&this.dispatchEvent(e.c(d.b,this.readyState)),void 0!==t.get("readonly")&&(this._editor?.setEditable(!this.readonly),this.editorRoot.setAttribute("contenteditable",this.readonly?"false":"true"));void 0!==t.get("formattingBarVisible")&&this.formattingBarVisible&&this.formattingBar?.focus(),super.updated(t)}focus(){const e=()=>{this.editorRoot.focus()};this._initialized?e():this.onAfterInitCallback=e}hasFocus(){return!(!this.editorRoot||document.activeElement!==this.editorRoot)}isEmpty(){return!this._initialized||!(this.decoratorNodeRegistry.count()>0)&&this.getEditor().getEditorState().read((()=>r.aO(this.getEditor().isComposing(),!0)))}constructor(){super(),this._initialized=!1,this._isDirty=!1,this._events=new e.E(this),this._pendingNodes=new Set,this._errorNodes=new Set,this._removedAutoLinkKeySet=new Set,this.readonly=!1,this.initialValue="",this.editorFactory=U,this.placeholder="",this.size=e.ic.Small,this.readyState=d.a.Pending,this.formattingBarVisible=!0,this.leftActionBarVisible=!0,this.rightActionBarVisible=!0,this._canShowPlaceholder=!0,this._editorRoot=null,this.decoratorNodeRegistry=new s.a5,this.elementNodeRegistry=new s.a5,this.unsubscribeFnList=[],this.onAfterInitCallback=null,this.selection=null,this._events.define(M,(async e=>{const t=this.shadowRoot?.querySelector("rte-link-modal");t&&(await t.open(this.getEditor(),e.detail))})),this._events.define(D,(async e=>{const t=this.shadowRoot?.querySelector("rte-link-action-modal");t&&(await t.open(this.getEditor(),e.detail))})),this._events.define(W,(async e=>{const t=this.shadowRoot?.querySelector("rte-table-menu");t&&(await t.toggle(e.detail))})),this._events.define(d.c,(e=>{e.stopPropagation();const{resolveReadyState:t}=e.detail;this.readyState=d.a.Pending,this._pendingNodes.add(t),t.catch((()=>{})).finally((()=>{this._pendingNodes.delete(t),this._pendingNodes.size<1&&(this.readyState=d.a.Ready)}))})),this._events.define(d.d,(e=>{e.stopPropagation(),this._errorNodes.add(e.detail),this.setCustomValidity(s.y.thereAreSomeErrors())})),this._events.define(d.e,(e=>{e.stopPropagation(),this._errorNodes.delete(e.detail),0===this._errorNodes.size&&this.setCustomValidity("")}))}toggleFormattingBar(){this.formattingBarVisible=!this.formattingBarVisible}renderTranslationBar(){return n.x` <div class="action-bar order-3"> <slot name="translation-bar"></slot> </div> `}renderActionBar(){return this.leftActionBarVisible||this.rightActionBarVisible?n.x`<rte-toolbar class="action-bar order-3"> ${this.leftActionBarVisible&&n.x`<slot slot="responsive" name="action-bar"> <rte-toolbar-button-image></rte-toolbar-button-image> <rte-toolbar-button-video></rte-toolbar-button-video> <rte-toolbar-button-giphy></rte-toolbar-button-giphy> <rte-toolbar-button ?selected="${this.formattingBarVisible}" .leadingIcon="${t.g}" screenReaderContent="${this.formattingBarVisible?s.y.hideFormattingOptions():s.y.showFormattingOptions()}" @click="${this.toggleFormattingBar}"></rte-toolbar-button> </slot>`} ${this.rightActionBarVisible&&n.x`<slot slot="fixed" name="action-bar-right"></slot>`} </rte-toolbar>`:n.x``}parseFormattingBarConfig(e){return e?{isSticky:"true"===s.o(e,"plugins.formattingBar.isSticky"),isVisible:"false"!==s.o(e,"plugins.formattingBar.showFormattingBar"),stickyTopOffset:J(s.o(e,"plugins.formattingBar.stickyTopOffset"),0),stickyZIndex:J(s.o(e,"plugins.formattingBar.stickyZIndex"),0)}:{isSticky:!1}}renderTopToolbar(){const{isSticky:t,stickyTopOffset:i,stickyZIndex:o}=this.parseFormattingBarConfig(this._editor),r={hidden:!this.formattingBarVisible,sticky:t},a=t?{top:`${i}px`,zIndex:o}:{},l=()=>n.x`<hr class="mx-0 border-solid border-sm border-neutral-border-weak" role="presentation">`;return n.x` <rte-toolbar class="toolbar-top-responsive order-1 ${e.Z(r)}" role="toolbar" aria-orientation="horizontal" aria-label="${s.y.textFormattingToolbar()}" style="${e.a6(a)}" part="toolbar-top"> <slot slot="responsive" name="toolbar-top-responsive"> <rte-toolbar-button-bold></rte-toolbar-button-bold> <rte-toolbar-button-italic></rte-toolbar-button-italic> <rte-toolbar-button-strikethrough></rte-toolbar-button-strikethrough> <rte-toolbar-button-superscript></rte-toolbar-button-superscript> <rte-toolbar-button-heading></rte-toolbar-button-heading> ${l()} <rte-toolbar-button-link></rte-toolbar-button-link> <slot name="toolbar-additions"></slot> <rte-toolbar-button-bulleted-list></rte-toolbar-button-bulleted-list> <rte-toolbar-button-numbered-list></rte-toolbar-button-numbered-list> ${l()} <rte-toolbar-button-spoiler></rte-toolbar-button-spoiler> <rte-toolbar-button-block-quote></rte-toolbar-button-block-quote> <rte-toolbar-button-code></rte-toolbar-button-code> <rte-toolbar-button-code-block></rte-toolbar-button-code-block> <rte-toolbar-button-table></rte-toolbar-button-table> <slot name="top-toolbar-right"></slot> </slot> </rte-toolbar> `}render(){return n.x` <div class="order-2 relative"> ${this._canShowPlaceholder&&(this.placeholder||this.placeholderElement)?n.x` <p aria-hidden="true" class="absolute inset-0 m-0 px-md py-sm leading-5 text-neutral-content-weak flex items-baseline"> <slot name="placeholder-html">${this.placeholder}</slot> </p> `:n.x``} <slot></slot> </div> ${this.shouldRenderTranslation?this.renderTranslationBar():""} ${this.renderActionBar()} ${this.renderTopToolbar()} <slot name="plugins">${ui.renderDefaultPlugins()}</slot> <rte-link-modal></rte-link-modal> <rte-link-action-modal></rte-link-action-modal> <rte-table-menu></rte-table-menu> `}};return pi.shadowRootOptions={...n.s.shadowRootOptions,delegatesFocus:!0},e._([e.b9("rte-toolbar-button")],pi.prototype,"internalButtons",void 0),e._([e.n({type:Boolean})],pi.prototype,"readonly",void 0),e._([e.n({type:String,attribute:"value"})],pi.prototype,"initialValue",void 0),e._([e.n({attribute:!1})],pi.prototype,"editorFactory",void 0),e._([e.n({type:String})],pi.prototype,"placeholder",void 0),e._([e.n({type:Boolean,attribute:"should-render-translation"})],pi.prototype,"shouldRenderTranslation",void 0),e._([e.n({type:String})],pi.prototype,"size",void 0),e._([e.l({slot:"placeholder-html",flatten:!0})],pi.prototype,"placeholderElement",void 0),e._([e.h()],pi.prototype,"readyState",void 0),e._([e.h()],pi.prototype,"formattingBarVisible",void 0),e._([e.h()],pi.prototype,"leftActionBarVisible",void 0),e._([e.h()],pi.prototype,"rightActionBarVisible",void 0),e._([e.h()],pi.prototype,"_canShowPlaceholder",void 0),e._([e.l({flatten:!0,selector:"data[value=config]"})],pi.prototype,"configElements",void 0),e._([e.l({flatten:!0,selector:"data[value=media]"})],pi.prototype,"mediaElements",void 0),e._([e.l({flatten:!0,selector:"data[value=redditor]"})],pi.prototype,"redditorElements",void 0),e._([e.l({flatten:!0,selector:"div"})],pi.prototype,"rootElements",void 0),e._([e.l({slot:"plugins",flatten:!0})],pi.prototype,"nonToolbarPlugins",void 0),e._([e.a2("rte-toolbar.toolbar-top-responsive")],pi.prototype,"formattingBar",void 0),e._([e.l({slot:"toolbar-top-responsive",flatten:!0})],pi.prototype,"toolbarTopResponsivePlugins",void 0),e._([e.a2("rte-toolbar.action-bar")],pi.prototype,"actionBar",void 0),e._([e.l({slot:"action-bar",flatten:!0})],pi.prototype,"actionBarPlugins",void 0),pi=ui=e._([e.e("reddit-rte")],pi),{get R(){return pi},S:q,a:"min-h-[30rem]",b:G,c:be,d:ht,e:async function(e,{count:t}){const i=await nt(e);return(await st(i,{count:t})).map((e=>({file:e,src:URL.createObjectURL(e)})))},g:dt,s:R,v:ut}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");
SML.dm("DVyMC1bDLo",["Dw4vb8Yfbm"],(async a=>{const{svg:c}=a.a();return{u:a.m(c`<path d="M13.849.576c-.658 0-1.283.21-1.759.596-1.769 1.429-4.412 1.429-6.181 0A2.802 2.802 0 004.15.576a2.653 2.653 0 00-2.65 2.65v5.547a2.654 2.654 0 002.651 2.65c.659 0 1.284-.21 1.759-.595.092-.074.194-.13.291-.196V16.2c0 1.544 1.256 2.8 2.8 2.8 1.544 0 2.8-1.256 2.8-2.8v-5.614a2.677 2.677 0 01.627-1.695 6.73 6.73 0 00-3.427-.955 6.74 6.74 0 00-4.222 1.492.999.999 0 01-.627.196.852.852 0 01-.851-.851V3.227c0-.47.382-.851.851-.851.248 0 .471.07.628.196a6.735 6.735 0 004.221 1.492c1.532 0 3.031-.53 4.221-1.492.157-.126.38-.196.628-.196.469 0 .851.382.851.85v4.675h1.8V3.227A2.654 2.654 0 0013.85.576h-.001zM10 9.885V16.2c0 .55-.449 1-1 1-.551 0-1-.45-1-1V9.864a5.063 5.063 0 012 .02zm7.785 2.674a4.122 4.122 0 011.213 2.935A3.51 3.51 0 0115.492 19a.9.9 0 110-1.802c.939 0 1.703-.764 1.703-1.703 0-.445-.119-1.095-.685-1.661l-.003-.004c-.156-.153-.776-.774-1.106-1.105v1.419a.9.9 0 11-1.802 0v-3.541a.9.9 0 01.901-.901h3.541a.9.9 0 110 1.802H16.73c.311.312.908.908 1.05 1.047l.005.008z"></path>`,"0 0 20 20","unban")}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");SML.di("./CZLMnmUH44.js",import.meta.url,"CZLMnmUH44");SML.di("./DgFeZwOkXZ.js",import.meta.url,"DgFeZwOkXZ");SML.di("./D_6DXw1u0k.js",import.meta.url,"D_6DXw1u0k");
SML.dm("DbR4o2_jjG",["Dw4vb8Yfbm","5r73EsgItq","CZLMnmUH44","DgFeZwOkXZ","D_6DXw1u0k"],(async(e,t,a)=>{const n={COMMENT:"comment",POST:"post"};let i=class extends t.s{constructor(){super(...arguments),this.translationContextValue=e.aQ,this.showTranslationModal=()=>{this.translationModal.showModal()},this.hideTranslationModal=()=>{this.translationModal.close()},this.isCommentModal=()=>this.modalType===n.COMMENT,this.saveCommentTranslationModalSetting=()=>{if(this.hideTranslationCheckbox.checked){const t=this.translationContextValue;this.isCommentModal()?(t.showCommentTranslationModal=!1,e.i(this,a.h())):(t.showPostTranslationModal=!1,e.i(this,a.i()));const n=new CustomEvent("update-translation-context",{bubbles:!0,composed:!0,detail:t});this.dispatchEvent(n)}},this.modalRefuseClick=e=>{e.preventDefault(),e.stopPropagation(),this.saveCommentTranslationModalSetting(),this.hideTranslationModal(),this.handleTranslationRefuseClick()},this.modalConfirmClick=e=>{e.preventDefault(),e.stopPropagation(),this.saveCommentTranslationModalSetting(),this.hideTranslationModal(),this.handleTranslationConfirmClick()},this.renderTitleText=()=>t.x` ${this.isCommentModal()?"Translate your comment":"Translate your post"} `,this.renderBodyText=()=>t.x` ${this.isCommentModal()?"Users might not understand your comment without a translation. Would you like to translate your comment before posting it?":"Users might not understand your post without a translation. Would you like to translate you post?"} `,this.renderButtonText=()=>t.x` ${this.isCommentModal()?"Translate comment":"Translate post"} `,this.renderCheckBoxText=()=>t.x` ${this.isCommentModal()?"Don’t ask to translate my comments again.":"Don’t ask to translate my post again."} `}render(){return t.x` <faceplate-modal id="contribution-translation-modal" class="min-h-[auto]"> <div slot="title">${this.renderTitleText()}</div> <div slot="closeButton"> ${e.o({appearance:"secondary",leadingIcon:e.al({size:t.I.Small}),size:e.q.Small,attributes:{"aria-label":"Cancel",onclick:this.hideTranslationModal}})} </div> <div class="mb-0 w-[350px]"> <p class="mt-md text-14 leading-5 text-neutral-content" data-testid="translation-modal-body"> ${this.renderBodyText()} </p> <div> <faceplate-checkbox-input id="comment-translation-hide-checkbox" class="pt-[8px] text-14 leading-5 text-neutral-content"> ${this.renderCheckBoxText()} </faceplate-checkbox-input> </div> <div class="mt-lg flex gap-xs"> ${e.o({size:e.q.Medium,appearance:"secondary",children:"Refuse translation",attributes:{className:"w-1/2",onclick:this.modalRefuseClick,"data-testid":"translation-refuse-button"}})} ${e.o({size:e.q.Medium,appearance:"primary",children:this.renderButtonText(),attributes:{className:"w-1/2",onclick:this.modalConfirmClick,"data-testid":"translation-confirm-button"}})} </div> </div> </faceplate-modal> `;}};var r;i.styles=[e.t],e._([e.n({type:Object})],i.prototype,"handleTranslationConfirmClick",void 0),e._([e.n({type:Object})],i.prototype,"handleTranslationRefuseClick",void 0),e._([e.n({type:String,attribute:"modal-type"})],i.prototype,"modalType",void 0),e._([e.aP({context:e.aR,subscribe:!0}),e.h()],i.prototype,"translationContextValue",void 0),e._([e.a2("faceplate-checkbox-input#comment-translation-hide-checkbox")],i.prototype,"hideTranslationCheckbox",void 0),e._([e.a2("faceplate-modal#contribution-translation-modal",!0)],i.prototype,"translationModal",void 0),i=e._([e.e("translation-contribution-modal")],i),function(e){e.PostSubmit="post_submit",e.CommentSubmit="comment_submit"}(r||(r={}));return{M:n,R:2e3,get a(){return r},s:async function(e,t){e.value=await async function(e){const t=document.querySelector("reputation-recaptcha");if(!t)throw new Error("Unable to find reputation-recaptcha component");return await t.getToken(e)}(t)}}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");
SML.dm("DpxwSNfjM1",["Dw4vb8Yfbm"],(async c=>{const{svg:a}=c.a(),m=c.m(a`<path d="M15.698 6h-4.8V3.55c.54-.31.9-.89.9-1.55 0-.99-.81-1.8-1.8-1.8s-1.8.81-1.8 1.8c0 .66.36 1.24.9 1.55V6h-4.8c-1.82 0-3.3 1.48-3.3 3.3v7.4c0 1.82 1.48 3.3 3.3 3.3h11.4c1.82 0 3.3-1.48 3.3-3.3V9.3c0-1.82-1.48-3.3-3.3-3.3zm-10.7 5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5zm5 6a3 3 0 01-2.96-2.52c-.04-.25.14-.48.4-.48h5.13c.25 0 .44.23.4.48a3 3 0 01-2.96 2.52h-.01zm3.5-4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path>`,"0 0 20 20","bot-fill"),{svg:t}=c.a();return{b:m,s:c.m(t`<path d="M9.998 1a9 9 0 00-9 9 9 9 0 009 9 9 9 0 009-9 9 9 0 00-9-9zm-4.5 6.945a1.5 1.5 0 113.001.001 1.5 1.5 0 01-3.001-.001zm4.5 7.205c-1.53 0-2.928-.687-3.736-1.837l1.473-1.035c.465.661 1.332 1.071 2.264 1.071.932 0 1.799-.41 2.264-1.071l1.473 1.035c-.809 1.15-2.205 1.837-3.736 1.837h-.002zm3-5.705a1.5 1.5 0 11.001-3.001 1.5 1.5 0 01-.001 3.001z"></path>`,"0 0 20 20","sentiment-good-fill")}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");SML.di("./CsrbxKoUKW.js",import.meta.url,"CsrbxKoUKW");SML.di("./BNvs6GxKML.js",import.meta.url,"BNvs6GxKML");
SML.dm("Py4YQhl7Hl",["Dw4vb8Yfbm","CsrbxKoUKW","BNvs6GxKML"],(async(n,o,t)=>{const e=()=>({booleanCondition:null,compositeCondition:null,notCondition:null,regexCondition:null,stringCondition:{features:[n.dA.PostTitle,n.dA.PostBody],values:[]},stringExactMatchCondition:null,addressCondition:null}),i={trigger:n.dy.Post,prerequisites:{__typename:"AutomationPostPrerequisites",postTypes:[n.dz.Text]},condition:e()};var l,r,s,d,a,u;!function(n){n.Inform="inform",n.Report="report",n.Block="block",n.Educate="educate",n.Redirect="redirect",n.Guideline="guideline",n.Offtopic="offtopic",n.UserFlair="userflair",n.BlockDomain="blockdomain"}(l||(l={})),function(n){n.Post="Post",n.Comment="Comment",n.User="User"}(r||(r={})),function(n){n.Keywords="Keywords",n.Regex="Regex",n.Url="Url",n.UrlDomain="UrlDomain",n.BooleanUserFlair="BooleanUserFlair",n.SpecificUserFlair="SpecificUserFlair"}(s||(s={})),function(n){n.Include="Include",n.Exclude="Exclude"}(d||(d={})),function(n){n.Inform="Inform",n.Report="Report",n.Block="Block"}(a||(a={})),function(n){n.PostTitleAndPostBody="PostTitleAndPostBody",n.PostTitle="PostTitle",n.PostBody="PostBody",n.CommentBody="CommentBody",n.UserFlair="UserFlair",n.PostUrl="PostUrl"}(u||(u={}));const c="tab";var C,m,g,p,f,x;!function(n){n.Discover="discover",n.PostGuidance="post-guidance",n.CommentGuidance="comment-guidance"}(C||(C={})),function(n){n.Edit="edit",n.Preset="preset",n.New="new",n.Recommendation="recommendation"}(m||(m={})),function(n){n.KeywordsInclude="Keywords-Include",n.KeywordsExclude="Keywords-Exclude",n.RegexInclude="Regex-Include",n.RegexExclude="Regex-Exclude",n.UrlInclude="Url-Include",n.UrlExclude="Url-Exclude",n.UrlDomainInclude="UrlDomain-Include",n.UrlDomainExclude="UrlDomain-Exclude"}(g||(g={})),function(n){n.HasAnyUserFlair="BooleanUserFlair-Include",n.HasNoUserFlair="BooleanUserFlair-Exclude",n.HasSpecificUserFlair="SpecificUserFlair-Include",n.HasNoSpecificUserFlair="SpecificUserFlair-Exclude"}(p||(p={})),function(n){n.CHANGE_FLAIR="automation-preview-user-flair-picker:change-flair",n.REQUEST_FLAIR="automation-preview-user-flair-picker:request-flair",n.SEND_FLAIR="automation-preview-user-flair-picker:send-flair"}(f||(f={})),function(n){n.LIVE_PREVIEW="live-preview"}(x||(x={}));const y=n=>{switch(n.__typename){case"AutomationRegexCondition":return{regexCondition:n,booleanCondition:null,compositeCondition:null,notCondition:null,stringCondition:null,stringExactMatchCondition:null,addressCondition:null};case"AutomationStringCondition":return{stringCondition:n,booleanCondition:null,compositeCondition:null,notCondition:null,regexCondition:null,stringExactMatchCondition:null,addressCondition:null};case"AutomationStringExactMatchCondition":return{stringExactMatchCondition:n,booleanCondition:null,compositeCondition:null,notCondition:null,regexCondition:null,stringCondition:null,addressCondition:null};case"AutomationBooleanCondition":return{booleanCondition:{feature:n.booleanFeature,value:n.booleanValue},compositeCondition:null,notCondition:null,regexCondition:null,stringCondition:null,stringExactMatchCondition:null,addressCondition:null};case"AutomationNotCondition":return{notCondition:{regexCondition:n.regexCondition,stringCondition:n.stringCondition,stringExactMatchCondition:n.stringExactMatchCondition,addressCondition:n.addressCondition?{addressType:n.addressCondition.addressType,features:n.addressCondition.addressFeatures,values:n.addressCondition.values}:null},booleanCondition:null,compositeCondition:null,regexCondition:null,stringCondition:null,stringExactMatchCondition:null,addressCondition:null};case"AutomationCompositeCondition":return{compositeCondition:{children:n.children.map((n=>n?y(n):null)).filter(o.f),operator:n.operator},booleanCondition:null,notCondition:null,regexCondition:null,stringCondition:null,stringExactMatchCondition:null,addressCondition:null};case"AutomationAddressCondition":return{compositeCondition:null,booleanCondition:null,notCondition:null,regexCondition:null,stringCondition:null,stringExactMatchCondition:null,addressCondition:{features:n.addressFeatures,values:n.values,addressType:n.addressType}};default:return{booleanCondition:null,compositeCondition:null,notCondition:null,regexCondition:null,stringCondition:null,stringExactMatchCondition:null,addressCondition:null}}},A=n=>n.map((n=>{switch(n.__typename){case"AutomationInformAction":return{informAction:{message:n.message??""},blockAction:null,reportAction:null};case"AutomationBlockAction":return{blockAction:{message:n.message??""},informAction:null,reportAction:null};case"AutomationReportAction":return{reportAction:{message:n.message??""},informAction:null,blockAction:null};default:return}}),[]).filter(o.f),T=(n,t)=>{const e=y(t.condition);return e.compositeCondition?.children&&(e.compositeCondition.children=e.compositeCondition.children.filter(o.f).map((n=>{const{compositeCondition:o,...t}=n;return t}))),{subredditId:n,name:t.name,trigger:t.trigger,condition:e,actions:A(t.actions)}},h=o=>{switch(o){case u.PostTitleAndPostBody:return[n.dA.PostBody,n.dA.PostTitle];case u.PostBody:return[n.dA.PostBody];case u.PostTitle:return[n.dA.PostTitle];case u.PostUrl:return[n.dA.PostUrl];case u.CommentBody:return[n.dA.CommentBody];case u.UserFlair:return[n.dA.UserFlairTemplateId];default:return[]}},E=o=>{if(o.length>1)return u.PostTitleAndPostBody;if(1===o.length)switch(o[0]){case n.dA.PostBody:return u.PostBody;case n.dA.PostTitle:return u.PostTitle;case n.dA.CommentBody:return u.CommentBody;case n.dA.UserFlairTemplateId:case n.dB.HasUserFlair:return u.UserFlair;case n.dA.PostUrl:return u.PostUrl}return u.PostTitleAndPostBody},P=n=>n.map((n=>E([n]))),U=o=>{switch(o){case n.dA.PostBody:case n.dA.PostTitle:return r.Post;case n.dA.CommentBody:return r.Comment;case n.dA.UserFlairTemplateId:case n.dB.HasUserFlair:return r.User;default:return r.Post}},I=o=>{switch(o){case n.dA.UserFlairTemplateId:return s.SpecificUserFlair;case n.dB.HasUserFlair:return s.BooleanUserFlair;default:return}},M=(o,t)=>({conditionTarget:U(o.features[0]),filterType:t,phrases:o.values,locationType:E(o.features),locationTypes:P(o.features),phraseType:o.addressType===n.dC.Domain?s.UrlDomain:s.Url}),B=(n,o)=>({conditionTarget:U(n.features[0]),filterType:o,phrases:n.values,locationType:E(n.features),locationTypes:P(n.features),phraseType:s.Keywords}),F=(n,o)=>({conditionTarget:U(n.features[0]),filterType:o,regex:n.value,isCaseSensitive:n.isCaseSensitive??!1,locationType:E(n.features),locationTypes:P(n.features),phraseType:s.Regex}),v=(n,o)=>({conditionTarget:U(n.feature),filterType:o,phrases:n.values,locationType:E([n.feature]),locationTypes:P([n.feature]),phraseType:I(n.feature)??s.SpecificUserFlair}),b=n=>Object.values(C).includes(n),R=(n,o)=>n.reduce(((n,t)=>{const{contentMessages:e}=t,i=e?.filter((n=>n.feature===o));return i&&i.length>0&&n.push({...t,contentMessages:i}),n}),[])??[],{svg:w}=n.a(),D=n.m(w`<path d="M15.7 5H15v-.7C15 2.48 13.52 1 11.7 1H4.3C2.48 1 1 2.48 1 4.3v7.4C1 13.52 2.48 15 4.3 15H5v.7C5 17.52 6.48 19 8.3 19h7.4c1.82 0 3.3-1.48 3.3-3.3V8.3C19 6.48 17.52 5 15.7 5zM4.3 13.2c-.83 0-1.5-.67-1.5-1.5V4.3c0-.83.67-1.5 1.5-1.5h7.4c.83 0 1.5.67 1.5 1.5V5H8.3C6.48 5 5 6.48 5 8.3v4.9h-.7zm2.69 3.22l2.24-2.24c.5-.5 1.31-.5 1.81 0l3.03 3.02H8.3c-.57 0-1.05-.32-1.31-.78zm10.21-.72c0 .56-.32 1.05-.78 1.31l-4.1-4.1a3.09 3.09 0 00-4.36 0L6.8 14.07V8.31c0-.83.67-1.5 1.5-1.5h7.4c.83 0 1.5.67 1.5 1.5v7.39z"></path><path d="M14 11.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>`,"0 0 20 20","gallery");return{get A(){return x},B:n=>{switch(n.__typename){case"AutomationPostPrerequisites":return{postPrerequisites:{postTypes:n.postTypes}};case"AutomationCommentPrerequisites":return{commentPrerequisites:{commentLevel:n.commentLevel}};default:return{postPrerequisites:null,commentPrerequisites:null}}},C:"Untitled Rule",D:i,E:o=>{switch(o){case C.CommentGuidance:return n.dy.Comment;case C.PostGuidance:default:return n.dy.Post}},get F(){return l},G:n=>{switch(n){case"AutomationBlockOutcome":return a.Block;case"AutomationInformOutcome":return a.Inform;case"AutomationReportOutcome":return a.Report;default:return null}},H:(o,e)=>{switch(e){case t.P.Title:return R(o,n.dD.Title);case t.P.Body:case t.P.OptionalBody:return((n,o)=>n.reduce(((n,t)=>{const{contentMessages:e}=t,i=e?.filter((n=>n.stringFeature===o));return i&&i.length>0&&n.push({...t,contentMessages:i}),n}),[])??[])(o,n.dA.PostBody);case t.P.Link:return R(o,n.dD.Url)}return[]},get a(){return f},b:T,c:(n,o)=>({automationId:o.id,status:o.status,...T(n,o)}),d:()=>{const n=new URL(window.location.href).searchParams.get(c);if(n&&b(n))return n},e:c,f:n=>n&&""!==n&&b(n)?`?${c}=${n}`:"",g:D,h:n=>n.some((({__typename:n})=>"AutomationBlockOutcome"===n)),get i(){return C},j:y,k:A,l:o=>{switch(o){case n.dy.Post:return C.PostGuidance;case n.dy.Comment:return C.CommentGuidance;default:return""}},get m(){return p},get n(){return s},get o(){return d},get p(){return g},get q(){return u},get r(){return r},get s(){return a},t:({addressCondition:n,stringCondition:o,regexCondition:t,notCondition:e,booleanCondition:i,stringExactMatchCondition:l})=>o?B(o,d.Include):t?F(t,d.Include):i?(n=>({conditionTarget:U(n.feature),filterType:n.value?d.Include:d.Exclude,locationType:E([n.feature])??u.UserFlair,locationTypes:P([n.feature])??u.UserFlair,phraseType:I(n.feature)??s.BooleanUserFlair}))(i):l?v(l,d.Include):n?M(n,d.Include):e?(n=>n.stringCondition?B(n.stringCondition,d.Exclude):n.regexCondition?F(n.regexCondition,d.Exclude):n.stringExactMatchCondition?v(n.stringExactMatchCondition,d.Exclude):n.addressCondition?M(n.addressCondition,d.Exclude):null)(e):null,u:({phraseType:o,filterType:t,phrases:e,locationType:i,locationTypes:l,regex:r,isCaseSensitive:a=!1})=>{const u=i?h(i):l?(n=>n.flatMap(h))(l):[];switch(o){case s.Regex:{const n={features:u,value:r??"",isCaseSensitive:a};return t===d.Include?{regexCondition:n,booleanCondition:null,compositeCondition:null,notCondition:null,stringCondition:null,stringExactMatchCondition:null,addressCondition:null}:{notCondition:{regexCondition:n,stringCondition:null,stringExactMatchCondition:null},booleanCondition:null,compositeCondition:null,regexCondition:null,stringCondition:null,stringExactMatchCondition:null,addressCondition:null}}case s.Keywords:{const n={features:u,values:e??[]};return t===d.Include?{stringCondition:n,booleanCondition:null,compositeCondition:null,notCondition:null,regexCondition:null,stringExactMatchCondition:null,addressCondition:null}:{notCondition:{stringCondition:n,regexCondition:null,stringExactMatchCondition:null},booleanCondition:null,compositeCondition:null,regexCondition:null,stringCondition:null,stringExactMatchCondition:null,addressCondition:null}}case s.BooleanUserFlair:return{booleanCondition:{feature:n.dB.HasUserFlair,value:t===d.Include},compositeCondition:null,notCondition:null,regexCondition:null,stringCondition:null,stringExactMatchCondition:null,addressCondition:null};case s.SpecificUserFlair:{const o={feature:n.dA.UserFlairTemplateId,values:e??[]};return t===d.Include?{stringExactMatchCondition:o,booleanCondition:null,compositeCondition:null,notCondition:null,regexCondition:null,stringCondition:null,addressCondition:null}:{notCondition:{stringExactMatchCondition:o,regexCondition:null,stringCondition:null},booleanCondition:null,compositeCondition:null,regexCondition:null,stringCondition:null,stringExactMatchCondition:null,addressCondition:null}}case s.UrlDomain:{const o={addressType:n.dC.Domain,features:u,values:e??[]};return t===d.Include?{addressCondition:o,booleanCondition:null,compositeCondition:null,notCondition:null,regexCondition:null,stringCondition:null,stringExactMatchCondition:null}:{notCondition:{addressCondition:o,regexCondition:null,stringCondition:null},booleanCondition:null,compositeCondition:null,regexCondition:null,stringCondition:null,stringExactMatchCondition:null}}case s.Url:{const o={addressType:n.dC.Url,features:u,values:e??[]};return t===d.Include?{addressCondition:o,booleanCondition:null,compositeCondition:null,notCondition:null,regexCondition:null,stringCondition:null,stringExactMatchCondition:null}:{notCondition:{addressCondition:o,regexCondition:null,stringCondition:null},booleanCondition:null,compositeCondition:null,regexCondition:null,stringCondition:null,stringExactMatchCondition:null}}default:return null}},get v(){return m},w:n=>n.compositeCondition?n.compositeCondition.children.filter((n=>!!n)):[n],x:o=>{switch(o){case n.dy.Comment:return{booleanCondition:null,compositeCondition:null,notCondition:null,regexCondition:null,stringCondition:{features:[n.dA.CommentBody],values:[]},stringExactMatchCondition:null,addressCondition:null};case n.dy.Post:default:return e()}},y:({informAction:n,reportAction:o,blockAction:t})=>n?{actionType:a.Inform,message:n.message}:o?{actionType:a.Report,message:o.message}:t?{actionType:a.Block,message:t.message}:null,z:({actionType:n,customMessage:o})=>{switch(n){case a.Report:return{reportAction:{message:o},blockAction:null,informAction:null};case a.Block:return{blockAction:{message:o},informAction:null,reportAction:null};case a.Inform:return{informAction:{message:o},blockAction:null,reportAction:null};default:return null}}}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");
SML.dm("TELHDd3mgM",["Dw4vb8Yfbm"],(async a=>{const{svg:c}=a.a();return{v:a.m(c`<path d="M8.797 14a1.78 1.78 0 01-.865-.224A1.816 1.816 0 017 12.187V7.812c0-.662.358-1.27.932-1.589a1.786 1.786 0 011.83.06L13.17 8.47c.521.334.831.906.831 1.53 0 .622-.31 1.194-.83 1.528l-3.408 2.187a1.79 1.79 0 01-.965.283V14zm0-6.188v4.375L12.204 10 8.797 7.812zM10 18.9c-1.516 0-2.946-.186-4.372-.57a5.626 5.626 0 01-3.958-3.956 16.605 16.605 0 01-.57-4.37c0-1.514.187-2.944.57-4.37a5.626 5.626 0 013.958-3.958 16.902 16.902 0 018.744 0 5.626 5.626 0 013.958 3.956c.384 1.428.57 2.858.57 4.371 0 1.513-.187 2.943-.57 4.37a5.626 5.626 0 01-3.958 3.957c-1.426.384-2.856.57-4.372.57zm-6.592-4.994a3.818 3.818 0 002.686 2.686 15.12 15.12 0 007.81 0 3.814 3.814 0 002.686-2.686c.342-1.273.508-2.55.508-3.903 0-1.353-.166-2.63-.508-3.904a3.818 3.818 0 00-2.686-2.686 15.12 15.12 0 00-7.81 0A3.814 3.814 0 003.408 6.1a14.841 14.841 0 00-.508 3.903c0 1.353.166 2.63.508 3.903v.001z"></path>`,"0 0 20 20","video")}}));
SML.di("./Dw4vb8Yfbm.js",import.meta.url,"Dw4vb8Yfbm");
SML.dm("_Qc0cvBRUp",["Dw4vb8Yfbm"],(async e=>{const t="comment_draft",n="draft";var o;!function(e){e.Save="save",e.Open="open",e.Submit="submit",e.Delete="delete",e.AutoDelete="auto_delete"}(o||(o={}));return{get C(){return o},c:(o,r)=>r?e.b({source:t,action:o,noun:n},{comment_draft:{length:r}}):e.b({source:t,action:o,noun:n})}}));